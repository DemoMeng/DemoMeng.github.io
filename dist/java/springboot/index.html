<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>springboot | è’™å¤§æ‹¿</title>
    <meta name="generator" content="VuePress 1.9.5">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script charset="utf-8" src="https://my.openwrite.cn/js/readmore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="è’™å¤§æ‹¿çš„åšå®¢">
    
    <link rel="preload" href="/mengqizhang/assets/css/0.styles.a1d09170.css" as="style"><link rel="preload" href="/mengqizhang/assets/js/app.a8d21a83.js" as="script"><link rel="preload" href="/mengqizhang/assets/js/2.e69c46bd.js" as="script"><link rel="preload" href="/mengqizhang/assets/js/17.8a25e983.js" as="script"><link rel="prefetch" href="/mengqizhang/assets/js/10.11174a82.js"><link rel="prefetch" href="/mengqizhang/assets/js/100.bd6553c3.js"><link rel="prefetch" href="/mengqizhang/assets/js/101.ac07962b.js"><link rel="prefetch" href="/mengqizhang/assets/js/102.79bec0af.js"><link rel="prefetch" href="/mengqizhang/assets/js/103.0c0a0808.js"><link rel="prefetch" href="/mengqizhang/assets/js/104.3ed6d392.js"><link rel="prefetch" href="/mengqizhang/assets/js/105.be22e8c8.js"><link rel="prefetch" href="/mengqizhang/assets/js/106.efa39ac4.js"><link rel="prefetch" href="/mengqizhang/assets/js/107.545ffb45.js"><link rel="prefetch" href="/mengqizhang/assets/js/108.cf23c097.js"><link rel="prefetch" href="/mengqizhang/assets/js/109.3339ffad.js"><link rel="prefetch" href="/mengqizhang/assets/js/11.08defbae.js"><link rel="prefetch" href="/mengqizhang/assets/js/110.bafd2f00.js"><link rel="prefetch" href="/mengqizhang/assets/js/12.25a3365c.js"><link rel="prefetch" href="/mengqizhang/assets/js/13.9b88bf7d.js"><link rel="prefetch" href="/mengqizhang/assets/js/14.c4d7ed3a.js"><link rel="prefetch" href="/mengqizhang/assets/js/15.b407b696.js"><link rel="prefetch" href="/mengqizhang/assets/js/16.1c08698a.js"><link rel="prefetch" href="/mengqizhang/assets/js/18.e34bf6a6.js"><link rel="prefetch" href="/mengqizhang/assets/js/19.68d7669f.js"><link rel="prefetch" href="/mengqizhang/assets/js/20.de14558d.js"><link rel="prefetch" href="/mengqizhang/assets/js/21.56869e5e.js"><link rel="prefetch" href="/mengqizhang/assets/js/22.aea26c9b.js"><link rel="prefetch" href="/mengqizhang/assets/js/23.4a0b2ea3.js"><link rel="prefetch" href="/mengqizhang/assets/js/24.58c270f0.js"><link rel="prefetch" href="/mengqizhang/assets/js/25.413aed44.js"><link rel="prefetch" href="/mengqizhang/assets/js/26.5ebfde8b.js"><link rel="prefetch" href="/mengqizhang/assets/js/27.48dd442a.js"><link rel="prefetch" href="/mengqizhang/assets/js/28.d2afcf03.js"><link rel="prefetch" href="/mengqizhang/assets/js/29.b928e199.js"><link rel="prefetch" href="/mengqizhang/assets/js/3.7aafc190.js"><link rel="prefetch" href="/mengqizhang/assets/js/30.4c1cbe1a.js"><link rel="prefetch" href="/mengqizhang/assets/js/31.77073e2d.js"><link rel="prefetch" href="/mengqizhang/assets/js/32.5f66f7a2.js"><link rel="prefetch" href="/mengqizhang/assets/js/33.a8272e84.js"><link rel="prefetch" href="/mengqizhang/assets/js/34.3b8ea135.js"><link rel="prefetch" href="/mengqizhang/assets/js/35.100b34a0.js"><link rel="prefetch" href="/mengqizhang/assets/js/36.06cb633d.js"><link rel="prefetch" href="/mengqizhang/assets/js/37.f3d4b763.js"><link rel="prefetch" href="/mengqizhang/assets/js/38.733d311d.js"><link rel="prefetch" href="/mengqizhang/assets/js/39.8434909a.js"><link rel="prefetch" href="/mengqizhang/assets/js/4.000c3dbd.js"><link rel="prefetch" href="/mengqizhang/assets/js/40.dd341745.js"><link rel="prefetch" href="/mengqizhang/assets/js/41.1fcf309c.js"><link rel="prefetch" href="/mengqizhang/assets/js/42.1cc69bad.js"><link rel="prefetch" href="/mengqizhang/assets/js/43.fefa3ac7.js"><link rel="prefetch" href="/mengqizhang/assets/js/44.d284f8c1.js"><link rel="prefetch" href="/mengqizhang/assets/js/45.2564339d.js"><link rel="prefetch" href="/mengqizhang/assets/js/46.23627a8c.js"><link rel="prefetch" href="/mengqizhang/assets/js/47.cecbf290.js"><link rel="prefetch" href="/mengqizhang/assets/js/48.bad75ece.js"><link rel="prefetch" href="/mengqizhang/assets/js/49.2fa60a3e.js"><link rel="prefetch" href="/mengqizhang/assets/js/5.9832e234.js"><link rel="prefetch" href="/mengqizhang/assets/js/50.f3159852.js"><link rel="prefetch" href="/mengqizhang/assets/js/51.738bce4a.js"><link rel="prefetch" href="/mengqizhang/assets/js/52.efc0fa7e.js"><link rel="prefetch" href="/mengqizhang/assets/js/53.8d0c00f1.js"><link rel="prefetch" href="/mengqizhang/assets/js/54.a519e682.js"><link rel="prefetch" href="/mengqizhang/assets/js/55.9652e586.js"><link rel="prefetch" href="/mengqizhang/assets/js/56.c88f759b.js"><link rel="prefetch" href="/mengqizhang/assets/js/57.c6f3cd20.js"><link rel="prefetch" href="/mengqizhang/assets/js/58.0c040aca.js"><link rel="prefetch" href="/mengqizhang/assets/js/59.fc5ce388.js"><link rel="prefetch" href="/mengqizhang/assets/js/6.48810bdc.js"><link rel="prefetch" href="/mengqizhang/assets/js/60.a50c0285.js"><link rel="prefetch" href="/mengqizhang/assets/js/61.ab6648f5.js"><link rel="prefetch" href="/mengqizhang/assets/js/62.f589c0b8.js"><link rel="prefetch" href="/mengqizhang/assets/js/63.df4a0587.js"><link rel="prefetch" href="/mengqizhang/assets/js/64.e5f1a0d6.js"><link rel="prefetch" href="/mengqizhang/assets/js/65.94e94ec2.js"><link rel="prefetch" href="/mengqizhang/assets/js/66.9a0f92dc.js"><link rel="prefetch" href="/mengqizhang/assets/js/67.15d5b718.js"><link rel="prefetch" href="/mengqizhang/assets/js/68.ca0d798d.js"><link rel="prefetch" href="/mengqizhang/assets/js/69.4de863fa.js"><link rel="prefetch" href="/mengqizhang/assets/js/7.2f8cbddd.js"><link rel="prefetch" href="/mengqizhang/assets/js/70.7c1bcd59.js"><link rel="prefetch" href="/mengqizhang/assets/js/71.70f3e9ec.js"><link rel="prefetch" href="/mengqizhang/assets/js/72.ca361407.js"><link rel="prefetch" href="/mengqizhang/assets/js/73.95c0b000.js"><link rel="prefetch" href="/mengqizhang/assets/js/74.673e240c.js"><link rel="prefetch" href="/mengqizhang/assets/js/75.f5cf8815.js"><link rel="prefetch" href="/mengqizhang/assets/js/76.30b8a8fb.js"><link rel="prefetch" href="/mengqizhang/assets/js/77.0bdfd82b.js"><link rel="prefetch" href="/mengqizhang/assets/js/78.a21a9dee.js"><link rel="prefetch" href="/mengqizhang/assets/js/79.5c55aff9.js"><link rel="prefetch" href="/mengqizhang/assets/js/8.507fce61.js"><link rel="prefetch" href="/mengqizhang/assets/js/80.aa70b0e8.js"><link rel="prefetch" href="/mengqizhang/assets/js/81.1cb55142.js"><link rel="prefetch" href="/mengqizhang/assets/js/82.50b720b1.js"><link rel="prefetch" href="/mengqizhang/assets/js/83.85834849.js"><link rel="prefetch" href="/mengqizhang/assets/js/84.e2f1cab8.js"><link rel="prefetch" href="/mengqizhang/assets/js/85.c154565c.js"><link rel="prefetch" href="/mengqizhang/assets/js/86.c5dbbd95.js"><link rel="prefetch" href="/mengqizhang/assets/js/87.2b62cc5e.js"><link rel="prefetch" href="/mengqizhang/assets/js/88.5deb957d.js"><link rel="prefetch" href="/mengqizhang/assets/js/89.fbed7b0f.js"><link rel="prefetch" href="/mengqizhang/assets/js/9.70c1c418.js"><link rel="prefetch" href="/mengqizhang/assets/js/90.8efb35d5.js"><link rel="prefetch" href="/mengqizhang/assets/js/91.a3da2ba6.js"><link rel="prefetch" href="/mengqizhang/assets/js/92.1f9bf6c0.js"><link rel="prefetch" href="/mengqizhang/assets/js/93.862f4101.js"><link rel="prefetch" href="/mengqizhang/assets/js/94.1a0c5762.js"><link rel="prefetch" href="/mengqizhang/assets/js/95.6df0f77b.js"><link rel="prefetch" href="/mengqizhang/assets/js/96.90bef310.js"><link rel="prefetch" href="/mengqizhang/assets/js/97.fa2b5f10.js"><link rel="prefetch" href="/mengqizhang/assets/js/98.d84c6b84.js"><link rel="prefetch" href="/mengqizhang/assets/js/99.785b4a31.js">
    <link rel="stylesheet" href="/mengqizhang/assets/css/0.styles.a1d09170.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mengqizhang/" class="home-link router-link-active"><!----> <span class="site-name">è’™å¤§æ‹¿</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mengqizhang/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="https://gitee.com/DemoMeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…³äºæˆ‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mengqizhang/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="https://gitee.com/DemoMeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…³äºæˆ‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é¢è¯• ğŸ“–ğŸ”¥ğŸ”¥</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/ç¯å¢ƒé…ç½®/" class="sidebar-heading clickable"><span>ç¯å¢ƒé…ç½® ğŸ”§</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/æ¶ˆæ¯é˜Ÿåˆ—/" class="sidebar-heading clickable"><span>æ¶ˆæ¯é˜Ÿåˆ— ğŸ”¥ğŸ”¥ğŸ”¥</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/æ•°æ®å±‚/" class="sidebar-heading clickable"><span>æ•°æ®å±‚ ğŸ”¥ğŸ”¥ğŸ”¥</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/å®¹å™¨åŒ–/" class="sidebar-heading clickable"><span>å®¹å™¨åŒ– ğŸ³</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java â˜•ï¸</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mengqizhang/java/" aria-current="page" class="sidebar-link">Java</a></li><li><a href="/mengqizhang/java/jvm/jvm.html" class="sidebar-link">JVM</a></li><li><a href="/mengqizhang/java/springboot/" aria-current="page" class="active sidebar-link">springboot</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mengqizhang/java/springboot/#springboot" class="sidebar-link">springboot</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/java/springboot/#spring-bootæ‰§è¡Œæµç¨‹" class="sidebar-link">Spring bootæ‰§è¡Œæµç¨‹</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/java/springboot/#springå’Œspringbootçš„åŒºåˆ«" class="sidebar-link">springå’Œspringbootçš„åŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/java/springboot/#springbootä¸­çš„logback" class="sidebar-link">springbootä¸­çš„logback</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/java/springboot/#springboot-mdc-å…¨é“¾è·¯è°ƒç”¨æ—¥å¿—è¿½è¸ª" class="sidebar-link">springboot + MDC å…¨é“¾è·¯è°ƒç”¨æ—¥å¿—è¿½è¸ª</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/java/springboot/#äº‹åŠ¡ä¸ç”Ÿæ•ˆçš„åœºæ™¯" class="sidebar-link">äº‹åŠ¡ä¸ç”Ÿæ•ˆçš„åœºæ™¯</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/java/springboot/#å¼‚æ­¥ä»»åŠ¡è°ƒåº¦" class="sidebar-link">å¼‚æ­¥ä»»åŠ¡è°ƒåº¦</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/java/springboot/#springbootå¸¸ç”¨æ³¨è§£" class="sidebar-link">SpringBootå¸¸ç”¨æ³¨è§£</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/java/springboot/#æ¥å£å¹‚ç­‰æ€§" class="sidebar-link">æ¥å£å¹‚ç­‰æ€§</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/java/springboot/#springbooté¡¹ç›®ä¸­çš„æ—¥æœŸé—®é¢˜" class="sidebar-link">springBooté¡¹ç›®ä¸­çš„æ—¥æœŸé—®é¢˜</a></li></ul></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>å¤šçº¿ç¨‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/mengqizhang/java/é›†åˆ/" class="sidebar-heading clickable"><span>javaé›†åˆ</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åˆ†å¸ƒå¼äº‹åŠ¡</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åˆ†å¸ƒå¼ç³»ç»Ÿ â˜ï¸</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webSocket</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ELK ğŸ”</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nginx ğŸ‡·ğŸ‡º</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jenkins ğŸ‘´</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æœåŠ¡å™¨ ğŸ’°</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æµ‹è¯• ğŸ˜“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç›‘æ§å‘Šè­¦</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="springboot"><a href="#springboot" class="header-anchor">#</a> springboot</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>#### ç®€ä»‹
    springbootæ˜¯åŸºäºspring+java+webå®¹å™¨ï¼Œå¾®æœåŠ¡æ¡†æ¶çš„æ°å‡ºä»£è¡¨ã€‚å¾®æœåŠ¡å…¶å®å°±æ˜¯å°†æœåŠ¡ç²’åº¦åšå°ï¼Œä½¿ä¹‹å¯ä»¥ç‹¬ç«‹æ‰¿æ‹…å¯¹å¤–æœåŠ¡çš„çš„èŒè´£ã€‚

##### ç‰¹å¾
    * éµå¾ªâ€œçº¦å®šèƒœäºé…ç½®â€çš„åŸåˆ™ï¼Œä½¿ç”¨spring bootåªéœ€è¦å¾ˆå°‘çš„é…ç½®ï¼Œå¤§éƒ¨åˆ†æ—¶å€™å¯ä»¥ä½¿ç”¨é»˜è®¤é…ç½® ï¼ˆspringç»„ä»¶ä»£ç æ˜¯è½»é‡çº§çš„ï¼Œä½†æ˜¯xmlé…ç½®ç¡®å®é‡é‡çº§çš„ï¼‰
    * å¼€ç®±å³ç”¨ã€é¡¹ç›®å¿«é€Ÿæ­å»ºï¼Œå¯ä»¥é…ç½®æ•´åˆç¬¬ä¸‰æ–¹æ¡†æ¶
    * å¯å®Œå…¨ä¸ä½¿ç”¨xmlé…ç½®ï¼Œå€ŸåŠ©java config
    * å†…åµŒServletï¼ˆå¦‚ Tomcatï¼‰å®¹å™¨ï¼Œå¯ä»¥jaråŒ…è¿è¡Œ
    * è¿è¡Œä¸­çš„åº”ç”¨çŠ¶æ€ç›‘æ§ã€å®‰å…¨ã€æŒ‡æ ‡ã€å¥åº·æ£€æµ‹

##### æ ¸å¿ƒåŠŸèƒ½
    * èµ·æ­¥ä¾èµ–ï¼š spring-boot-starter-web
    * è‡ªåŠ¨é…ç½®ï¼š çº¦å®šèƒœäºé…ç½®ï¼Œspringbooté»˜è®¤é…ç½®
    
#####  å¾®æœåŠ¡ä¼˜åŠ¿

    *	ç‹¬ç«‹æ€§ã€‚æ¯ä¸ªå¾®æœåŠ¡éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®ã€‚å¯ä»¥ç‹¬ç«‹å¯¹å¤–æä¾›æœåŠ¡ï¼Œå¯ä»¥å°†ç ”å‘äººåŠ›èµ„æºå¾ˆå¥½çš„åˆ†æ‘Šï¼Œé¿å…äººåŠ›èµ„æºå¯†é›†å¸¦æ¥çš„æ²Ÿé€šã€åä½œæˆæœ¬ã€‚ï¼ˆä½è€¦åˆåŸåˆ™ï¼‰
    *	ç¨³å®šæ€§ã€‚ä»»ä½•ä¸€ä¸ªå¾®æœåŠ¡çš„å¤±è´¥éƒ½å°†åªå½±å“è‡ªå·±æˆ–å°‘é‡å…¶ä»–å¾®æœåŠ¡ï¼Œä¸ä¼šå½±å“æ•´ä¸ªæœåŠ¡è¿è¡Œä½“ç³»ã€‚


1.å®šæ—¶ä»»åŠ¡å™¨ã€è°ƒåº¦ ï¼š  Quartz
2.AOPã€IOC
3.äº‹åŠ¡çš„ä¼ æ’­æ€§
    Aæ–¹æ³•é‡Œé¢è°ƒç”¨äº†Bæ–¹æ³•å¯¼è‡´äº‹åŠ¡ä¸ç”Ÿæ•ˆï¼Œå¯ä»¥ä½¿ç”¨å½“å‰ç±»è°ƒç”¨Bæ–¹æ³•ï¼Œå¹¶ä¸”å½“å‰çš„ç±»éœ€è¦æ³¨å†Œåˆ°springBeanç®¡ç†å®¹å™¨ä¸­ï¼ŒåŸå› äº‹åŠ¡æ˜¯ç”±springå®¹å™¨ç®¡ç†çš„ã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="spring-bootæ‰§è¡Œæµç¨‹"><a href="#spring-bootæ‰§è¡Œæµç¨‹" class="header-anchor">#</a> Spring bootæ‰§è¡Œæµç¨‹</h2> <ul><li><ol><li>springboot æºç </li></ol></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public ConfigurableApplicationContext run(String... args) {
        // åˆ›å»º StopWatch ç”¨äºç»Ÿè®¡ç¨‹åºå¯åŠ¨è€—æ—¶
        StopWatch stopWatch = new StopWatch();
        stopWatch.start();
        // åˆ›å»ºé…ç½®ä¸Šä¸‹æ–‡å¯¹è±¡
        ConfigurableApplicationContext context = null;
        Collection&lt;SpringBootExceptionReporter&gt; exceptionReporters = new ArrayList&lt;&gt;();
        configureHeadlessProperty();
        // å¼€å¯ä¸€ä¸ªç›‘å¬å™¨
        SpringApplicationRunListeners listeners = getRunListeners(args);
        listeners.starting();
        try {
        
            // åˆ›å»ºé»˜è®¤é…ç½®é¡¹
            ApplicationArguments applicationArguments = new DefaultApplicationArguments(
                    args);
            // å°†é»˜è®¤é…ç½®é¡¹æ”¾åˆ°å…¨å±€é…ç½®å˜é‡ä¸­        
            ConfigurableEnvironment environment = prepareEnvironment(listeners,
                    applicationArguments);
            configureIgnoreBeanInfo(environment);
            // è®¾ç½®å¯åŠ¨ banner å›¾ç‰‡
            Banner printedBanner = printBanner(environment);
            // åˆ›å»º ApplicationContext ä¸Šä¸‹æ–‡å¯¹è±¡
            context = createApplicationContext();
            exceptionReporters = getSpringFactoriesInstances(
                    SpringBootExceptionReporter.class,
                    new Class[] { ConfigurableApplicationContext.class }, context);
            // å‡†å¤‡ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œé»˜è®¤é…ç½®é¡¹ï¼Œç›‘å¬äº‹ä»¶ï¼Œç¯å¢ƒå˜é‡ï¼Œbannerå›¾ç‰‡
            // åŠ è½½ application.ymlé…ç½®æ–‡ä»¶ï¼š 		postProcessApplicationContext(context); // ä½¿ç”¨ ResouceåŠ è½½application.yml é…ç½®æ–‡ä»¶
            // è°ƒç”¨ ApplicationContextInitializer.initialize() å¯¹applicationContextä¸Šä¸‹æ–‡è¿›è¡Œåˆå§‹åŒ–
            // beanFactory.registerSingleton(&quot;springApplicationArguments&quot;, applicationArguments); // æ·»åŠ éœ€è¦ç‰¹å®šå•ä¾‹æ¨¡å¼çš„bean
            prepareContext(context, environment, listeners, applicationArguments,
                    printedBanner);
            refreshContext(context);
            afterRefresh(context, applicationArguments);
            stopWatch.stop();
            if (this.logStartupInfo) {
                new StartupInfoLogger(this.mainApplicationClass)
                        .logStarted(getApplicationLog(), stopWatch);
            }
            listeners.started(context);
            callRunners(context, applicationArguments);
        }
        catch (Throwable ex) {
            handleRunFailure(context, ex, exceptionReporters, listeners);
            throw new IllegalStateException(ex);
        }
       
        try {
            listeners.running(context);
        }
        catch (Throwable ex) {
            handleRunFailure(context, ex, exceptionReporters, null);
            throw new IllegalStateException(ex);
        }
        return context;
}



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><p>-2 ä¸»è¦çš„å¯åŠ¨æ­¥éª¤</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1. å‡†å¤‡é˜¶æ®µï¼šåˆå§‹åŒ–é˜¶æ®µï¼Œä¼šåˆ›å»º SpringBootçš„ ApplicationContextï¼Œå¹¶ä¸”åŠ è½½åº”ç”¨ç¨‹åºçš„åˆå§‹åŒ–é…ç½®ä¿¡æ¯
2. åº”ç”¨ä¸Šä¸‹æ–‡ ApplicationContext åˆ›å»ºé˜¶æ®µï¼šæ ¹æ®è‡ªåŠ¨è£…é…é…ç½®ï¼ŒResource åŠ è½½ application.yml çš„é…ç½®æ–‡ä»¶ä¿¡æ¯ï¼Œé…ç½®å„ç§ç»„ä»¶å’Œ éœ€è¦ç‰¹å®šå•ä¾‹æ¨¡å¼çš„bean
3. åˆ·æ–°ä¸Šä¸‹æ–‡é˜¶æ®µï¼šåˆ›å»ºwebå®¹å™¨ã€æ‰§è¡Œå¯åŠ¨ä»»åŠ¡å¼€å¯ç›‘å¬å™¨ã€åˆå§‹åŒ–å™¨
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="springå’Œspringbootçš„åŒºåˆ«"><a href="#springå’Œspringbootçš„åŒºåˆ«" class="header-anchor">#</a> springå’Œspringbootçš„åŒºåˆ«</h2> <ul><li>springè§£å†³äº†ä»€ä¹ˆé—®é¢˜ ï¼Ÿ springè¿™é‡ŒæŒ‡çš„æ˜¯SSMä¸­çš„é‚£å¥—æ¡†æ¶</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>è§£å†³çš„é—®é¢˜ï¼›ï¼ˆä¼˜ç‚¹ï¼‰
    1. springæ˜¯Javaä¼ä¸šç‰ˆæœ¬ï¼ˆJava Enterprise Edition JEEä¹Ÿå«J2EEï¼‰çš„è½»é‡çº§æ›¿ä»£å“ã€‚
    2. springæ— éœ€å¼€å‘é‡é‡çº§çš„EnterpriseJavaBean ï¼ˆEJBï¼‰ï¼Œæä¾›äº†ä¸€å¥—ç®€å•çš„æ–¹æ³•ã€‚
    3. é€šè¿‡DIã€IOC å’Œ AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ç”¨ç®€å•çš„javaå¯¹è±¡å®ç°äº†EJBçš„åŠŸèƒ½ã€‚
    
    1. springçš„IOCå®¹å™¨ï¼ŒæŠŠå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»äº¤ç»™springç®¡ç†ï¼Œé™ä½äº†æœåŠ¡ä¹‹é—´çš„è€¦åˆæ€§ï¼Œè®©å¼€å‘è€…æ›´å¤šçš„å…³æ³¨æœåŠ¡çš„å…·ä½“ä¸šåŠ¡é€»è¾‘ã€‚
    2. springæä¾›äº† äº‹åŠ¡æ»šåˆ©ã€WSï¼ˆwebServiceï¼‰
    3. springçš„AOPé¢å‘åˆ‡é¢ç¼–ç¨‹
    4. å¯¹ä¸»æµæ¡†æ¶æœ‰æ¯”è¾ƒå¥½çš„æ”¯æŒï¼šmybatisã€hibernateã€strutsï¼Œjpaç­‰
    5. springçš„DIé™ä½ä¸šåŠ¡å¯¹è±¡æ›¿æ¢çš„å¤æ‚æ€§
    6. springä¾µå…¥æ€§å°ã€ä»£ç æ±¡æŸ“å°‘
    
æœªè§£å†³çš„é—®é¢˜ï¼š
    1. ç¹æ‚çš„XMLé…ç½®ï¼š
    2. é¡¹ç›®ä¾èµ–ç®¡ç†ï¼š ä¾èµ–åº“çš„ç‰ˆæœ¬å†²çªä¸€ç›´æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ã€ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜
    3. springä¸æ”¯æŒåˆ†å¸ƒå¼
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="springbootä¸­çš„logback"><a href="#springbootä¸­çš„logback" class="header-anchor">#</a> springbootä¸­çš„logback</h2> <ul><li>æ—¥å¿—æ¡†æ¶ã€æ—¥å¿—é—¨é¢</li> <li>é¡¹ç›®ï¼š https://gitee.com/DemoMeng/better-skills/a-logback</li> <li>JULã€JCLã€Log4jã€Slf4jã€Logbackã€Log4j2</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>æ—¥å¿—æ¡†æ¶ï¼š
  JULï¼š Java Util Logï¼š javaå®˜æ–¹æä¾›çš„log libï¼Œä½†æ˜¯ä½¿ç”¨ä¸å¤Ÿå¹¿æ³›-åŸå› ï¼š 
                            1 å¼€å‘å‡ºçš„æ—¶é—´æ™šï¼ˆ2002å¹´ï¼‰ç¬¬ä¸‰æ–¹log libå¹¿æ³› ã€ 
                            2 æ€§èƒ½é—®é¢˜ä¸å¦‚Logback/Log4jã€
                            3 åŠŸèƒ½ä¸å¤Ÿä¸°å¯Œæ¯”å¦‚é»˜è®¤æ²¡æœ‰ä»classpathåŠ è½½æ–‡ä»¶
                            
  Log4jï¼š Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ã€åˆ›å§‹äººï¼šCeki Gulcuã€‚ javaé¢†åŸŸçš„å…ƒè€é¡¹ç›®ã€‚é«˜åº¦å¯é…ç½®ã€å¹¶é€šè¿‡è¿è¡Œæ—¶å¤–éƒ¨æ–‡ä»¶é…ç½®ã€‚
           å®ƒæ ¹æ®è®°å½•çš„ä¼˜å…ˆçº§åˆ«ï¼Œå¹¶æä¾›æœºåˆ¶ï¼Œä»¥æŒ‡ç¤ºè®°å½•ä¿¡æ¯åˆ°è®¸å¤šçš„ç›®çš„åœ°ï¼Œè¯¸å¦‚ï¼šæ•°æ®åº“ï¼Œæ–‡ä»¶ï¼Œæ§åˆ¶å°ï¼ŒUNIX ç³»ç»Ÿæ—¥å¿—ç­‰
           ä¸‰ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†ï¼š 
                loggersï¼š è´Ÿè´£æ•è·è®°å½•ä¿¡æ¯
                appendersï¼š è´Ÿè´£å‘å¸ƒæ—¥å¿—ä¿¡æ¯ã€ä»¥ä¸åŒçš„é¦–é€‰ç›®çš„åœ°
                layoutsï¼š è´Ÿè´£æ ¼å¼åŒ–ä¸åŒé£æ ¼çš„æ—¥å¿—ä¿¡æ¯
           ç¼ºç‚¹ï¼š æ€§èƒ½ä½ï¼Œåœ¨logbackå‡ºæ¥ä¹‹åï¼Œlog4jä½¿ç”¨ä¹Ÿå‡å°‘äº†         
                
  Logbackï¼š åˆ›å§‹äººï¼š Ceki Gulcu ï¼Œå¦å¤–ä¸€ä¸ªå¼€æºæ—¥å¿—ç»„ä»¶ï¼Œæ˜¯ä½œä¸ºLog4jçš„ç»§æ‰¿è€…æ¥å¼€å‘çš„ï¼Œæä¾›äº†æ›´å¥½çš„æ€§èƒ½å®ç°ï¼Œå¼‚æ­¥loggerï¼Œfilteræ›´å¤šç‰¹æ€§
               ä¸‰ä¸ªæ¨¡å—ï¼š
                    logback-coreï¼šæ˜¯ä¸‹é¢ä¸¤ä¸ªæ¨¡å—çš„åŸºç¡€æ¨¡å—
                    logback-classicï¼š æ‰©å±•äº†æ ¸å¿ƒæ¨¡å—ï¼ˆlogback-coreï¼‰ï¼Œæ˜¯log4jçš„ä¸€ä¸ªæ”¹è‰¯ç‰ˆæœ¬ã€å¹¶ä¸”å®Œæ•´å®ç°äº† Slf4j çš„apiï¼ˆå¯ä»¥å®ç°å’Œå…¶ä»–æ—¥å¿—ç³»ç»Ÿçš„æ¥å›åˆ‡æ¢ï¼‰ï¼Œè¿™æ ·å¯ä»¥å¾ˆæ–¹ä¾¿æ›´æ¢æ—¥å¿—ç³»ç»Ÿä¸º log4jæˆ–è€…JDK1.4 Loggingã€æˆ–è€…JUL ï¼ˆjava util loggingï¼‰
                    logback-accessï¼š  è®¿é—®æ¨¡å—ä¸ Servlet å®¹å™¨é›†æˆã€ä¸ºtomcatç­‰æä¾›é€šè¿‡Httpæ¥è®¿é—®æ—¥å¿—çš„åŠŸèƒ½

               
               ä¸»è¦å…³é”®ï¼š
                     Loggerï¼šï¼ˆlogback-classicï¼‰
                     Appenderï¼šï¼ˆlogback-coreï¼‰
                     Layoutï¼šï¼ˆlogback-coreï¼‰
                     Root
                     
                     filter: è¿‡æ»¤å™¨ï¼Œç”¨äºé…ç½®è¿‡æ»¤ä¸åŒçš„æ—¥å¿—çº§åˆ«ï¼Œä¸»è¦ä½¿ç”¨çš„æœ‰ï¼š ä¸´ç•Œå€¼è¿‡æ»¤å™¨ï¼ˆThresholdFilterï¼‰ï¼Œçº§åˆ«è¿‡æ»¤å™¨ ï¼ˆLevelFilterï¼‰ 
                     level
                     logger
                    
                    
  Log4j2ï¼š åŸºäº Log4j ä¸Šä¸ºäº†æé«˜å…¶æ€§èƒ½è€Œå¼€å‘å‡ºäº† Log4j2             
            Log4j2 å’Œ Log4jå¹¶ä¸å…¼å®¹ï¼Œå¹¶ä¸”è®¾è®¡æ¨¡ä»¿ Logbackï¼Œæ€§èƒ½å€’æ˜¯æé«˜äº†ä¸å°‘
            Log4j2 ä¹Ÿåšäº† Facadeï¼ˆé—¨é¢ï¼‰/Implementationï¼ˆå®ç°ï¼‰ åˆ†ç¦»çš„è®¾è®¡ï¼Œåˆ†æˆäº† log4j-api å’Œ log4j-coreã€‚

  ******å¯¹æ¯”
æ€§èƒ½ä¸Š Log4j2 è¦å¼ºï¼Œä½†æ˜¯ç”Ÿæ€ä¸Š Logbackæ˜¯ä¼˜å…ˆçš„  
1 log4j2æ¯”logbackæ›´æ–°ï¼šlog4j2çš„GAç‰ˆåœ¨2014å¹´åº•æ‰æ¨å‡ºï¼Œæ¯”logbackæ™šäº†å¥½å‡ å¹´ï¼Œè¿™æœŸé—´log4j2ç¡®å®å¸æ”¶äº†slf4jå’Œlogbackçš„ä¸€äº›ä¼˜ç‚¹ï¼ˆæ¯”å¦‚æ—¥å¿—æ¨¡æ¿ï¼‰ï¼ŒåŒæ—¶åº”ç”¨äº†ä¸å°‘çš„æ–°æŠ€æœ¯ 
2 ç”±äºé‡‡ç”¨äº†æ›´å…ˆè¿›çš„é”æœºåˆ¶å’ŒLMAX Disruptoråº“ï¼Œlog4j2çš„æ€§èƒ½ä¼˜äºlogbackï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å’Œä½¿ç”¨å¼‚æ­¥æ—¥å¿—çš„ç¯å¢ƒä¸‹ 
3 äºŒè€…éƒ½æ”¯æŒFilterï¼ˆåº”è¯¥è¯´æ˜¯log4j2å€Ÿé‰´äº†logbackçš„Filterï¼‰ï¼Œèƒ½å¤Ÿå®ç°çµæ´»çš„æ—¥å¿—è®°å½•è§„åˆ™ï¼ˆä¾‹å¦‚ä»…å¯¹ä¸€éƒ¨åˆ†ç”¨æˆ·è®°å½•debugçº§åˆ«çš„æ—¥å¿—ï¼‰ 
4 äºŒè€…éƒ½æ”¯æŒå¯¹é…ç½®æ–‡ä»¶çš„åŠ¨æ€æ›´æ–° 
5 äºŒè€…éƒ½èƒ½å¤Ÿé€‚é…slf4jï¼Œlogbackä¸slf4jçš„é€‚é…åº”è¯¥ä¼šæ›´å¥½ä¸€äº›ï¼Œæ¯•ç«Ÿçœæ‰äº†ä¸€å±‚é€‚é…åº“ 
6 logbackèƒ½å¤Ÿè‡ªåŠ¨å‹ç¼©/åˆ é™¤æ—§æ—¥å¿— 
7 logbackæä¾›äº†å¯¹æ—¥å¿—çš„HTTPè®¿é—®åŠŸèƒ½ 
8 log4j2å®ç°äº†â€œæ— åƒåœ¾â€å’Œâ€œä½åƒåœ¾â€æ¨¡å¼ã€‚ç®€å•åœ°è¯´ï¼Œlog4j2åœ¨è®°å½•æ—¥å¿—æ—¶ï¼Œèƒ½å¤Ÿé‡ç”¨å¯¹è±¡ï¼ˆå¦‚Stringç­‰ï¼‰ï¼Œå°½å¯èƒ½é¿å…å®ä¾‹åŒ–æ–°çš„ä¸´æ—¶å¯¹è±¡ï¼Œå‡å°‘å› æ—¥å¿—è®°å½•äº§ç”Ÿçš„åƒåœ¾å¯¹è±¡ï¼Œå‡å°‘åƒåœ¾å›æ”¶å¸¦æ¥çš„æ€§èƒ½ä¸‹é™ 
9 log4j2å’Œlogbackå„æœ‰é•¿å¤„ï¼Œæ€»ä½“æ¥è¯´ï¼Œå¦‚æœå¯¹æ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜çš„è¯ï¼Œlog4j2ç›¸å¯¹è¿˜æ˜¯è¾ƒä¼˜çš„é€‰æ‹©ã€‚

æ—¥å¿—é—¨é¢ï¼š
  JCLï¼š common-logging æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œä¹Ÿå«åš Jakarta Common Loggingï¼Œç¼©å†™ JCL
        common-logging çš„åŠŸèƒ½æ˜¯æä¾›æ—¥å¿—åŠŸèƒ½çš„ API æ¥å£ï¼Œæœ¬èº«å¹¶ä¸æä¾›æ—¥å¿—çš„å…·ä½“å®ç°ï¼ˆå½“ç„¶ï¼Œcommon-logging å†…éƒ¨æœ‰ä¸€ä¸ª Simple logger çš„ç®€å•å®ç°ï¼Œä½†æ˜¯åŠŸèƒ½å¾ˆå¼±ï¼Œç›´æ¥å¿½ç•¥ï¼‰ï¼Œ
        è€Œæ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„ç»‘å®šæ—¥å¿—å®ç°ç»„ä»¶æ¥å·¥ä½œï¼ˆå¦‚ log4jã€java.util.logginï¼‰ã€‚
  
  Slf4jï¼š Simple Logging Facade For Javaï¼š ç®€å•javaæ—¥å¿—é—¨é¢ï¼Œåˆ›å§‹äººï¼š Ceki Gulcu
          ç±»ä¼¼äº Common-Loggingï¼Œslf4j æ˜¯å¯¹ä¸åŒæ—¥å¿—æ¡†æ¶æä¾›çš„ä¸€ä¸ª API å°è£…ï¼Œå¯ä»¥åœ¨éƒ¨ç½²çš„æ—¶å€™ä¸ä¿®æ”¹ä»»ä½•é…ç½®å³å¯æ¥å…¥ä¸€ç§æ—¥å¿—å®ç°æ–¹æ¡ˆã€‚
          ä½†æ˜¯ï¼Œslf4j åœ¨ç¼–è¯‘æ—¶é™æ€ç»‘å®šçœŸæ­£çš„ Log åº“ã€‚ä½¿ç”¨ SLF4J æ—¶ï¼Œå¦‚æœä½ éœ€è¦ä½¿ç”¨æŸä¸€ç§æ—¥å¿—å®ç°ï¼Œé‚£ä¹ˆä½ å¿…é¡»é€‰æ‹©æ­£ç¡®çš„ SLF4J çš„ jar åŒ…çš„é›†åˆï¼ˆå„ç§æ¡¥æ¥åŒ…ï¼‰ã€‚
          
            
  ********å¯¹æ¯”*********
  slf4j åº“ç±»ä¼¼äº Apache Common-Loggingã€‚ä½†æ˜¯ï¼Œä»–åœ¨ç¼–è¯‘æ—¶é™æ€ç»‘å®šçœŸæ­£çš„æ—¥å¿—åº“ã€‚è¿™ç‚¹ä¼¼ä¹å¾ˆéº»çƒ¦ï¼Œå…¶å®ä¹Ÿä¸è¿‡æ˜¯å¯¼å…¥æ¡¥æ¥ jar åŒ…è€Œå·²ã€‚
  ä¸éœ€è¦ä½¿ç”¨logger.isDebugEnabled()æ¥è§£å†³æ—¥å¿—å› ä¸ºå­—ç¬¦æ‹¼æ¥äº§ç”Ÿçš„æ€§èƒ½é—®é¢˜ã€‚slf4j çš„æ–¹å¼æ˜¯ä½¿ç”¨{}ä½œä¸ºå­—ç¬¦ä¸²æ›¿æ¢ç¬¦ï¼Œå½¢å¼å¦‚ï¼š logger.debug(&quot;id: {}, name: {} &quot;, id, name);
  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><ul><li>æ­é…ä½¿ç”¨</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>
slf4j + logback 

common-logging + log4j

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="springboot-mdc-å…¨é“¾è·¯è°ƒç”¨æ—¥å¿—è¿½è¸ª"><a href="#springboot-mdc-å…¨é“¾è·¯è°ƒç”¨æ—¥å¿—è¿½è¸ª" class="header-anchor">#</a> springboot + MDC å…¨é“¾è·¯è°ƒç”¨æ—¥å¿—è¿½è¸ª</h2> <ul><li>MDC: Mapped Diagnostic Context æ˜ å°„è°ƒè¯•ä¸Šä¸‹æ–‡ï¼Œæ˜¯ Log4jï¼Œ Logback ã€ Log4j2 æä¾›çš„ä¸€ç§æ–¹ä¾¿ä¸‹å¤šçº¿ç¨‹ä¸‹è®°å½•æ—¥å¿—çš„åŠŸèƒ½ã€‚
MDCå¯ä»¥çœ‹ä½œä¸€ä¸ªä¸å½“å‰çº¿ç¨‹ç»‘å®šçš„å“ˆå¸Œè¡¨ã€‚å¯ä»¥å¾€é‡Œé¢æ·»åŠ é”®å€¼å¯¹ã€‚</li> <li>MDCçš„ç›¸å…³API ï¼š</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>clear() ï¼šç§»é™¤æ‰€æœ‰MDC
get (String key) ï¼šè·å–å½“å‰çº¿ç¨‹MDCä¸­æŒ‡å®škeyçš„å€¼
getContext() ï¼šè·å–å½“å‰çº¿ç¨‹MDCçš„MDC
put(String key, Object o) ï¼šå¾€å½“å‰çº¿ç¨‹çš„MDCä¸­å­˜å…¥æŒ‡å®šçš„é”®å€¼å¯¹
remove(String key) ï¼šåˆ é™¤å½“å‰çº¿ç¨‹MDCä¸­æŒ‡å®šçš„é”®å€¼å¯¹
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>è§£å†³æ–¹æ¡ˆ</li> <li><ol><li>è°ƒæ•´Hystrixéš”ç¦»ç­–ç•¥</li></ol></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>Hystrixçš„èµ„æºéš”ç¦»ç­–ç•¥åˆ†ä¸ºä¸¤ç§ï¼š çº¿ç¨‹æ± ï¼ˆThreadï¼‰ å’Œ ä¿¡å·é‡ï¼ˆSemaphoreï¼‰
    hystrix.command.default.execution.isolation.strategy: SEMAPHORE
    Hystrixé»˜è®¤çš„éš”ç¦»é…ç½®æ˜¯Threadï¼Œä½†æ˜¯æ— æ³•è·å–åˆ°MDCï¼ˆä¸æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼‰ã€ä¹Ÿæ— æ³•è·å–åˆ°ç›¸åŒè¯·æ±‚çš„HttpServletRequestå¯¹è±¡ï¼ˆä¸æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼‰
    è®¾ç½®éš”ç¦»ç­–ç•¥ä¸ºä¿¡å·é‡åFeignæ‹¦æˆªå™¨ä¸­å°±èƒ½è·å–MDCå€¼ï¼Œä½†è¯¥æ–¹æ¡ˆä¸æ˜¯ç‰¹åˆ«å¥½ã€‚åŸå› æ˜¯Hystrixå®˜æ–¹å¼ºçƒˆå»ºè®®ä½¿ç”¨THREADä½œä¸ºéš”ç¦»ç­–ç•¥ã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><ol start="2"><li>è‡ªå®šä¹‰ç­–ç•¥æ‰©å±• HystrixConcurrencyStrategy å¹¶ä¸”é€šè¿‡ HystrixPlugins æ³¨å†Œ</li></ol></li></ul> <ul><li>å…·ä½“é…ç½®ï¼š</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>ç›¸å…³ä¾èµ–ï¼š webä¾èµ–ã€hystrix-coreä¾èµ–
&lt;dependency&gt;
 &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
 &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;!-- åŒ…å«äº†hystrix-coreä¾èµ– --&gt;
&lt;dependency&gt;
 &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
 &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;
 &lt;version&gt;2.1.3.RELEASE&lt;/version&gt;
&lt;/dependency&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>ä¸€ï¼š  RequestContextHystrixStrategy ç»§æ‰¿ HystrixPluginsï¼Œç›®çš„æŠŠå½“å‰Requestå¯¹è±¡ä¼ é€’ç»™Feignä¸Šä¸‹æ–‡</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.qingwang.mars.springcloud.hystrix;

import com.netflix.hystrix.strategy.concurrency.HystrixConcurrencyStrategy;
import org.springframework.web.context.request.RequestAttributes;
import org.springframework.web.context.request.RequestContextHolder;

import java.util.concurrent.Callable;

/**
 * ç‰ˆæƒæ‰€æœ‰  copyrightÂ© è’™å¤§æ‹¿
 *
 * @author mqz
 * @date 2022/3/28
 * @about https://www.gitee.com/DemoMeng
 * @description
 */
public class RequestContextHystrixStrategy extends HystrixConcurrencyStrategy {

    @Override
    public &lt;T&gt; Callable&lt;T&gt; wrapCallable(Callable&lt;T&gt; callable) {
        return new RequestAttributeAwareCallable&lt;&gt;(callable, RequestContextHolder.getRequestAttributes());
    }

    static class RequestAttributeAwareCallable&lt;T&gt; implements Callable&lt;T&gt; {

        private final Callable&lt;T&gt; delegate;
        private final RequestAttributes requestAttributes;

        public RequestAttributeAwareCallable(Callable&lt;T&gt; callable, RequestAttributes requestAttributes) {
            this.delegate = callable;
            this.requestAttributes = requestAttributes;
        }

        @Override
        public T call() throws Exception {
            try {
                RequestContextHolder.setRequestAttributes(requestAttributes);
                return delegate.call();
            } finally {
                RequestContextHolder.resetRequestAttributes();
            }
        }
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><ul><li>äºŒï¼š  é‡å†™Feignçš„æ‹¦æˆªå™¨ï¼ˆRequestInterceptorï¼‰ï¼Œåªè¦feignè°ƒç”¨å°±ä¼šèµ°æ‹¦æˆªå™¨ï¼Œå¹¶æŠŠä¸Šé¢çš„è®¾ç½®è¿›æ¥çš„Requestï¼Œè·å–logIdï¼Œä¼ é€’ç»™feignè¢«è°ƒç”¨ç³»ç»Ÿ</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.qingwang.mars.springcloud.openfeign;

import com.qingwang.mars.base.constants.LocalConstant;
import feign.RequestInterceptor;
import feign.RequestTemplate;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.context.annotation.Configuration;
import org.springframework.util.StringUtils;
import org.springframework.web.context.request.RequestContextHolder;
import org.springframework.web.context.request.ServletRequestAttributes;

import javax.servlet.http.HttpServletRequest;

/**
 * ç‰ˆæƒæ‰€æœ‰  copyrightÂ© è’™å¤§æ‹¿
 *
 * @author mqz
 * @date 2022/3/28
 * @about https://www.gitee.com/DemoMeng
 * @description
 */
@Configuration
public class GlobalFeignInterceptor implements RequestInterceptor {

    private final static Logger log = LoggerFactory.getLogger(GlobalFeignInterceptor.class);

    @Override
    public void apply(RequestTemplate template) {
        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();
        if(attributes != null){
            HttpServletRequest request = attributes.getRequest();
            String requestId = request.getParameter(LocalConstant.LOG_ID);
            log.info(&quot;requestInterceptor: requestId: {} &quot;,requestId);
            if(! StringUtils.isEmpty(requestId)){
                template.query(&quot;logId&quot;,requestId);
            }
        }
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><ul><li>ä¸‰ï¼š å°†è‡ªå®šä¹‰çš„Hystrixç­–ç•¥æ³¨å†Œåˆ°å½“å‰ç­–ç•¥ä¸­</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>@PostConstruct
public void init() {
    HystrixPlugins.getInstance().registerConcurrencyStrategy(new RequestContextHystrixStrategy());
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>ä¸‰.1 : application.ymlé…ç½®è‡ªå®šä¹‰çš„Hystrixç­–ç•¥æ‰€åœ¨çš„åŒ…ä½ç½® ï¼ˆä¼¼ä¹å¯ä»¥ä¸ç”¨é…ç½®ï¼ï¼ï¼‰</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>hystrix:
 plugin:
   HystrixConcurrencyStrategy:
     implementation: com.qingwang.mars.springcloud.hystrix.RequestContextHystrixStrategy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>ä¸‰.2 : logbackè·å–logIdï¼š</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;property name=&quot;log.pattern&quot; value=&quot;[%X{requestId}]-%d{yyyy-MM-dd HH:mm:ss} %-5level %thread %logger %msg%n&quot;/&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>å››ï¼š feignè°ƒç”¨æ–¹
<a data-fancybox="" title="111" href="springboot+mdcé“¾è·¯è°ƒç”¨-feignè°ƒç”¨æ–¹æ‹¦æˆªå™¨é…ç½®.png"><img src="springboot+mdc%E9%93%BE%E8%B7%AF%E8%B0%83%E7%94%A8-feign%E8%B0%83%E7%94%A8%E6%96%B9%E6%8B%A6%E6%88%AA%E5%99%A8%E9%85%8D%E7%BD%AE.png" alt="springboot+mdcé“¾è·¯è°ƒç”¨-feignè°ƒç”¨æ–¹æ‹¦æˆªå™¨é…ç½®.png"></a></p></li> <li><p>äº”ï¼š feignè¢«è°ƒç”¨æ–¹</p></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>å’Œè°ƒç”¨æ–¹ä¸€è‡´ï¼Œä»requestä¸­è·å–logIdï¼Œå¹¶ä¸”è®¾ç½®åˆ°ThreadLocalã€MDCä¸­
  String requestId = request.getParameter(LocalConstant.LOG_ID);
  LocalContext.addArgument(LocalConstant.LOG_ID,requestId);
  MDC.put(&quot;requestId&quot;, requestId);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><a data-fancybox="" title="111" href="springboot+mdcé“¾è·¯è°ƒç”¨-æ•ˆæœ.png"><img src="springboot+mdc%E9%93%BE%E8%B7%AF%E8%B0%83%E7%94%A8-%E6%95%88%E6%9E%9C.png" alt="springboot+mdcé“¾è·¯è°ƒç”¨-æ•ˆæœ.png"></a></p> <p>##ã€springä¸­çš„IOCå’ŒDIçš„æ³¨å…¥æ–¹å¼ã€‘
##IOC Inverse Of Control æ§åˆ¶åè½¬ã€‚
å®ƒçš„ä½œç”¨æ˜¯è§£é™¤ä»£ç ä¹‹é—´çš„è€¦åˆæ€§ï¼Œè®©ç¨‹åºä¸“æ³¨æ ¸å¿ƒçš„åŠŸèƒ½ä¸šåŠ¡ï¼Œå…¶ä½™æ‚äº‹å…¨éƒ¨ç»Ÿä¸€å¤„ç†ã€‚
é‚£ä¹ˆä½œä¸ºspringçš„å®¹å™¨ç®¡ç†äº†å„ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥è®¾è®¡åˆ°å®ä¾‹çš„ç®¡ç†ï¼Œå’Œä¾èµ–å…³ç³»ã€‚
##DI Dependency Injection ä¾èµ–æ³¨å…¥
è¯´çš„æ˜¯å®ä¾‹å’Œå®ä¾‹ä¹‹é—´ä¾èµ–å…³ç³»çš„å­˜åœ¨æ–¹å¼ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ç¤ºä¾‹çš„æ–¹æ³•ã€‚</p> <div class="language- extra-class"><pre><code>æ³¨å…¥æ–¹å¼çš„åˆ†ç±»

1.XMLæ³¨å…¥ï¼š
    a.æ„é€ æ–¹æ³•æ³¨å…¥ï¼šæ„é€ æ–¹æ³•ä¸­å¸¦å‚æ•°å¹¶ä¸”èµ‹å€¼åˆ°é™æ€å˜é‡ï¼Œé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨æ ‡ç­¾&lt;construct-arg&gt;&lt;/construct-arg&gt;

          @Service
          public class InstanceB{
                  private InstanceA a;
                  public Demo(InstanceA ia){
                      this.a = ia;
                  }
          }

          xmlé…ç½®æ–‡ä»¶ï¼š
           &lt;bean name=&quot;xxx&quot; class=&quot;xxx.xxx.InstanceB&quot;&gt;
                &lt;construct-arg name=&quot;a&quot; class=&quot;xxx.xxx.InstanceA&quot;&gt;&lt;/construct-arg&gt;
           &lt;/bean&gt;

    b.setteræ–¹æ³•æ³¨å…¥ï¼šæ„é€ æ–¹æ³•ä¸­å®šä¹‰å…¨å±€å˜é‡ï¼Œå¹¶ä¸”ä½¿ç”¨setteræ–¹æ³•ï¼Œé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨&lt;property&gt;&lt;/property&gt;


2.æ³¨è§£æ³¨å…¥ï¼š

    a.å±æ€§æ³¨å…¥ï¼š
        @Autowired
        private InstanceB b;
    b.setteræ–¹æ³•æ³¨å…¥ï¼š
        private InstanceB b;

        @Autowired
        private void setB(InstanceB ib){
             this.b = ib;
        }
    c.æ„é€ æ–¹æ³•æ³¨å…¥ï¼š
        private InstanceB b;

        @Autowired
        public Demo(InstanceB ib){
            this.b = ib;
        }

3. resource æ³¨å…¥

        @Resource
        private InstanceB b;

@Resource  å’Œ  @Autowired çš„åŒºåˆ«
    @Autowiredæ˜¯ä½¿ç”¨byTypeæ–¹å¼æ³¨å…¥å¯¹è±¡ï¼Œè‹¥å¯¹è±¡æœ‰å¤šä¸ªåˆ™éœ€è¦ä½¿ç”¨ @Quailfer(&quot;beanName)
            @Autowired
            @Quailfer(&quot;instanceB&quot;)
            private InstanceB b;

      æˆ–è€…åœ¨å¯¹è±¡ä¸ŠåŠ ä¸Š @Primary

    @Resource æ˜¯æ ¹æ®beançš„åç§°å’Œç±»å‹æ³¨å…¥å¯¹è¥¿é‚£ä¸ª
</code></pre></div><h2 id="äº‹åŠ¡ä¸ç”Ÿæ•ˆçš„åœºæ™¯"><a href="#äº‹åŠ¡ä¸ç”Ÿæ•ˆçš„åœºæ™¯" class="header-anchor">#</a> äº‹åŠ¡ä¸ç”Ÿæ•ˆçš„åœºæ™¯</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>    
    
    
    äº‹åŠ¡ç‰¹æ€§ï¼š
        åŸå­æ€§ï¼šatomicity:åŒæ—¶æˆåŠŸï¼ŒåŒæ—¶å¤±è´¥ã€‚
        ä¸€è‡´æ€§ï¼šconsistency:äº‹åŠ¡æ‰§è¡Œä¹‹å‰ï¼Œæ•°æ®åº“éœ€è¦ä¿æŒä¸€è‡´æ€§ï¼Œå³ä½¿æ‰§è¡Œäº†å¤±è´¥ï¼Œä¹Ÿä¸èƒ½æ›´æ–°ä¸€å¼ è¡¨ï¼Œå¦å¤–ä¸€å¼ è¡¨å´æ²¡æœ‰æ›´æ–°ã€‚ï¼ˆå‰åéƒ½æ˜¯ä¸€è‡´çš„ï¼‰
        éš”ç¦»æ€§ï¼šisolationï¼šæ¯ä¸ªäº‹åŠ¡ä¹‹é—´ç›¸äº’ä¸å½±å“ã€‚
        æŒä¹…æ€§ï¼šdurabilityäº‹åŠ¡æ‰§è¡ŒæˆåŠŸä¹‹åï¼Œæ•°æ®ä¼šåŠæ—¶æ›´è¡Œåˆ°æ•°æ®åº“


    äº‹åŠ¡åˆ†ç±»ï¼š
        1.ç¼–ç¨‹å¼äº‹åŠ¡ï¼šä½¿ç”¨å·¥å‚è·å–åˆ°äº‹åŠ¡æ‰§è¡Œå®ä¾‹ï¼Œåˆ†åˆ«è°ƒç”¨ beginTransaction() ã€commit() ã€rollBack() ç­‰äº‹åŠ¡ç®¡ç†æ–¹æ³•ï¼Œæ³¨æ„è¿™äº›æ˜¯å†™åœ¨ä»£ç ä¸­çš„
                    ä¼˜ç‚¹ï¼š 1. å¯ä»¥ç²¾ç»†è¯æ§åˆ¶äº‹åŠ¡çš„èŒƒå›´
        2.å£°æ˜å¼äº‹åŠ¡ï¼šä½¿ç”¨springçš„å®¹å™¨ç®¡ç†äº‹åŠ¡ã€‚å¯ä»¥ä½¿ç”¨
                                       a.æ³¨è§£@Transactional
                                       b.txé…ç½®xmlé…ç½®çš„æ–¹å¼-å¯¹äºSSMé¡¹ç›®æ¯”è¾ƒå¸¸è§
                    ç¼ºç‚¹ï¼š 
                        1. æ˜¯å¯¹æ•´ä¸ªæ–¹æ³•è¿›è¡Œäº‹åŠ¡æ§åˆ¶ï¼Œæ— æ³•ç²¾ç»†åŒ–æ§åˆ¶                   
                    
                                       

    @Transactionalæ³¨è§£ï¼š
        1.ä½œç”¨èŒƒå›´ï¼šç±»ï¼Œç±»æ–¹æ³•ï¼Œæ¥å£
        2.ä½œç”¨èŒƒå›´ä½œç”¨æ„ä¹‰ï¼š
            ç±»ï¼šå½“æ³¨è§£åœ¨ç±»ä¸Šæ—¶ï¼Œæ ‡æ˜è¯¥ç±»ä¸‹çš„æ‰€æœ‰publicæ–¹æ³•éƒ½é…ç½®ç›¸åŒçš„äº‹åŠ¡å±æ€§ä¿¡æ¯ã€‚
            ç±»æ–¹æ³•ï¼špublicæ–¹æ³•ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼Œå¦‚æœç±»ä¸Šæœ‰æ³¨è§£ï¼Œæ–¹æ³•ä¸Šä¹Ÿæœ‰æ³¨è§£ï¼Œé‚£ä¹ˆæ–¹æ³•çš„äº‹åŠ¡é…ç½®ä¼šè¦†ç›–ç±»çš„äº‹åŠ¡çš„é…ç½®ä¿¡æ¯ã€‚
            æ¥å£ï¼šä¸æ¨èä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå› ä¸ºä¸€æ—¦åœ¨æ¥å£ä¸Šé…ç½®äº†springAOPä½¿ç”¨CGLibåŠ¨æ€ä»£ç†
            
        
        @Transactionalæ˜¯ä½¿ç”¨ AOP å®ç°çš„ï¼Œæœ¬è´¨å°±æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åè¿›è¡Œæ‹¦æˆªã€‚åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åŠ å…¥æˆ–åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œæ–¹æ³•æ‰§è¡Œåï¼Œæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©æäº¤æˆ–æ˜¯å›æ»šäº‹åŠ¡ã€‚
         å½“ Spring é‡åˆ°è¯¥æ³¨è§£æ—¶ï¼Œä¼šè‡ªåŠ¨ä»æ•°æ®åº“è¿æ¥æ± ä¸­è·å– connectionï¼Œå¹¶å¼€å¯äº‹åŠ¡ç„¶åç»‘å®šåˆ° ThreadLocal ä¸Šï¼Œ
         å¯¹äº@Transactionalæ³¨è§£åŒ…è£¹çš„æ•´ä¸ªæ–¹æ³•éƒ½æ˜¯ä½¿ç”¨åŒä¸€ä¸ªconnectionè¿æ¥ã€‚å¦‚æœæˆ‘ä»¬å‡ºç°äº†è€—æ—¶çš„æ“ä½œï¼Œæ¯”å¦‚ç¬¬ä¸‰æ–¹æ¥å£è°ƒç”¨ï¼Œä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œå¤§æ‰¹é‡æ•°æ®å¤„ç†ç­‰å°±ä¼šå¯¼è‡´æˆ‘ä»¬æˆ‘ä»¬å ç”¨è¿™ä¸ªconnectionçš„æ—¶é—´ä¼šå¾ˆé•¿ï¼Œ
         æ•°æ®åº“è¿æ¥ä¸€ç›´è¢«å ç”¨ä¸é‡Šæ”¾ã€‚ä¸€æ—¦ç±»ä¼¼æ“ä½œè¿‡å¤šï¼Œå°±ä¼šå¯¼è‡´æ•°æ®åº“è¿æ¥æ± è€—å°½ã€‚åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰§è¡ŒRPCæ“ä½œå¯¼è‡´æ•°æ®åº“è¿æ¥æ± æ’‘çˆ†å±äºæ˜¯å…¸å‹çš„é•¿äº‹åŠ¡é—®é¢˜ï¼Œç±»ä¼¼çš„æ“ä½œè¿˜æœ‰åœ¨äº‹åŠ¡ä¸­è¿›è¡Œå¤§é‡æ•°æ®æŸ¥è¯¢ï¼Œä¸šåŠ¡è§„åˆ™å¤„ç†ç­‰...
        @Transactionalæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ˜¯é€šè¿‡spring aopèµ·ä½œç”¨çš„ï¼Œè€Œspring aopéœ€è¦ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œç›´æ¥åœ¨åŒä¸€ä¸ªç±»ä¸­æ–¹æ³•è°ƒç”¨ä½¿ç”¨çš„è¿˜æ˜¯åŸå§‹å¯¹è±¡ï¼Œäº‹åŠ¡ä¸ç”Ÿæ•ˆã€‚ 
        
        é•¿äº‹åŠ¡ï¼š   è¿è¡Œæ—¶é—´è¾ƒé•¿ï¼Œå¹¶ä¸”é•¿æ—¶é—´æœªæäº¤çš„äº‹åŠ¡ï¼Œä¹Ÿç§°ä¹‹ä¸ºå¤§äº‹åŠ¡ã€‚
        é•¿äº‹åŠ¡ä¼šå¼•å‘å“ªäº›é—®é¢˜ï¼š
            1 æ•°æ®åº“è¿æ¥æ± è¢«å æ»¡ï¼Œé•¿æ—¶é—´æ²¡æœ‰closeé‡Šæ”¾èµ„æºï¼Œåº”ç”¨æ— æ³•è·å–è¿æ¥èµ„æºã€‚
            2 å®¹æ˜“å¼•å‘æ•°æ®åº“æ­»é”ã€‚
            3 æ•°æ®åº“å›æ»šæ—¶é—´è¾ƒé•¿
            4 åœ¨ä¸»ä»æ¶æ„é‡å¯¼è‡´ä¸»ä»å»¶è¿Ÿå˜å¤§
        å¦‚ä½•é¿å…é•¿äº‹åŠ¡ï¼š 
            1 æ‹†åˆ†äº‹åŠ¡çš„æ–¹æ³•ï¼Œä¸éœ€è¦äº‹åŠ¡ç®¡ç†çš„çš„é€»è¾‘æŠ½ç¦»æˆç‹¬ç«‹æ–¹æ³•ï¼Œå˜å°äº‹åŠ¡ï¼Œå‡å°‘äº‹åŠ¡çš„é¢—ç²’åº¦
            

    @Transactional å±æ€§ï¼š
        propagationå±æ€§ï¼ˆå†’æ³¡å±æ€§ï¼‰
            propagation ä»£è¡¨äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼Œé»˜è®¤å€¼ä¸º Propagation.REQUIREDï¼Œå…¶ä»–çš„å±æ€§ä¿¡æ¯å¦‚ä¸‹ï¼š
            Propagation.REQUIREDï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚( ä¹Ÿå°±æ˜¯è¯´å¦‚æœAæ–¹æ³•å’ŒBæ–¹æ³•éƒ½æ·»åŠ äº†æ³¨è§£ï¼Œåœ¨é»˜è®¤ä¼ æ’­æ¨¡å¼ä¸‹ï¼ŒAæ–¹æ³•å†…éƒ¨è°ƒç”¨Bæ–¹æ³•ï¼Œä¼šæŠŠä¸¤ä¸ªæ–¹æ³•çš„äº‹åŠ¡åˆå¹¶ä¸ºä¸€ä¸ªäº‹åŠ¡ ï¼‰
            Propagation.SUPPORTSï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™ä»¥éäº‹åŠ¡çš„æ–¹å¼ç»§ç»­è¿è¡Œã€‚
            Propagation.MANDATORYï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚
            Propagation.REQUIRES_NEWï¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œæš‚åœå½“å‰çš„äº‹åŠ¡ã€‚( å½“ç±»Aä¸­çš„ a æ–¹æ³•ç”¨é»˜è®¤Propagation.REQUIREDæ¨¡å¼ï¼Œç±»Bä¸­çš„ bæ–¹æ³•åŠ ä¸Šé‡‡ç”¨ Propagation.REQUIRES_NEWæ¨¡å¼ï¼Œç„¶ååœ¨ a æ–¹æ³•ä¸­è°ƒç”¨ bæ–¹æ³•æ“ä½œæ•°æ®åº“ï¼Œç„¶è€Œ aæ–¹æ³•æŠ›å‡ºå¼‚å¸¸åï¼Œbæ–¹æ³•å¹¶æ²¡æœ‰è¿›è¡Œå›æ»šï¼Œå› ä¸ºPropagation.REQUIRES_NEWä¼šæš‚åœ aæ–¹æ³•çš„äº‹åŠ¡ )
            Propagation.NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡çš„æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œæš‚åœå½“å‰çš„äº‹åŠ¡ã€‚
            Propagation.NEVERï¼šä»¥éäº‹åŠ¡çš„æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚
            Propagation.NESTED ï¼šå’Œ Propagation.REQUIRED æ•ˆæœä¸€æ ·ã€‚

        isolation å±æ€§ ï¼š å½“springè®¾ç½®å®ƒè‡ªå·±çš„éš”ç¦»çº§åˆ«ï¼Œä¼šè¦†ç›–mysqlè®¾ç½®çš„éš”ç¦»çº§åˆ«
            isolation ï¼šspringäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤å€¼ä¸º Isolation.DEFAULTã€‚
            Isolation.DEFAULTï¼šä½¿ç”¨åº•å±‚æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«ã€‚
            Isolation.READ_UNCOMMITTED ï¼š è¯»æœªæäº¤ ï¼Œå®¹æ˜“äº§ç”Ÿè„è¯»
            Isolation.READ_COMMITTED ï¼šè¯»å·²ç»æäº¤ï¼Œå®¹æ˜“äº§ç”Ÿä¸å¯
            Isolation.REPEATABLE_READ
            Isolation.SERIALIZABLE

        timeout å±æ€§
            timeout ï¼šäº‹åŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼ä¸º -1ã€‚å¦‚æœè¶…è¿‡è¯¥æ—¶é—´é™åˆ¶ä½†äº‹åŠ¡è¿˜æ²¡æœ‰å®Œæˆï¼Œåˆ™è‡ªåŠ¨å›æ»šäº‹åŠ¡ã€‚

        readOnly å±æ€§
            readOnly ï¼šæŒ‡å®šäº‹åŠ¡æ˜¯å¦ä¸ºåªè¯»äº‹åŠ¡ï¼Œé»˜è®¤å€¼ä¸º falseï¼›ä¸ºäº†å¿½ç•¥é‚£äº›ä¸éœ€è¦äº‹åŠ¡çš„æ–¹æ³•ï¼Œæ¯”å¦‚è¯»å–æ•°æ®ï¼Œå¯ä»¥è®¾ç½® read-only ä¸º trueã€‚

        rollbackFor å±æ€§
            rollbackFor ï¼šç”¨äºæŒ‡å®šèƒ½å¤Ÿè§¦å‘äº‹åŠ¡å›æ»šçš„å¼‚å¸¸ç±»å‹ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªå¼‚å¸¸ç±»å‹ã€‚

        noRollbackFor å±æ€§
            noRollbackForï¼šæŠ›å‡ºæŒ‡å®šçš„å¼‚å¸¸ç±»å‹ï¼Œä¸å›æ»šäº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¤šä¸ªå¼‚å¸¸ç±»å‹ã€‚

    ä¸ç”Ÿæ•ˆçš„åœºæ™¯ï¼š
        1.æ•°æ®åº“å¼•æ“ï¼šmyISAMå¼•æ“æ˜¯ä¸æ”¯æŒäº‹åŠ¡æœºåˆ¶ã€‚innoDBæ”¯æŒäº‹åŠ¡æœºåˆ¶
        2.ä¿®é¥°çš„æ–¹æ³•å¿…é¡»æ˜¯publicçš„ï¼ˆspring+aopï¼‰ï¼Œå¦‚æœéè¦åœ¨publicçš„æ–¹æ³•ä¸ŠåŠ ä¸Šäº‹åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨AspectJä»£ç†:
            åŸå› ï¼šåœ¨Spring AOP ä»£ç†æ—¶ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤º TransactionInterceptor ï¼ˆäº‹åŠ¡æ‹¦æˆªå™¨ï¼‰åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åè¿›è¡Œæ‹¦æˆªï¼Œ
                 DynamicAdvisedInterceptorï¼ˆCglibAopProxy çš„å†…éƒ¨ç±»ï¼‰çš„ intercept æ–¹æ³•æˆ– JdkDynamicAopProxy çš„ invoke æ–¹æ³•ä¼šé—´æ¥è°ƒç”¨
                 AbstractFallbackTransactionAttributeSourceçš„computeTransactionAttribute æ–¹æ³•ï¼Œè·å–Transactional æ³¨è§£çš„äº‹åŠ¡é…ç½®ä¿¡æ¯ã€‚
            æ³¨æ„ï¼šprotectedã€private ä¿®é¥°çš„æ–¹æ³•ä¸Šä½¿ç”¨ @Transactional æ³¨è§£ï¼Œè™½ç„¶äº‹åŠ¡æ— æ•ˆï¼Œä½†ä¸ä¼šæœ‰ä»»ä½•æŠ¥é”™ï¼Œè¿™æ˜¯æˆ‘ä»¬å¾ˆå®¹çŠ¯é”™çš„ä¸€ç‚¹ã€‚

        3.@Transactionalä¸­çš„propagationå±æ€§è®¾ç½®é”™
            TransactionDefinition.PROPAGATION_SUPPORTSï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä»¥éäº‹åŠ¡çš„æ–¹å¼ç»§ç»­è¿è¡Œã€‚
            TransactionDefinition.PROPAGATION_NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚
            TransactionDefinition.PROPAGATION_NEVERï¼šä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚

        3.å¼‚å¸¸è¢«æ•è·äº†ï¼Œæ²¡æœ‰å¼‚å¸¸æŠ›å‡ºã€‚
        4.å¼‚å¸¸ç±»å‹é”™è¯¯ï¼šäº‹åŠ¡å›æ»šçš„æ­£å¸¸ç±»å‹æ˜¯RuntimeException:
            Springé»˜è®¤æŠ›å‡ºäº†æœªæ£€æŸ¥uncheckedå¼‚å¸¸ï¼ˆç»§æ‰¿è‡ª RuntimeException çš„å¼‚å¸¸ï¼‰æˆ–è€… Erroræ‰å›æ»šäº‹åŠ¡
            å…¶ä»–å¼‚å¸¸ä¸ä¼šè§¦å‘å›æ»šäº‹åŠ¡ã€‚å¦‚æœåœ¨äº‹åŠ¡ä¸­æŠ›å‡ºå…¶ä»–ç±»å‹çš„å¼‚å¸¸ï¼Œä½†å´æœŸæœ› Spring èƒ½å¤Ÿå›æ»šäº‹åŠ¡ï¼Œå°±éœ€è¦æŒ‡å®šrollbackForå±æ€§ã€‚

                @Service
                public class OrderServiceImpl implements OrderService {
                    @Transactional
                    public void updateOrder(Order order) {
                        try {
                            // update order
                        } catch {
                            throw new Exception(&quot;æ›´æ–°é”™è¯¯&quot;);
                        }
                    }
                }
                //å¦‚æœæƒ³è¦äº‹åŠ¡ç”Ÿæ•ˆ ï¼Œ@Transactional(rollbackFor = Exception.class)

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br></div></div><h2 id="å¼‚æ­¥ä»»åŠ¡è°ƒåº¦"><a href="#å¼‚æ­¥ä»»åŠ¡è°ƒåº¦" class="header-anchor">#</a> å¼‚æ­¥ä»»åŠ¡è°ƒåº¦</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>
ã€Applicationçš„é…ç½®ã€‘
    ******å…¶ä»–çš„é…ç½®*******
    @EnableAsync
    @EnableScheduling
    public class HlwManageApplication {
        public static void main(String[] args) {
            SpringApplication.run(HlwManageApplication.class, args);
        }
        @Bean(name = &quot;threadPoolTaskExecutor&quot;)
        public Executor threadPoolTaskExecutor() {
            return new ThreadPoolTaskExecutor();
        }
    }

ã€å¼‚æ­¥è°ƒåº¦ç›¸å…³é…ç½®ã€‘

    @Configuration
    @EnableAsync
    @EnableScheduling
    public class SchedulingConfiguration implements SchedulingConfigurer, AsyncConfigurer {
        private Logger logger = LoggerFactory.getLogger(SchedulingConfiguration.class);
        @Bean
        public TaskScheduler taskScheduler() {
            ThreadPoolTaskScheduler taskScheduler = new ThreadPoolTaskScheduler();
            taskScheduler.setPoolSize(10);/**é…ç½®çº¿ç¨‹æ± å¤§å°ï¼Œæ ¹æ®ä»»åŠ¡æ•°é‡å®šåˆ¶*/
            taskScheduler.setThreadNamePrefix(&quot;spring-task-scheduler-thread-&quot;);/**çº¿ç¨‹åç§°å‰ç¼€*/
            taskScheduler.setAwaitTerminationSeconds(60);/**çº¿ç¨‹æ± å…³é—­å‰æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œç¡®ä¿æœ€åä¸€å®šå…³é—­*/
            taskScheduler.setWaitForTasksToCompleteOnShutdown(true);/**çº¿ç¨‹æ± å…³é—­æ—¶ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ*/
            taskScheduler.setRejectedExecutionHandler(new ThreadPoolExecutor.AbortPolicy());/**ä»»åŠ¡ä¸¢å¼ƒç­–ç•¥*/
            return taskScheduler;
        }
        @Override
        public void configureTasks(ScheduledTaskRegistrar scheduledTaskRegistrar) {
        }
        @Override
        public Executor getAsyncExecutor() {
            ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
            executor.setCorePoolSize(20);/**é…ç½®æ ¸å¿ƒçº¿ç¨‹æ•°*/
            executor.setMaxPoolSize(50);/**é…ç½®æœ€å¤§çº¿ç¨‹æ•°*/
            executor.setQueueCapacity(100);/**é…ç½®ç¼“å­˜é˜Ÿåˆ—å¤§å°*/
            executor.setKeepAliveSeconds(15);/**ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´*/
            executor.setThreadNamePrefix(&quot;spring-task-executor-thread-&quot;);
            /**çº¿ç¨‹æ± å¯¹æ‹’ç»ä»»åŠ¡çš„å¤„ç†ç­–ç•¥ï¼šè¿™é‡Œé‡‡ç”¨äº†CallerRunsPolicyç­–ç•¥ï¼Œå½“çº¿ç¨‹æ± æ²¡æœ‰å¤„ç†èƒ½åŠ›çš„æ—¶å€™ï¼Œè¯¥ç­–ç•¥ä¼šç›´æ¥åœ¨executeæ–¹æ³•çš„è°ƒç”¨çº¿ç¨‹ä¸­è¿è¡Œè¢«æ‹’ç»çš„ä»»åŠ¡ï¼›å¦‚æœæ‰§è¡Œç¨‹åºå·²å…³é—­ï¼Œåˆ™ä¼šä¸¢å¼ƒè¯¥ä»»åŠ¡*/
            executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());/**AbortPolicy()*/
            /**ç­‰å¾…æ‰€æœ‰ä»»åŠ¡ç»“æŸåå†å…³é—­çº¿ç¨‹æ± */
            executor.setWaitForTasksToCompleteOnShutdown(true);
            /**è®¾ç½®çº¿ç¨‹æ± ä¸­ä»»åŠ¡çš„ç­‰å¾…æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰é”€æ¯å°±å¼ºåˆ¶é”€æ¯ï¼Œä»¥ç¡®ä¿åº”ç”¨æœ€åèƒ½å¤Ÿè¢«å…³é—­ï¼Œè€Œä¸æ˜¯è¢«æ²¡æœ‰å®Œæˆçš„ä»»åŠ¡é˜»å¡*/
            executor.setAwaitTerminationSeconds(60);
            executor.initialize();
            return executor;
        }
        @Override
        public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {
            return new SpringAsyncExceptionHandler();
        }
        class SpringAsyncExceptionHandler implements AsyncUncaughtExceptionHandler {
            @Override
            public void handleUncaughtException(Throwable throwable, Method method, Object... objects) {
                logger.error(&quot;Exception occurs in async method&quot;, throwable);
            }
        }
    }

 ã€ä½¿ç”¨å¼‚æ­¥è°ƒåº¦æ‰§è¡Œå…·ä½“ä»»åŠ¡-A:å¼‚æ­¥è°ƒç”¨ã€‘
    @Component
    @EnableScheduling
    @Async
    public class AsyncTaskExecute {

        private static final Logger log = LoggerFactory.getLogger(AsyncTaskExecute.class);

        @Autowired
        private IHlwManageRoleService roleService;

        @Autowired
        private IHlwManageUserService userService;

        @Value(&quot;${my.token.expire}&quot;)
        private long tokenExpireTime;



        @Async
        public void pushCurrentRole(Long id){
            HlwManageRole role = roleService.currentRole(id);
            RedisService.set(CommonConstants.Current.CURRENT_ROLE+id,role,tokenExpireTime);
            log.info(&quot;å½“å‰ç”¨æˆ·è§’è‰²å·²ç»å­˜å…¥ç¼“å­˜ä¸­&quot;);
        }

        @Async
        public void updateLogin(Long currentId, Date date,String ip) {
            try {
                Thread.sleep(10000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            HlwManageUser user = new HlwManageUser()
                    .setId(currentId)
                    .setLoginDate(date)
                    .setLoginIp(ip)
                    .setArea(AddressUtils.getAreaWithGD(ip));
            userService.updateById(user);
            log.info(&quot;ç™»å½•ä¿¡æ¯å·²æ›´æ–°&quot;);
        }
    }
    
 ã€ä½¿ç”¨å¼‚æ­¥è°ƒåº¦æ‰§è¡Œå…·ä½“ä»»åŠ¡-B:å®šæ—¶æ‰§è¡Œã€‘
 @Component
 @EnableScheduling
 @EnableAsync
 public class ScheduleTask {

     private static final Logger log = LoggerFactory.getLogger(ScheduleTask.class);

     @Autowired
     private IHlwManageUserService userService;

     @Autowired
     private IHlwManageUserRoleService userRoleService;

     @Autowired
     private IHlwManageLogService logService;

     @Async
     @Scheduled(cron = &quot;0/60 * *  * * ? &quot;) // æ¯60ç§’æ‰§è¡Œ
     public void autoLog2(){
         List&lt;MessageBean&gt; mbList = (List&lt;MessageBean&gt;) RedisService.get(CommonConstants.KEY_FOR_MESSAGE_LIST);
         List&lt;MessageBean&gt; left = new ArrayList&lt;&gt;();
         if(mbList != null &amp;&amp; mbList.size() &gt;0) {
             log.info(&quot;ã€ä¿¡æ¯ã€‘æ‰§è¡Œå®šæ—¶ä»»åŠ¡...&quot;+mbList.size());
             for (MessageBean model : mbList) {
                 HlwManageUser user = userService.getById(model.getUserId());
                 if (user != null) {
                     HlwManageLog hlwManageLog = new HlwManageLog()
                             .setIp(model.getIp())
                             //.setRequestMethod(request.getMethod())
                             .setCreateDate(model.getCreateDate())
                             //.setRequestUri(request.getRequestURL().toString())
                             .setOperator(user.getId())
                             .setOperatorName(user.getName())
                             //.setRequestParams(WebCommonUtils.getRequestParams())
                             .setOperateAccount(user.getLoginName())
                             .setOperatorRole(userRoleService.getByUserId(user.getId()))
                             .setDescription(model.getDescription())
                             .setResult(model.getResult());
                     if(logService.save(hlwManageLog)) {
                         log.info(&quot;*****************æ¶ˆæ¯ä¿å­˜æˆåŠŸï¼š&quot; + hlwManageLog.getId() + &quot; ***************&quot;);
                         continue;
                     }
                     log.info(&quot;*****************æ¶ˆæ¯ä¿å­˜æœªèƒ½æˆåŠŸï¼š&quot; + model.getUserId()+model.getDescription() + &quot; ***************&quot;);
                     left.add(model);
                 }
             }
             RedisService.del(CommonConstants.KEY_FOR_MESSAGE_LIST);
             RedisService.set(CommonConstants.KEY_FOR_MESSAGE_LIST,left);
          }
     }
 }

More than one TaskExecutor bean found within the context, and none is named 'taskExecutor'. Mark one of them as primary or name it 'taskExecutor' (possibly as an alias) in order to use it for async processing: [taskScheduler, applicationTaskExecutor]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br></div></div><h2 id="springbootå¸¸ç”¨æ³¨è§£"><a href="#springbootå¸¸ç”¨æ³¨è§£" class="header-anchor">#</a> SpringBootå¸¸ç”¨æ³¨è§£</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>ä¸€ã€å¸¸è§æ³¨è§£
    @SpringBootConfiguration  &lt;==&gt;  @Configuration + @ComponentScan + @EnableAutoConfiguration
    @EnableAutoConfiguration è‡ªåŠ¨é…ç½®ã€‚
    @ImportResource    åŠ è½½xmlé…ç½®ï¼Œä¸€èˆ¬æ˜¯æ”¾åœ¨å¯åŠ¨mainç±»ä¸Šï¼Œ @ImportResource(&quot;classpath*:/spring/*.xml&quot;)  å•ä¸ª ã€ @ImportResource({&quot;classpath*:/spring/1.xml&quot;,&quot;classpath*:/spring/2.xml&quot;})   å¤šä¸ª
    @Value    è·å–application.yml ä¸­çš„å±æ€§
    @ConfigurationProperties(prefix=&quot;user&quot;) è·å–application.yml å¯¹è±¡å±æ€§
    @EnableConfigurationProperties   ç”¨ @EnableConfigurationPropertiesæ³¨è§£ä½¿ @ConfigurationPropertiesç”Ÿæ•ˆï¼Œå¹¶ä»IOCå®¹å™¨ä¸­è·å–beanã€‚
    @RestController  æ³¨è§£æ˜¯@Controllerå’Œ@ResponseBodyçš„åˆé›†,è¡¨ç¤ºè¿™æ˜¯ä¸ªæ§åˆ¶å™¨bean,å¹¶ä¸”æ˜¯å°†å‡½æ•°çš„è¿”å›å€¼ç›´ æ¥å¡«å…¥HTTPå“åº”ä½“ä¸­,æ˜¯RESTé£æ ¼çš„æ§åˆ¶å™¨ã€‚
    @RequestMapping
    @GetMapping
    @PostMapping
    @RequestParam   URLçš„è¯·æ±‚å‚æ•°
    @ResponseBody  æ”¯æŒå°†è¿”å›å€¼æ”¾åœ¨responseä½“å†…ï¼Œè€Œä¸æ˜¯è¿”å›ä¸€ä¸ªé¡µé¢
    @Bean     @Bean(name=&quot;beançš„åå­—&quot;,initMethod=&quot;åˆå§‹åŒ–æ—¶è°ƒç”¨æ–¹æ³•åå­—&quot;,destroyMethod=&quot;close&quot;)
    @Controller
    @Service
    @Repository
    @Component:   å¯é…åˆCommandLineRunnerä½¿ç”¨ï¼Œåœ¨ç¨‹åºå¯åŠ¨åæ‰§è¡Œä¸€äº›åŸºç¡€ä»»åŠ¡
    @PostContruct   springå®¹å™¨åˆå§‹åŒ–æ—¶ï¼Œè¦æ‰§è¡Œè¯¥æ–¹æ³•
    @PathVariable      ç”¨æ¥è·å¾—è¯·æ±‚urlä¸­çš„åŠ¨æ€å‚æ•°
    @ComponentScan:   è®©spring Bootæ‰«æåˆ°Configurationç±»å¹¶æŠŠå®ƒåŠ å…¥åˆ°ç¨‹åºä¸Šä¸‹æ–‡
    @EnableZuulProxy:  è·¯ç”±ç½‘å…³çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è®©æ‰€æœ‰çš„å¾®æœåŠ¡å¯¹å¤–åªæœ‰ä¸€ä¸ªæ¥å£ï¼Œæˆ‘ä»¬åªéœ€è®¿é—®ä¸€ä¸ªç½‘å…³åœ°å€ï¼Œå³å¯ç”±ç½‘å…³å°†æ‰€æœ‰çš„è¯·æ±‚ä»£ç†åˆ°ä¸åŒçš„æœåŠ¡ä¸­ã€‚Spring Cloudæ˜¯é€šè¿‡Zuulæ¥å®ç°çš„ï¼Œæ”¯æŒè‡ªåŠ¨è·¯ç”±æ˜ å°„åˆ°åœ¨Eureka Serverä¸Šæ³¨å†Œçš„æœåŠ¡ã€‚Spring Cloudæä¾›äº†æ³¨è§£@EnableZuulProxyæ¥å¯ç”¨è·¯ç”±ä»£ç†ã€‚
    @Autowired ï¼š    åœ¨é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨ @Autowired æ³¨é‡Šè¿›è¡Œè‡ªåŠ¨æ³¨å…¥æ—¶ï¼ŒSpring å®¹å™¨ä¸­åŒ¹é…çš„å€™é€‰ Bean æ•°ç›®å¿…é¡»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªã€‚å½“æ‰¾ä¸åˆ°ä¸€ä¸ªåŒ¹é…çš„ Bean æ—¶ï¼ŒSpring å®¹å™¨å°†æŠ›å‡º BeanCreationException å¼‚å¸¸ï¼Œå¹¶æŒ‡å‡ºå¿…é¡»è‡³å°‘æ‹¥æœ‰ä¸€ä¸ªåŒ¹é…çš„ Beanã€‚ 
                     å½“ä¸èƒ½ç¡®å®š Spring å®¹å™¨ä¸­ä¸€å®šæ‹¥æœ‰æŸä¸ªç±»çš„ Bean æ—¶ï¼Œå¯ä»¥åœ¨éœ€è¦è‡ªåŠ¨æ³¨å…¥è¯¥ç±» Bean çš„åœ°æ–¹å¯ä»¥ä½¿ç”¨ @Autowired(required = false)ï¼Œè¿™ç­‰äºå‘Šè¯‰ Spring: åœ¨æ‰¾ä¸åˆ°åŒ¹é… Bean æ—¶ä¹Ÿä¸æŠ¥é”™ 
    @Resource
    @Configuration: å£°æ˜è¿™æ˜¯ä¸€ä¸ªé…åˆ¶
    @Import(Config.class)
    @Order  å€¼è¶Šå°ä¼˜å…ˆçº§è¶…é«˜ï¼Œè¶Šå…ˆè¿è¡Œ
    @ConditionalOnExpression  @ConditionalOnExpression(&quot;${enabled:false}&quot;) å¼€å…³ä¸ºtrueçš„æ—¶å€™æ‰å®ä¾‹åŒ–bean
    @ConditionalOnProperty  
    @ConditionalOnClass 
    @ConditionalOnMissingClass({ApplicationManager.class})   å¦‚æœå­˜åœ¨å®ƒä¿®é¥°çš„ç±»çš„beanï¼Œåˆ™ä¸éœ€è¦å†åˆ›å»ºè¿™ä¸ªbeanï¼›
    @ConditionOnMissingBean(name=&quot;example&quot;)   è¡¨ç¤ºå¦‚æœnameä¸ºâ€œexampleâ€çš„beanå­˜åœ¨ï¼Œè¯¥æ³¨è§£ä¿®é¥°çš„ä»£ç å—ä¸æ‰§è¡Œã€‚
    @Configuration ç­‰åŒäºspringçš„XMLé…ç½®æ–‡ä»¶ï¼›ä½¿ç”¨Javaä»£ç å¯ä»¥æ£€æŸ¥ç±»å‹å®‰å…¨ã€‚
    @JsonBackReference   è§£å†³åµŒå¥—å¤–é“¾é—®é¢˜ã€‚
    @RepositoryRestResourcepublic    é…åˆspring-boot-starter-data-restä½¿ç”¨ã€‚
        
äºŒã€æ³¨è§£(annotations)è¯¦è§£
    @SpringBootApplicationï¼šç”³æ˜è®©spring bootè‡ªåŠ¨ç»™ç¨‹åºè¿›è¡Œå¿…è¦çš„é…ç½®ï¼Œè¿™ä¸ªé…ç½®ç­‰åŒäºï¼š@Configuration ï¼Œ@EnableAutoConfiguration å’Œ @ComponentScan ä¸‰ä¸ªé…ç½®ã€‚

        package com.example.myproject;
        import org.springframework.boot.SpringApplication;
        import org.springframework.boot.autoconfigure.SpringBootApplication;
        @SpringBootApplication // same as @Configuration @EnableAutoConfiguration @ComponentScan
        public class Application {
            public static void main(String[] args) {
                SpringApplication.run(Application.class, args);
            }
        }

    @ResponseBodyï¼šè¡¨ç¤ºè¯¥æ–¹æ³•çš„è¿”å›ç»“æœç›´æ¥å†™å…¥HTTP response bodyä¸­ï¼Œä¸€èˆ¬åœ¨å¼‚æ­¥è·å–æ•°æ®æ—¶ä½¿ç”¨ï¼Œç”¨äºæ„å»ºRESTfulçš„apiã€‚
    åœ¨ä½¿ç”¨@RequestMappingåï¼Œè¿”å›å€¼é€šå¸¸è§£æä¸ºè·³è½¬è·¯å¾„ï¼ŒåŠ ä¸Š@responsebodyåè¿”å›ç»“æœä¸ä¼šè¢«è§£æä¸ºè·³è½¬è·¯å¾„ï¼Œè€Œæ˜¯ç›´æ¥å†™å…¥HTTP response bodyä¸­ã€‚
    æ¯”å¦‚å¼‚æ­¥è·å–jsonæ•°æ®ï¼ŒåŠ ä¸Š@responsebodyåï¼Œä¼šç›´æ¥è¿”å›jsonæ•°æ®ã€‚
    è¯¥æ³¨è§£ä¸€èˆ¬ä¼šé…åˆ@RequestMappingä¸€èµ·ä½¿ç”¨ã€‚ç¤ºä¾‹ä»£ç ï¼š
    
        @RequestMapping(â€œ/testâ€)
        @ResponseBody
        public String test(){
            returnâ€okâ€;
        }

    @Controllerï¼šç”¨äºå®šä¹‰æ§åˆ¶å™¨ç±»ï¼Œåœ¨spring é¡¹ç›®ä¸­ç”±æ§åˆ¶å™¨è´Ÿè´£å°†ç”¨æˆ·å‘æ¥çš„URLè¯·æ±‚è½¬å‘åˆ°å¯¹åº”çš„æœåŠ¡æ¥å£ï¼ˆserviceå±‚ï¼‰
    ä¸€èˆ¬è¿™ä¸ªæ³¨è§£åœ¨ç±»ä¸­ï¼Œé€šå¸¸æ–¹æ³•éœ€è¦é…åˆæ³¨è§£@RequestMappingã€‚
    ç¤ºä¾‹ä»£ç ï¼š
    
        @Controller
        @RequestMapping(â€œ/demoInfoâ€)
        publicclass DemoController {
            @Autowired
            private DemoInfoService demoInfoService;
        
            @RequestMapping(&quot;/hello&quot;)
            public String hello(Map map){
                System.out.println(&quot;DemoController.hello()&quot;);
                map.put(&quot;hello&quot;,&quot;from TemplateController.helloHtml&quot;);
                //ä¼šä½¿ç”¨hello.htmlæˆ–è€…hello.ftlæ¨¡æ¿è¿›è¡Œæ¸²æŸ“æ˜¾ç¤º.
                return&quot;/hello&quot;;
            }
        }

    @RestControllerï¼šç”¨äºæ ‡æ³¨æ§åˆ¶å±‚ç»„ä»¶(å¦‚strutsä¸­çš„action)ï¼Œ@ResponseBodyå’Œ@Controllerçš„åˆé›†ã€‚
    ç¤ºä¾‹ä»£ç ï¼š
        package com.kfit.demo.web;
        
        import org.springframework.web.bind.annotation.RequestMapping;
        import org.springframework.web.bind.annotation.RestController;
        
        @RestController
        @RequestMapping(â€œ/demoInfo2â€)
        public class DemoController2 {
            @RequestMapping(&quot;/test&quot;)
            public String test(){
                return&quot;ok&quot;;
            }
        }
    
    @RequestMappingï¼šæä¾›è·¯ç”±ä¿¡æ¯ï¼Œè´Ÿè´£URLåˆ°Controllerä¸­çš„å…·ä½“å‡½æ•°çš„æ˜ å°„ã€‚
    
    @EnableAutoConfigurationï¼šSpring Bootè‡ªåŠ¨é…ç½®ï¼ˆauto-configurationï¼‰ï¼šå°è¯•æ ¹æ®ä½ æ·»åŠ çš„jarä¾èµ–è‡ªåŠ¨é…ç½®ä½ çš„Springåº”ç”¨ã€‚
    ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„classpathä¸‹å­˜åœ¨HSQLDBï¼Œå¹¶ä¸”ä½ æ²¡æœ‰æ‰‹åŠ¨é…ç½®ä»»ä½•æ•°æ®åº“è¿æ¥beansï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†è‡ªåŠ¨é…ç½®ä¸€ä¸ªå†…å­˜å‹ï¼ˆin-memoryï¼‰æ•°æ®åº“â€ã€‚
    ä½ å¯ä»¥å°†@EnableAutoConfigurationæˆ–è€…@SpringBootApplicationæ³¨è§£æ·»åŠ åˆ°ä¸€ä¸ª@Configurationç±»ä¸Šæ¥é€‰æ‹©è‡ªåŠ¨é…ç½®ã€‚
    å¦‚æœå‘ç°åº”ç”¨äº†ä½ ä¸æƒ³è¦çš„ç‰¹å®šè‡ªåŠ¨é…ç½®ç±»ï¼Œä½ å¯ä»¥ä½¿ç”¨@EnableAutoConfigurationæ³¨è§£çš„æ’é™¤å±æ€§æ¥ç¦ç”¨å®ƒä»¬ã€‚
    @ComponentScanï¼šè¡¨ç¤ºå°†è¯¥ç±»è‡ªåŠ¨å‘ç°æ‰«æç»„ä»¶ã€‚
    ä¸ªäººç†è§£ç›¸å½“äºï¼Œå¦‚æœæ‰«æåˆ°æœ‰@Componentã€@Controllerã€@Serviceç­‰è¿™äº›æ³¨è§£çš„ç±»ï¼Œå¹¶æ³¨å†Œä¸ºBeanï¼Œå¯ä»¥è‡ªåŠ¨æ”¶é›†æ‰€æœ‰çš„Springç»„ä»¶ï¼ŒåŒ…æ‹¬@Configurationç±»ã€‚
    æˆ‘ä»¬ç»å¸¸ä½¿ç”¨@ComponentScanæ³¨è§£æœç´¢beansï¼Œå¹¶ç»“åˆ@Autowiredæ³¨è§£å¯¼å…¥ã€‚å¯ä»¥è‡ªåŠ¨æ”¶é›†æ‰€æœ‰çš„Springç»„ä»¶ï¼ŒåŒ…æ‹¬@Configurationç±»ã€‚
    å¦‚æœæ²¡æœ‰é…ç½®çš„è¯ï¼ŒSpring Bootä¼šæ‰«æå¯åŠ¨ç±»æ‰€åœ¨åŒ…ä¸‹ä»¥åŠå­åŒ…ä¸‹çš„ä½¿ç”¨äº†@Service,@Repositoryç­‰æ³¨è§£çš„ç±»ã€‚
    @Configurationï¼šç›¸å½“äºä¼ ç»Ÿçš„xmlé…ç½®æ–‡ä»¶ï¼Œå¦‚æœæœ‰äº›ç¬¬ä¸‰æ–¹åº“éœ€è¦ç”¨åˆ°xmlæ–‡ä»¶ï¼Œå»ºè®®ä»ç„¶é€šè¿‡@Configurationç±»ä½œä¸ºé¡¹ç›®çš„é…ç½®ä¸»ç±»â€”â€”å¯ä»¥ä½¿ç”¨@ImportResourceæ³¨è§£åŠ è½½xmlé…ç½®æ–‡ä»¶ã€‚
    @Importï¼šç”¨æ¥å¯¼å…¥å…¶ä»–é…ç½®ç±»ã€‚
    @ImportResourceï¼šç”¨æ¥åŠ è½½xmlé…ç½®æ–‡ä»¶ã€‚
    @Autowiredï¼šè‡ªåŠ¨å¯¼å…¥ä¾èµ–çš„bean
    @Serviceï¼šä¸€èˆ¬ç”¨äºä¿®é¥°serviceå±‚çš„ç»„ä»¶
    @Repositoryï¼šä½¿ç”¨@Repositoryæ³¨è§£å¯ä»¥ç¡®ä¿DAOæˆ–è€…repositoriesæä¾›å¼‚å¸¸è½¬è¯‘ï¼Œè¿™ä¸ªæ³¨è§£ä¿®é¥°çš„DAOæˆ–è€…repositoriesç±»ä¼šè¢«ComponetScanå‘ç°å¹¶é…ç½®ï¼ŒåŒæ—¶ä¹Ÿä¸éœ€è¦ä¸ºå®ƒä»¬æä¾›XMLé…ç½®é¡¹ã€‚
    @Beanï¼šç”¨@Beanæ ‡æ³¨æ–¹æ³•ç­‰ä»·äºXMLä¸­é…ç½®çš„beanã€‚
    @Valueï¼šæ³¨å…¥Spring boot application.propertiesé…ç½®çš„å±æ€§çš„å€¼ã€‚ç¤ºä¾‹ä»£ç ï¼š
    @Value(value = â€œ#{message}â€)
    private String message;
    @Injectï¼šç­‰ä»·äºé»˜è®¤çš„@Autowiredï¼Œåªæ˜¯æ²¡æœ‰requiredå±æ€§ï¼›
    @Componentï¼šæ³›æŒ‡ç»„ä»¶ï¼Œå½“ç»„ä»¶ä¸å¥½å½’ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£è¿›è¡Œæ ‡æ³¨ã€‚
    @Beanï¼šç›¸å½“äºXMLä¸­çš„,æ”¾åœ¨æ–¹æ³•çš„ä¸Šé¢ï¼Œè€Œä¸æ˜¯ç±»ï¼Œæ„æ€æ˜¯äº§ç”Ÿä¸€ä¸ªbean,å¹¶äº¤ç»™springç®¡ç†ã€‚
    @AutoWiredï¼šè‡ªåŠ¨å¯¼å…¥ä¾èµ–çš„beanã€‚byTypeæ–¹å¼ã€‚æŠŠé…ç½®å¥½çš„Beanæ‹¿æ¥ç”¨ï¼Œå®Œæˆå±æ€§ã€æ–¹æ³•çš„ç»„è£…ï¼Œå®ƒå¯ä»¥å¯¹ç±»æˆå‘˜å˜é‡ã€æ–¹æ³•åŠæ„é€ å‡½æ•°è¿›è¡Œæ ‡æ³¨ï¼Œå®Œæˆè‡ªåŠ¨è£…é…çš„å·¥ä½œã€‚å½“åŠ ä¸Šï¼ˆrequired=falseï¼‰æ—¶ï¼Œå°±ç®—æ‰¾ä¸åˆ°beanä¹Ÿä¸æŠ¥é”™ã€‚
    @Qualifierï¼šå½“æœ‰å¤šä¸ªåŒä¸€ç±»å‹çš„Beanæ—¶ï¼Œå¯ä»¥ç”¨@Qualifier(â€œnameâ€)æ¥æŒ‡å®šã€‚ä¸@Autowiredé…åˆä½¿ç”¨ã€‚@Qualifieré™å®šæè¿°ç¬¦é™¤äº†èƒ½æ ¹æ®åå­—è¿›è¡Œæ³¨å…¥ï¼Œä½†èƒ½è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ§åˆ¶å¦‚ä½•é€‰æ‹©å€™é€‰è€…ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š
    @Autowired
    @Qualifier(value = â€œdemoInfoServiceâ€)
    private DemoInfoService demoInfoService;
    @Resource(name=â€nameâ€,type=â€typeâ€)ï¼šæ²¡æœ‰æ‹¬å·å†…å†…å®¹çš„è¯ï¼Œé»˜è®¤byNameã€‚ä¸@Autowiredå¹²ç±»ä¼¼çš„äº‹ã€‚
    
    
    
ä¸‰ã€JPAæ³¨è§£

    @Entityï¼š@Table(name=â€â€œ)ï¼šè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªå®ä½“ç±»ã€‚ä¸€èˆ¬ç”¨äºjpaè¿™ä¸¤ä¸ªæ³¨è§£ä¸€èˆ¬ä¸€å—ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœè¡¨åå’Œå®ä½“ç±»åç›¸åŒçš„è¯ï¼Œ@Tableå¯ä»¥çœç•¥
    @MappedSuperClass:ç”¨åœ¨ç¡®å®šæ˜¯çˆ¶ç±»çš„entityä¸Šã€‚çˆ¶ç±»çš„å±æ€§å­ç±»å¯ä»¥ç»§æ‰¿ã€‚
    @NoRepositoryBean:ä¸€èˆ¬ç”¨ä½œçˆ¶ç±»çš„repositoryï¼Œæœ‰è¿™ä¸ªæ³¨è§£ï¼Œspringä¸ä¼šå»å®ä¾‹åŒ–è¯¥repositoryã€‚
    @Columnï¼šå¦‚æœå­—æ®µåä¸åˆ—åç›¸åŒï¼Œåˆ™å¯ä»¥çœç•¥ã€‚
    @Idï¼šè¡¨ç¤ºè¯¥å±æ€§ä¸ºä¸»é”®ã€‚
    @GeneratedValue(strategy=GenerationType.SEQUENCE,generator= â€œrepair_seqâ€)ï¼šè¡¨ç¤ºä¸»é”®ç”Ÿæˆç­–ç•¥æ˜¯sequenceï¼ˆå¯ä»¥ä¸ºAutoã€IDENTITYã€nativeç­‰ï¼ŒAutoè¡¨ç¤ºå¯åœ¨å¤šä¸ªæ•°æ®åº“é—´åˆ‡æ¢ï¼‰ï¼ŒæŒ‡å®šsequenceçš„åå­—æ˜¯repair_seqã€‚
    @SequenceGeneretor(name = â€œrepair_seqâ€, sequenceName = â€œseq_repairâ€, allocationSize = 1)ï¼šnameä¸ºsequenceçš„åç§°ï¼Œä»¥ä¾¿ä½¿ç”¨ï¼ŒsequenceNameä¸ºæ•°æ®åº“çš„sequenceåç§°ï¼Œä¸¤ä¸ªåç§°å¯ä»¥ä¸€è‡´ã€‚
    @Transientï¼šè¡¨ç¤ºè¯¥å±æ€§å¹¶éä¸€ä¸ªåˆ°æ•°æ®åº“è¡¨çš„å­—æ®µçš„æ˜ å°„,ORMæ¡†æ¶å°†å¿½ç•¥è¯¥å±æ€§ã€‚
                å¦‚æœä¸€ä¸ªå±æ€§å¹¶éæ•°æ®åº“è¡¨çš„å­—æ®µæ˜ å°„,å°±åŠ¡å¿…å°†å…¶æ ‡ç¤ºä¸º@Transient,å¦åˆ™,ORMæ¡†æ¶é»˜è®¤å…¶æ³¨è§£ä¸º@Basicã€‚@Basic(fetch=FetchType.LAZY)ï¼šæ ‡è®°å¯ä»¥æŒ‡å®šå®ä½“å±æ€§çš„åŠ è½½æ–¹å¼
    @JsonIgnoreï¼šä½œç”¨æ˜¯jsonåºåˆ—åŒ–æ—¶å°†Java beanä¸­çš„ä¸€äº›å±æ€§å¿½ç•¥æ‰,åºåˆ—åŒ–å’Œååºåˆ—åŒ–éƒ½å—å½±å“ã€‚
    @JoinColumnï¼ˆname=â€loginIdâ€ï¼‰:ä¸€å¯¹ä¸€ï¼šæœ¬è¡¨ä¸­æŒ‡å‘å¦ä¸€ä¸ªè¡¨çš„å¤–é”®ã€‚ä¸€å¯¹å¤šï¼šå¦ä¸€ä¸ªè¡¨æŒ‡å‘æœ¬è¡¨çš„å¤–é”®ã€‚
    @OneToOneã€@OneToManyã€@ManyToOneï¼šå¯¹åº”hibernateé…ç½®æ–‡ä»¶ä¸­çš„ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€ã€‚
    
å››ã€springMVCç›¸å…³æ³¨è§£
    1.@RequestMappingï¼š@RequestMapping(â€œ/pathâ€)è¡¨ç¤ºè¯¥æ§åˆ¶å™¨å¤„ç†æ‰€æœ‰â€œ/pathâ€çš„UR Lè¯·æ±‚ã€‚
        RequestMappingæ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚è¯¥æ³¨è§£æœ‰å…­ä¸ªå±æ€§ï¼š
        params:æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ˜¯ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚
        headers:æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚
        value:æŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Template æ¨¡å¼
        method:æŒ‡å®šè¯·æ±‚çš„methodç±»å‹ï¼Œ GETã€POSTã€PUTã€DELETEç­‰
        consumes:æŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ï¼Œå¦‚application/json,text/html;
        produces:æŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„(Accept)ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›
    2@RequestParamï¼šç”¨åœ¨æ–¹æ³•çš„å‚æ•°å‰é¢ã€‚
        @RequestParam
        String a =request.getParameter(â€œaâ€)ã€‚
    3.@PathVariable:è·¯å¾„å˜é‡ã€‚å¦‚
        RequestMapping(â€œuser/get/mac/{macAddress}â€)
        public String getByMacAddress(@PathVariable String macAddress){
            //do something;
        }
        å‚æ•°ä¸å¤§æ‹¬å·é‡Œçš„åå­—ä¸€æ ·è¦ç›¸åŒã€‚

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br></div></div><h2 id="æ¥å£å¹‚ç­‰æ€§"><a href="#æ¥å£å¹‚ç­‰æ€§" class="header-anchor">#</a> æ¥å£å¹‚ç­‰æ€§</h2> <ul><li>å®šä¹‰</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>ä»¥ç›¸åŒçš„è¯·æ±‚ï¼ˆè¯·æ±‚å‚æ•°ã€è¯·æ±‚è·¯å¾„ï¼‰è°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œä¸€æ¬¡å’Œå¤šæ¬¡è°ƒç”¨ï¼Œå¯¹ç³»ç»Ÿäº§ç”Ÿçš„å½±å“æ˜¯ç›¸åŒçš„

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>æ¥å£å¹‚ç­‰æ€§å’Œé˜²æ­¢é‡å¤æäº¤æ˜¯ä¸€å›äº‹æƒ…å—ï¼Ÿ</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>å¹‚ç­‰ï¼š æ˜¯æŒ‡çš„è¯·æ±‚å·²ç»å‘ç”Ÿï¼Œæˆ–è€…å·²ç»æ— æ³•é¿å…çš„æƒ…å†µä¸‹ï¼Œé‡‡å–ä¸€å®šçš„æŠ€æœ¯æ‰‹æ®µï¼Œè®©è¿™äº›é‡å¤çš„è¯·æ±‚ä¸ç»™ç³»ç»Ÿå¸¦æ¥å‰¯ä½œç”¨

é˜²æ­¢é‡å¤ï¼š è®©ç”¨æˆ·ä¸å‘èµ·å¤šæ¬¡ä¸€æ ·çš„è¯·æ±‚ï¼Œæ¯”å¦‚åœ¨çº¿è´­ç‰©ç‚¹å‡»äº†ä¸‹å•æŒ‰é’®ï¼Œä½†æ˜¯ç”±äºç½‘ç»œå»¶è¿Ÿæˆ–è€…å…¶ä»–åŸå› å¯¼è‡´å“åº”å¾ˆæ…¢ï¼Œæ­¤æ—¶ç”¨æˆ·å¿ƒæ€¥å¤šæ¬¡ç‚¹å‡»ä¸‹å•æŒ‰é’®ï¼Œè¿™ç§æƒ…å†µä¸‹å¯èƒ½ä¼šé€ æˆå¤šæ¬¡ä¸‹å•ï¼ˆè‹¥ä¸åšå¤„ç†ï¼‰
         ä¸€èˆ¬é˜²æ­¢é‡å¤æäº¤æ–¹æ¡ˆï¼š å°†ä¸‹å•æŒ‰é’®ç½®ç°è‰²ç¦æ­¢å¤šæ¬¡é‡å¤ç‚¹å‡»ã€è·³è½¬åˆ°ç»“æœé¡µã€‚ä¸»è¦æ˜¯åœ¨å®¢æˆ·ç«¯è§£å†³è¿™ä¸ªé—®é¢˜
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>å“ªäº›æƒ…å†µæ— æ³•é˜²æ­¢é‡å¤æäº¤</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>1. æ¥å£é‡è¯•è°ƒç”¨ ï¼š å› ä¸ºæŸäº›ä¸å¯é€†åŸå› å¯¼è‡´è°ƒç”¨æ¥å£å¤±è´¥ï¼Œå‡ºäºå®¹é”™æ€§è€ƒè™‘ä¼šåŠ å…¥å¤±è´¥é‡è¯•æœºåˆ¶ï¼Œéœ€è¦é‡å¤è°ƒç”¨æ¥å£ã€‚
2. æ¶ˆæ¯é‡å¤æ¶ˆè´¹ ï¼š æ¶ˆæ¯é˜Ÿåˆ—æƒ…å†µä¸‹
3. è¯·æ±‚é‡å‘ ï¼š ç½‘ç»œæŠ–åŠ¨å¼•å‘çš„nginxé‡å‘è¯·æ±‚ï¼Œé€ æˆé‡å¤è°ƒç”¨

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>å¸¸è§ä¿è¯å¹‚ç­‰æ€§çš„æ–¹å¼</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>æ•°æ®åº“å±‚é¢ï¼š
    æ‚²è§‚é”ï¼š for update
            1. å½“çº¿ç¨‹Aæ‰§è¡Œ select * from user where id = 1 for update çš„æ—¶å€™ä¼šå¯¹è¿™æ¡è®°å½•åŠ é”ï¼Œå½“å…¶ä»–çº¿ç¨‹æ‰§è¡Œåˆ°è¿™è¡Œä»£ç çš„æ—¶å€™ï¼Œä¼šç­‰å¾…Açº¿ç¨‹é‡Šæ”¾é”ä¹‹åï¼Œæ‰èƒ½è·å–é”ï¼Œç»§ç»­åç»­æ“ä½œ
            2. äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œfor update è·å–çš„é”ä¼šè‡ªåŠ¨é‡Šæ”¾
            ç¼ºç‚¹ï¼š è¿™ç§æ–¹å¼æ¯”è¾ƒå°‘ä½¿ç”¨ï¼Œå› ä¸ºå½“ä¸šåŠ¡å¤„ç†æ¯”è¾ƒè€—æ—¶çš„æ—¶å€™ï¼Œå¹¶å‘æƒ…å†µä¸‹ï¼Œåé¢çš„çº¿ç¨‹ä¼šé•¿æœŸå‡ºäºç­‰å¾…å‰çº¿ç¨‹é‡Šæ”¾é”çš„çŠ¶æ€ã€‚webæœåŠ¡ä¸­çš„çº¿ç¨‹æ•°é‡éƒ½æ˜¯æœ‰é™çš„ã€‚è‹¥å¤§é‡çš„çº¿ç¨‹ç”±äºfor upateé”å‡ºäºç­‰å¾…çŠ¶æ€ã€‚å¹¶å‘æ€§æä½ã€‚
            
    å”¯ä¸€ID/ç´¢å¼•ï¼š ä¸»é”®idã€åˆ›å»ºå”¯ä¸€çº¦æŸï¼š
                                ALTER TABLE user_sys_role ADD CONSTRAINT unique_no UNIQUE(no);
                                ALTER TABLE user_sys_role DROP INDEX unique_no;
    ä¹è§‚é”ï¼š  è¡¨æ–°å»ºversionå­—æ®µï¼Œupdateæºå¸¦versionå­—æ®µä½œä¸ºåŒºåˆ«æ ‡è¯†
    
å…¶ä»–ï¼š     
    åˆ†å¸ƒå¼é”ï¼š zookeeper ã€ redis 
    tokenæœºåˆ¶
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="springbooté¡¹ç›®ä¸­çš„æ—¥æœŸé—®é¢˜"><a href="#springbooté¡¹ç›®ä¸­çš„æ—¥æœŸé—®é¢˜" class="header-anchor">#</a> springBooté¡¹ç›®ä¸­çš„æ—¥æœŸé—®é¢˜</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>springboot ä»æ•°æ®åº“ä¸­å–å‡ºæ¥çš„æ—¥æœŸï¼Œæ•°æ®åº“å­—æ®µå®šä¹‰çš„æ˜¯timestampï¼Œå®ä½“ä¸­å®šä¹‰çš„Dateã€‚
1.å¦‚æœå®ä½“ä¸­æ˜¯ç”¨Stringå®šä¹‰è¿™ä¸ªæ—¥æœŸï¼Œé‚£ä¹ˆå‰ç«¯æ¥æ”¶åˆ°çš„æ˜¯ ï¼š2020-02-17 08:45:23.0ï¼Œä¼šå‘ç°å¤šä¸ªä¸€ä¸ª .0
    è§£å†³åŠæ³•ï¼šä½¿ç”¨Dateå®šä¹‰ã€‚å¹¶ä¸”åŠ ä¸ŠspringBootçš„æ—¥æœŸé…ç½®

2.å¦‚æœå®šä¹‰çš„Dateï¼Œä½†æ˜¯å‰ç«¯æ¥çš„æ˜¯ï¼š2020-02-17T08:45:23.000+0000
    è§£å†³æ–¹æ³•ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šæ—¥æœŸé…ç½®å‚æ•°ï¼š
            spring.jackson.date-format=yyyy-MM-dd HH:mm:  #æŒ‡å®šæ—¥æœŸè¾“å‡ºçš„æ ¼å¼
            spring.jackson.time-zone=GMT+8 #è§£å†³å·®å…«å°æ—¶çš„é—®é¢˜

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>#ã€Spring-Cloudã€‘</p> <p>#ã€SpringMVCã€‘</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/mengqizhang/java/jvm/jvm.html" class="prev">
        JVM
      </a></span> <span class="next"><a href="/mengqizhang/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">
        ç®€ä»‹
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/mengqizhang/assets/js/app.a8d21a83.js" defer></script><script src="/mengqizhang/assets/js/2.e69c46bd.js" defer></script><script src="/mengqizhang/assets/js/17.8a25e983.js" defer></script>
  </body>
</html>
