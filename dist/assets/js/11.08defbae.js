(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{399:function(s,a,n){"use strict";n.r(a);var e=n(54),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"filebeat"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#filebeat"}},[s._v("#")]),s._v(" filebeat")]),s._v(" "),n("h2",{attrs:{id:"filebeat安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#filebeat安装"}},[s._v("#")]),s._v(" filebeat安装")]),s._v(" "),n("ul",[n("li",[n("ol",[n("li",[s._v("filebeat.yml配置文件")])])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('filebeat.config:\n  modules:\n    path: ${path.config}/modules.d/*.yml\n    reload.enabled: true\n\nprocessors:\n  - add_cloud_metadata: ~\n  - add_docker_metadata: ~\n\n\n#日志文件作为数据涞源，注意如果是通过容器启动filebeat的话，这个日志路径是容器内的\nfilebeat.inputs:\n  - type: log\n    enabled: true\n    paths: /var/share/filebeat/logs/info_2021-07-04.log\n    tags: ["lowcode-log"]\n    fields:\n      fileType: lowcode-log\n  - type: log\n    enabled: true\n    paths: /var/share/filebeat/logs/info_2021-07-04.log\n    tags: ["gateway-log"]\n    fields:\n        fileType: gateway-log\n### 新增一个tags区分不同的项目类型，然后logstash中直接根据tags判断输出成不同的索引\n### 也可以使用fileds，注意取值方式 参考logstash中的配置\n\n\n\noutput.logstash:\n  hosts: ["x.xx.xx.xx:5044"]\n\n#输出到es\n#output.elasticsearch:\n#  hosts: ["es的ip:9200"]\n#  index: "filebeat-%{+yyyy.MM.dd}"\n\n# 鉴权可以暂时不用\n## username: \'${ELASTICSEARCH_USERNAME:}\'\n## password: \'${ELASTICSEARCH_PASSWORD:}\'\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])]),n("p",[s._v("-2. docker-compose安装filebeat")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('version: "3.3"\nservices:\n  filebeat:\n    image: elastic/filebeat:7.13.4\n    container_name: filebeat_by_mqz\n    ports:\n      - "4044:4044"\n    privileged: true\n    volumes:\n      - ./conf/filebeat.yml:/usr/share/filebeat/filebeat.yml\n      #把宿主机的目录日志挂载到容器中，并且在配置中指向这个容器的目录日志，上次一直传送给logstash没收到，就是目录搞错了！\n      # 这里建议把日志目录挂载，因为挂载日志文件的话无法实时的共享到容易内，具体可了解文件inode机制\n      - /root/logs/qingbang-service/info_2021-07-04.0.log:/var/share/filebeat/logs/info_2021-07-04.log\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);