<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | 蒙大拿</title>
    <meta name="generator" content="VuePress 1.9.5">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script charset="utf-8" src="https://my.openwrite.cn/js/readmore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="蒙大拿的博客">
    
    <link rel="preload" href="/mengqizhang/assets/css/0.styles.a1d09170.css" as="style"><link rel="preload" href="/mengqizhang/assets/js/app.a8d21a83.js" as="script"><link rel="preload" href="/mengqizhang/assets/js/2.e69c46bd.js" as="script"><link rel="preload" href="/mengqizhang/assets/js/60.a50c0285.js" as="script"><link rel="prefetch" href="/mengqizhang/assets/js/10.11174a82.js"><link rel="prefetch" href="/mengqizhang/assets/js/100.bd6553c3.js"><link rel="prefetch" href="/mengqizhang/assets/js/101.ac07962b.js"><link rel="prefetch" href="/mengqizhang/assets/js/102.79bec0af.js"><link rel="prefetch" href="/mengqizhang/assets/js/103.0c0a0808.js"><link rel="prefetch" href="/mengqizhang/assets/js/104.3ed6d392.js"><link rel="prefetch" href="/mengqizhang/assets/js/105.be22e8c8.js"><link rel="prefetch" href="/mengqizhang/assets/js/106.efa39ac4.js"><link rel="prefetch" href="/mengqizhang/assets/js/107.545ffb45.js"><link rel="prefetch" href="/mengqizhang/assets/js/108.cf23c097.js"><link rel="prefetch" href="/mengqizhang/assets/js/109.3339ffad.js"><link rel="prefetch" href="/mengqizhang/assets/js/11.08defbae.js"><link rel="prefetch" href="/mengqizhang/assets/js/110.bafd2f00.js"><link rel="prefetch" href="/mengqizhang/assets/js/12.25a3365c.js"><link rel="prefetch" href="/mengqizhang/assets/js/13.9b88bf7d.js"><link rel="prefetch" href="/mengqizhang/assets/js/14.c4d7ed3a.js"><link rel="prefetch" href="/mengqizhang/assets/js/15.b407b696.js"><link rel="prefetch" href="/mengqizhang/assets/js/16.1c08698a.js"><link rel="prefetch" href="/mengqizhang/assets/js/17.8a25e983.js"><link rel="prefetch" href="/mengqizhang/assets/js/18.e34bf6a6.js"><link rel="prefetch" href="/mengqizhang/assets/js/19.68d7669f.js"><link rel="prefetch" href="/mengqizhang/assets/js/20.de14558d.js"><link rel="prefetch" href="/mengqizhang/assets/js/21.56869e5e.js"><link rel="prefetch" href="/mengqizhang/assets/js/22.aea26c9b.js"><link rel="prefetch" href="/mengqizhang/assets/js/23.4a0b2ea3.js"><link rel="prefetch" href="/mengqizhang/assets/js/24.58c270f0.js"><link rel="prefetch" href="/mengqizhang/assets/js/25.413aed44.js"><link rel="prefetch" href="/mengqizhang/assets/js/26.5ebfde8b.js"><link rel="prefetch" href="/mengqizhang/assets/js/27.48dd442a.js"><link rel="prefetch" href="/mengqizhang/assets/js/28.d2afcf03.js"><link rel="prefetch" href="/mengqizhang/assets/js/29.b928e199.js"><link rel="prefetch" href="/mengqizhang/assets/js/3.7aafc190.js"><link rel="prefetch" href="/mengqizhang/assets/js/30.4c1cbe1a.js"><link rel="prefetch" href="/mengqizhang/assets/js/31.77073e2d.js"><link rel="prefetch" href="/mengqizhang/assets/js/32.5f66f7a2.js"><link rel="prefetch" href="/mengqizhang/assets/js/33.a8272e84.js"><link rel="prefetch" href="/mengqizhang/assets/js/34.3b8ea135.js"><link rel="prefetch" href="/mengqizhang/assets/js/35.100b34a0.js"><link rel="prefetch" href="/mengqizhang/assets/js/36.06cb633d.js"><link rel="prefetch" href="/mengqizhang/assets/js/37.f3d4b763.js"><link rel="prefetch" href="/mengqizhang/assets/js/38.733d311d.js"><link rel="prefetch" href="/mengqizhang/assets/js/39.8434909a.js"><link rel="prefetch" href="/mengqizhang/assets/js/4.000c3dbd.js"><link rel="prefetch" href="/mengqizhang/assets/js/40.dd341745.js"><link rel="prefetch" href="/mengqizhang/assets/js/41.1fcf309c.js"><link rel="prefetch" href="/mengqizhang/assets/js/42.1cc69bad.js"><link rel="prefetch" href="/mengqizhang/assets/js/43.fefa3ac7.js"><link rel="prefetch" href="/mengqizhang/assets/js/44.d284f8c1.js"><link rel="prefetch" href="/mengqizhang/assets/js/45.2564339d.js"><link rel="prefetch" href="/mengqizhang/assets/js/46.23627a8c.js"><link rel="prefetch" href="/mengqizhang/assets/js/47.cecbf290.js"><link rel="prefetch" href="/mengqizhang/assets/js/48.bad75ece.js"><link rel="prefetch" href="/mengqizhang/assets/js/49.2fa60a3e.js"><link rel="prefetch" href="/mengqizhang/assets/js/5.9832e234.js"><link rel="prefetch" href="/mengqizhang/assets/js/50.f3159852.js"><link rel="prefetch" href="/mengqizhang/assets/js/51.738bce4a.js"><link rel="prefetch" href="/mengqizhang/assets/js/52.efc0fa7e.js"><link rel="prefetch" href="/mengqizhang/assets/js/53.8d0c00f1.js"><link rel="prefetch" href="/mengqizhang/assets/js/54.a519e682.js"><link rel="prefetch" href="/mengqizhang/assets/js/55.9652e586.js"><link rel="prefetch" href="/mengqizhang/assets/js/56.c88f759b.js"><link rel="prefetch" href="/mengqizhang/assets/js/57.c6f3cd20.js"><link rel="prefetch" href="/mengqizhang/assets/js/58.0c040aca.js"><link rel="prefetch" href="/mengqizhang/assets/js/59.fc5ce388.js"><link rel="prefetch" href="/mengqizhang/assets/js/6.48810bdc.js"><link rel="prefetch" href="/mengqizhang/assets/js/61.ab6648f5.js"><link rel="prefetch" href="/mengqizhang/assets/js/62.f589c0b8.js"><link rel="prefetch" href="/mengqizhang/assets/js/63.df4a0587.js"><link rel="prefetch" href="/mengqizhang/assets/js/64.e5f1a0d6.js"><link rel="prefetch" href="/mengqizhang/assets/js/65.94e94ec2.js"><link rel="prefetch" href="/mengqizhang/assets/js/66.9a0f92dc.js"><link rel="prefetch" href="/mengqizhang/assets/js/67.15d5b718.js"><link rel="prefetch" href="/mengqizhang/assets/js/68.ca0d798d.js"><link rel="prefetch" href="/mengqizhang/assets/js/69.4de863fa.js"><link rel="prefetch" href="/mengqizhang/assets/js/7.2f8cbddd.js"><link rel="prefetch" href="/mengqizhang/assets/js/70.7c1bcd59.js"><link rel="prefetch" href="/mengqizhang/assets/js/71.70f3e9ec.js"><link rel="prefetch" href="/mengqizhang/assets/js/72.ca361407.js"><link rel="prefetch" href="/mengqizhang/assets/js/73.95c0b000.js"><link rel="prefetch" href="/mengqizhang/assets/js/74.673e240c.js"><link rel="prefetch" href="/mengqizhang/assets/js/75.f5cf8815.js"><link rel="prefetch" href="/mengqizhang/assets/js/76.30b8a8fb.js"><link rel="prefetch" href="/mengqizhang/assets/js/77.0bdfd82b.js"><link rel="prefetch" href="/mengqizhang/assets/js/78.a21a9dee.js"><link rel="prefetch" href="/mengqizhang/assets/js/79.5c55aff9.js"><link rel="prefetch" href="/mengqizhang/assets/js/8.507fce61.js"><link rel="prefetch" href="/mengqizhang/assets/js/80.aa70b0e8.js"><link rel="prefetch" href="/mengqizhang/assets/js/81.1cb55142.js"><link rel="prefetch" href="/mengqizhang/assets/js/82.50b720b1.js"><link rel="prefetch" href="/mengqizhang/assets/js/83.85834849.js"><link rel="prefetch" href="/mengqizhang/assets/js/84.e2f1cab8.js"><link rel="prefetch" href="/mengqizhang/assets/js/85.c154565c.js"><link rel="prefetch" href="/mengqizhang/assets/js/86.c5dbbd95.js"><link rel="prefetch" href="/mengqizhang/assets/js/87.2b62cc5e.js"><link rel="prefetch" href="/mengqizhang/assets/js/88.5deb957d.js"><link rel="prefetch" href="/mengqizhang/assets/js/89.fbed7b0f.js"><link rel="prefetch" href="/mengqizhang/assets/js/9.70c1c418.js"><link rel="prefetch" href="/mengqizhang/assets/js/90.8efb35d5.js"><link rel="prefetch" href="/mengqizhang/assets/js/91.a3da2ba6.js"><link rel="prefetch" href="/mengqizhang/assets/js/92.1f9bf6c0.js"><link rel="prefetch" href="/mengqizhang/assets/js/93.862f4101.js"><link rel="prefetch" href="/mengqizhang/assets/js/94.1a0c5762.js"><link rel="prefetch" href="/mengqizhang/assets/js/95.6df0f77b.js"><link rel="prefetch" href="/mengqizhang/assets/js/96.90bef310.js"><link rel="prefetch" href="/mengqizhang/assets/js/97.fa2b5f10.js"><link rel="prefetch" href="/mengqizhang/assets/js/98.d84c6b84.js"><link rel="prefetch" href="/mengqizhang/assets/js/99.785b4a31.js">
    <link rel="stylesheet" href="/mengqizhang/assets/css/0.styles.a1d09170.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mengqizhang/" class="home-link router-link-active"><!----> <span class="site-name">蒙大拿</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mengqizhang/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://gitee.com/DemoMeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于我
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mengqizhang/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://gitee.com/DemoMeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于我
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试 📖🔥🔥</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/环境配置/" class="sidebar-heading clickable"><span>环境配置 🔧</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/消息队列/" class="sidebar-heading clickable"><span>消息队列 🔥🔥🔥</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/数据层/" class="sidebar-heading clickable"><span>数据层 🔥🔥🔥</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/容器化/" class="sidebar-heading clickable open"><span>容器化 🐳</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mengqizhang/容器化/docker/docker.html" class="active sidebar-link">基础</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mengqizhang/容器化/docker/docker-install.html" class="sidebar-link">docker安装</a></li><li><a href="/mengqizhang/容器化/docker/docker-swarm.html" class="sidebar-link">docker-swarm集群</a></li><li><a href="/mengqizhang/容器化/docker/docker私服.html" class="sidebar-link">docker私服</a></li><li><a href="/mengqizhang/容器化/docker/docker-springboot打包使用.html" class="sidebar-link">docker-springboot打包使用</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>portainer容器管理工具</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java ☕️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式事务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式系统 ☁️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webSocket</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ELK 🔍</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nginx 🇷🇺</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jenkins 👴</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>服务器 💰</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>测试 😓</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>监控告警</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h1> <p><code>https://mp.weixin.qq.com/s/1ad5lEdMEpzDS-zSF4ziRQ</code></p> <p><code>lsof (List Open Files) 插件下载：</code> <a data-fancybox="" title="111" href="docker-lsof插件下载.jpg"><img src="docker-lsof%E6%8F%92%E4%BB%B6%E4%B8%8B%E8%BD%BD.jpg" alt="lsof插件下载"></a></p> <p><code>docker服务器启动：</code> <a data-fancybox="" title="111" href="docker-服务启动.jpg"><img src="docker-%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8.jpg" alt="docker服务启动"></a></p> <p><code>docker查看版本信息：</code> <a data-fancybox="" title="111" href="docker-查看版本.jpg"><img src="docker-%E6%9F%A5%E7%9C%8B%E7%89%88%E6%9C%AC.jpg" alt="docker查看版本"></a></p> <p><code>镜像搜索并下载：</code> <a data-fancybox="" title="111" href="docker-镜像搜索下载.jpg"><img src="docker-%E9%95%9C%E5%83%8F%E6%90%9C%E7%B4%A2%E4%B8%8B%E8%BD%BD.jpg" alt="docker镜像搜索下载"></a></p> <p><code>docker容器启动： docker run -d -p 3306:3306 --name Mysql mysql</code> <a data-fancybox="" title="111" href="docker-容器启动.jpg"><img src="docker-%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8.jpg" alt="docker容器启动"></a></p> <p><code>docker删除镜像：</code> <a data-fancybox="" title="111" href="docker-删除镜像.jpg"><img src="docker-%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F.jpg" alt="docker删除镜像"></a></p> <p><code>docker容器信息 ： docker inspect 容器ID</code> <a data-fancybox="" title="111" href="docker-查看容器信息.jpg"><img src="docker-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E4%BF%A1%E6%81%AF.jpg" alt="docker查看容器信息"></a></p> <h3 id="【把项目部署到docker中-把springboot项目部署到docker中-】"><a href="#【把项目部署到docker中-把springboot项目部署到docker中-】" class="header-anchor">#</a> 【把项目部署到docker中（把SpringBoot项目部署到Docker中）】</h3> <p><code>1.创建SpringBoot项目，并且编译成可执行的jar包，并且把该jar放到服务器的某个文件夹下：</code> <a data-fancybox="" title="111" href="docker-jar部署docker-编译项目成jar.jpg"><img src="docker-jar%E9%83%A8%E7%BD%B2docker-%E7%BC%96%E8%AF%91%E9%A1%B9%E7%9B%AE%E6%88%90jar.jpg" alt="docker编译项目成jar"></a></p> <p><code>2.配置Dockerfile文件。（该Dockerfile文件要和jar在相同的目录下）：</code> <a data-fancybox="" title="111" href="docker-jar部署docker-配置Dockerfile文件.jpg"><img src="docker-jar%E9%83%A8%E7%BD%B2docker-%E9%85%8D%E7%BD%AEDockerfile%E6%96%87%E4%BB%B6.jpg" alt="docker配置Dockerfile文件"></a></p> <div class="language- extra-class"><pre><code>Dockerfile文件配置释义：
     VOLUME 指定了临时文件目录为/tmp。其效果是在主机 /var/lib/docker 目录下创建了一个临时文件，并链接到容器的/tmp。
     改步骤是可选的，如果涉及到文件系统的应用就很有必要了。/tmp目录用来持久化到 Docker 数据文件夹，因为 Spring Boot 使用的内嵌 Tomcat 容器默认使用/tmp作为工作目录
     项目的 jar 文件作为 “app.jar” 添加到容器的
     ENTRYPOINT 执行项目 app.jar。为了缩短 Tomcat 启动时间，添加一个系统属性指向 “/dev/./urandom” 作为 Entropy Source
</code></pre></div><p><code>3.制作jar的镜像文件，执行 docker build -t docker-sb . (-t 是设置制作镜像的名字，注意该命令最后还有一个点)</code> <a data-fancybox="" title="111" href="docker-jar部署docker-制作jar的镜像文件.jpg"><img src="docker-jar%E9%83%A8%E7%BD%B2docker-%E5%88%B6%E4%BD%9Cjar%E7%9A%84%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6.jpg" alt="docker制作jar镜像文件"></a></p> <p><code>4.根据镜像名称，制作容器并且启动</code> <a data-fancybox="" title="111" href="docker-jar部署docker-启动容器.jpg"><img src="docker-jar%E9%83%A8%E7%BD%B2docker-%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8.jpg" alt="docker启动容器"></a></p> <p><code>5.容器启动成功，可以通过web浏览器访问到程序</code></p> <h3 id="查看docker容器启动信息-容器启动命令"><a href="#查看docker容器启动信息-容器启动命令" class="header-anchor">#</a> 查看Docker容器启动信息-容器启动命令</h3> <p>安装相关组件：</p> <ul><li>1：yum install -y python-pip</li> <li>2：pip install runlike</li> <li>3：执行 runlike -p 容器id
<a data-fancybox="" title="111" href="查看docker启动信息.jpg"><img src="%E6%9F%A5%E7%9C%8Bdocker%E5%90%AF%E5%8A%A8%E4%BF%A1%E6%81%AF.jpg" alt="查看docker启动信息"></a></li></ul> <h3 id="安装runlike-导出容器启动命令"><a href="#安装runlike-导出容器启动命令" class="header-anchor">#</a> 安装runlike 导出容器启动命令</h3> <p>上面是使用 pip安装runlike，可以使用docker容器启动runlike，并且设置容器别名，这样可以直接使用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull assaflavie/runlike:latest
alias runlike=&quot;docker run --rm -v /var/run/docker.sock:/var/run/docker.sock assaflavie/runlike&quot;
runlike -p 容器id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><a data-fancybox="" title="111" href="安装runlike-导出容器启动命令.png"><img src="%E5%AE%89%E8%A3%85runlike-%E5%AF%BC%E5%87%BA%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4.png" alt="img.png"></a></p> <h3 id="安装whaler-导出容器-dockerfile-分析镜像的dockerfile"><a href="#安装whaler-导出容器-dockerfile-分析镜像的dockerfile" class="header-anchor">#</a> 安装whaler，导出容器 Dockerfile (分析镜像的Dockerfile)</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull pegleg/whaler:latest
alias whaler=&quot;docker run -t --rm -v /var/run/docker.sock:/var/run/docker.sock:ro pegleg/whaler&quot;
whaler 镜像id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><a data-fancybox="" title="111" href="whaler分析镜像的Dockerfile.png"><img src="whaler%E5%88%86%E6%9E%90%E9%95%9C%E5%83%8F%E7%9A%84Dockerfile.png" alt="img.png"></a></p> <h3 id="什么是linux容器"><a href="#什么是linux容器" class="header-anchor">#</a> 什么是Linux容器：</h3> <ul><li><p>容器：</p> <p><code>镜像包含所有的依赖项，因而从开发到测试再到生产的过程中，它具有可以移植性和一致性。</code></p> <p><code>你的开发环境有独特的配置，其他开发人员身处的环境配置可能稍有不同，并且你的电脑依赖于某些特定的文件。</code></p> <p><code>你的企业拥有标准化的测试和生产环境，且具有自身的配置和一系列支持文件。</code></p> <p><code>你希望尽可能多在本地模拟这些环境，而不产生重新创建服务器环境的开销</code></p></li> <li><p>docker定义：</p> <p><code>容器化技术，用于支持创建和使用 Linux 容器</code></p></li> <li><p>docker生命周期：
<a data-fancybox="" title="111" href="docker生命周期.jpg"><img src="docker%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.jpg" alt="docker生命周期器"></a></p></li> <li><p>docker相关指令：</p></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>
    `docker images list : 查看本机镜像`
    `docker search nginx : 搜索官方镜像仓库`
    `docker pull index.tenxcloud.com/tenxcloud/httpd： 拉取第三方镜像仓库的镜像（阿里云、腾讯的镜像仓库）`

    `docker image save 镜像Id或者镜像名 &gt; /usr/export-image-rabbitmq.tar.gz : 导出镜像`
    `docker image load -i /usr/export-image-rabbitmq.tar.gz : 加载镜像`

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><a data-fancybox="" title="111" href="docker导出导入镜像.jpg"><img src="docker%E5%AF%BC%E5%87%BA%E5%AF%BC%E5%85%A5%E9%95%9C%E5%83%8F.jpg" alt="docker导入导出镜像"></a></p> <h3 id="docker-swarm-容器集群"><a href="#docker-swarm-容器集群" class="header-anchor">#</a> docker swarm 容器集群：</h3> <div class="language- extra-class"><pre><code>`` 查看具体的docker swarm使用步骤 ``
``https://mp.weixin.qq.com/s/1ad5lEdMEpzDS-zSF4ziRQ``
</code></pre></div><p>docker swarm 集群部署docker : 发布新的服务
docker stack deploy -c fxq-moudle-cluster.yml --with-registry-auth fxq_moudle</p> <p><a data-fancybox="" title="111" href="docker容器集群-1.jpg"><img src="docker%E5%AE%B9%E5%99%A8%E9%9B%86%E7%BE%A4-1.jpg" alt="docker容器集群-查看所有服务、查看集群节点"></a></p> <h3 id="容器编排-docker-compose-和-docker-swarm"><a href="#容器编排-docker-compose-和-docker-swarm" class="header-anchor">#</a> 容器编排： docker compose 和 docker swarm</h3> <div class="language- extra-class"><pre><code>二者都是docker官方提供的容器编排的项目，但是：
    docker compose ： 解决的是在同一台服务器/主机上部署多个容器的工具
    docker swarm ： 解决的是在多台服务器/主机上部署多个容器集群
</code></pre></div><ul><li><p>docker 、 docker compose 、 docker swarm</p> <p>docker : <code>docker是容器引擎，最终的容器均需要Dockerfile文件构建出来，它是容器的基础。</code></p> <p>docker compose : <code>是一款容器编排工具，编写docker-compose.yml把当前服务器、主机的服务构建、启动（docker-compose up）、暂停等操作。 所以docker compose只能管理当前的服务器、主机上的容器（如果需要管理不同服务器、主机上的docker需要使用docker swarm）。</code></p> <p>docker swarm : <code>是用于管理多个服务器上的容器，其界面化工具为：Portainer。可用于启动容器，监控容器状态（如果容器的状态不正常会自定构建一个新的容器服务）， 同时提供各个容器服务的负载均衡。这些是docker compose不具备的。</code></p></li></ul> <h3 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h3> <ul><li><p>查看yum安装的软件</p> <ul><li>yum list installed | grep docker: 查看docker通过yum安装的所有包</li></ul></li> <li><p>docker compose —&gt;  命令不存在：</p> <ul><li>centos 7中python-pip模块不存在，是因为像centos这类衍生的发行版，源跟新滞后，或者不存在。即使使用yum去search python-pip也找不到软件包。</li> <li>为了使用安装滞后或源中不存在的安装包，需要安装扩展源EPEL。</li> <li>扩展源EPEL(http://fedoraproject.org/wiki/EPEL) 是由 Fedora 社区打造，为 RHEL 及衍生发行版如 CentOS、Scientific Linux 等提供高质量软件包的项目。</li> <li>安装扩展源：sudo yum -y install epel-release</li> <li>安装python-pip模块：sudo yum install python-pip</li> <li>此时执行 docker-compose version 命令可能会会出现命令不存在的问题，以下给出解决方案：</li></ul></li> <li><p>docker compo安装步骤</p> <ul><li>cd /usr/local/bin/</li> <li>wget https://github.com/docker/compose/releases/download/1.14.0-rc2/docker-compose-Linux-x86_64</li> <li>rename docker-compose-Linux-x86_64 docker-compose docker-compose-Linux-x86_64</li> <li>chmod +x /usr/local/bin/docker-compose</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mengqizhang/数据层/redis/Redis实现分布式锁.html" class="prev">
        redis实现分布式锁
      </a></span> <span class="next"><a href="/mengqizhang/容器化/docker/docker-install.html">
        docker安装
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/mengqizhang/assets/js/app.a8d21a83.js" defer></script><script src="/mengqizhang/assets/js/2.e69c46bd.js" defer></script><script src="/mengqizhang/assets/js/60.a50c0285.js" defer></script>
  </body>
</html>
