<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>rocketmq | è’™å¤§æ‹¿</title>
    <meta name="generator" content="VuePress 1.9.5">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script charset="utf-8" src="https://my.openwrite.cn/js/readmore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="è’™å¤§æ‹¿çš„åšå®¢">
    
    <link rel="preload" href="/mengqizhang/assets/css/0.styles.a1d09170.css" as="style"><link rel="preload" href="/mengqizhang/assets/js/app.a8d21a83.js" as="script"><link rel="preload" href="/mengqizhang/assets/js/2.e69c46bd.js" as="script"><link rel="preload" href="/mengqizhang/assets/js/93.862f4101.js" as="script"><link rel="prefetch" href="/mengqizhang/assets/js/10.11174a82.js"><link rel="prefetch" href="/mengqizhang/assets/js/100.bd6553c3.js"><link rel="prefetch" href="/mengqizhang/assets/js/101.ac07962b.js"><link rel="prefetch" href="/mengqizhang/assets/js/102.79bec0af.js"><link rel="prefetch" href="/mengqizhang/assets/js/103.0c0a0808.js"><link rel="prefetch" href="/mengqizhang/assets/js/104.3ed6d392.js"><link rel="prefetch" href="/mengqizhang/assets/js/105.be22e8c8.js"><link rel="prefetch" href="/mengqizhang/assets/js/106.efa39ac4.js"><link rel="prefetch" href="/mengqizhang/assets/js/107.545ffb45.js"><link rel="prefetch" href="/mengqizhang/assets/js/108.cf23c097.js"><link rel="prefetch" href="/mengqizhang/assets/js/109.3339ffad.js"><link rel="prefetch" href="/mengqizhang/assets/js/11.08defbae.js"><link rel="prefetch" href="/mengqizhang/assets/js/110.bafd2f00.js"><link rel="prefetch" href="/mengqizhang/assets/js/12.25a3365c.js"><link rel="prefetch" href="/mengqizhang/assets/js/13.9b88bf7d.js"><link rel="prefetch" href="/mengqizhang/assets/js/14.c4d7ed3a.js"><link rel="prefetch" href="/mengqizhang/assets/js/15.b407b696.js"><link rel="prefetch" href="/mengqizhang/assets/js/16.1c08698a.js"><link rel="prefetch" href="/mengqizhang/assets/js/17.8a25e983.js"><link rel="prefetch" href="/mengqizhang/assets/js/18.e34bf6a6.js"><link rel="prefetch" href="/mengqizhang/assets/js/19.68d7669f.js"><link rel="prefetch" href="/mengqizhang/assets/js/20.de14558d.js"><link rel="prefetch" href="/mengqizhang/assets/js/21.56869e5e.js"><link rel="prefetch" href="/mengqizhang/assets/js/22.aea26c9b.js"><link rel="prefetch" href="/mengqizhang/assets/js/23.4a0b2ea3.js"><link rel="prefetch" href="/mengqizhang/assets/js/24.58c270f0.js"><link rel="prefetch" href="/mengqizhang/assets/js/25.413aed44.js"><link rel="prefetch" href="/mengqizhang/assets/js/26.5ebfde8b.js"><link rel="prefetch" href="/mengqizhang/assets/js/27.48dd442a.js"><link rel="prefetch" href="/mengqizhang/assets/js/28.d2afcf03.js"><link rel="prefetch" href="/mengqizhang/assets/js/29.b928e199.js"><link rel="prefetch" href="/mengqizhang/assets/js/3.7aafc190.js"><link rel="prefetch" href="/mengqizhang/assets/js/30.4c1cbe1a.js"><link rel="prefetch" href="/mengqizhang/assets/js/31.77073e2d.js"><link rel="prefetch" href="/mengqizhang/assets/js/32.5f66f7a2.js"><link rel="prefetch" href="/mengqizhang/assets/js/33.a8272e84.js"><link rel="prefetch" href="/mengqizhang/assets/js/34.3b8ea135.js"><link rel="prefetch" href="/mengqizhang/assets/js/35.100b34a0.js"><link rel="prefetch" href="/mengqizhang/assets/js/36.06cb633d.js"><link rel="prefetch" href="/mengqizhang/assets/js/37.f3d4b763.js"><link rel="prefetch" href="/mengqizhang/assets/js/38.733d311d.js"><link rel="prefetch" href="/mengqizhang/assets/js/39.8434909a.js"><link rel="prefetch" href="/mengqizhang/assets/js/4.000c3dbd.js"><link rel="prefetch" href="/mengqizhang/assets/js/40.dd341745.js"><link rel="prefetch" href="/mengqizhang/assets/js/41.1fcf309c.js"><link rel="prefetch" href="/mengqizhang/assets/js/42.1cc69bad.js"><link rel="prefetch" href="/mengqizhang/assets/js/43.fefa3ac7.js"><link rel="prefetch" href="/mengqizhang/assets/js/44.d284f8c1.js"><link rel="prefetch" href="/mengqizhang/assets/js/45.2564339d.js"><link rel="prefetch" href="/mengqizhang/assets/js/46.23627a8c.js"><link rel="prefetch" href="/mengqizhang/assets/js/47.cecbf290.js"><link rel="prefetch" href="/mengqizhang/assets/js/48.bad75ece.js"><link rel="prefetch" href="/mengqizhang/assets/js/49.2fa60a3e.js"><link rel="prefetch" href="/mengqizhang/assets/js/5.9832e234.js"><link rel="prefetch" href="/mengqizhang/assets/js/50.f3159852.js"><link rel="prefetch" href="/mengqizhang/assets/js/51.738bce4a.js"><link rel="prefetch" href="/mengqizhang/assets/js/52.efc0fa7e.js"><link rel="prefetch" href="/mengqizhang/assets/js/53.8d0c00f1.js"><link rel="prefetch" href="/mengqizhang/assets/js/54.a519e682.js"><link rel="prefetch" href="/mengqizhang/assets/js/55.9652e586.js"><link rel="prefetch" href="/mengqizhang/assets/js/56.c88f759b.js"><link rel="prefetch" href="/mengqizhang/assets/js/57.c6f3cd20.js"><link rel="prefetch" href="/mengqizhang/assets/js/58.0c040aca.js"><link rel="prefetch" href="/mengqizhang/assets/js/59.fc5ce388.js"><link rel="prefetch" href="/mengqizhang/assets/js/6.48810bdc.js"><link rel="prefetch" href="/mengqizhang/assets/js/60.a50c0285.js"><link rel="prefetch" href="/mengqizhang/assets/js/61.ab6648f5.js"><link rel="prefetch" href="/mengqizhang/assets/js/62.f589c0b8.js"><link rel="prefetch" href="/mengqizhang/assets/js/63.df4a0587.js"><link rel="prefetch" href="/mengqizhang/assets/js/64.e5f1a0d6.js"><link rel="prefetch" href="/mengqizhang/assets/js/65.94e94ec2.js"><link rel="prefetch" href="/mengqizhang/assets/js/66.9a0f92dc.js"><link rel="prefetch" href="/mengqizhang/assets/js/67.15d5b718.js"><link rel="prefetch" href="/mengqizhang/assets/js/68.ca0d798d.js"><link rel="prefetch" href="/mengqizhang/assets/js/69.4de863fa.js"><link rel="prefetch" href="/mengqizhang/assets/js/7.2f8cbddd.js"><link rel="prefetch" href="/mengqizhang/assets/js/70.7c1bcd59.js"><link rel="prefetch" href="/mengqizhang/assets/js/71.70f3e9ec.js"><link rel="prefetch" href="/mengqizhang/assets/js/72.ca361407.js"><link rel="prefetch" href="/mengqizhang/assets/js/73.95c0b000.js"><link rel="prefetch" href="/mengqizhang/assets/js/74.673e240c.js"><link rel="prefetch" href="/mengqizhang/assets/js/75.f5cf8815.js"><link rel="prefetch" href="/mengqizhang/assets/js/76.30b8a8fb.js"><link rel="prefetch" href="/mengqizhang/assets/js/77.0bdfd82b.js"><link rel="prefetch" href="/mengqizhang/assets/js/78.a21a9dee.js"><link rel="prefetch" href="/mengqizhang/assets/js/79.5c55aff9.js"><link rel="prefetch" href="/mengqizhang/assets/js/8.507fce61.js"><link rel="prefetch" href="/mengqizhang/assets/js/80.aa70b0e8.js"><link rel="prefetch" href="/mengqizhang/assets/js/81.1cb55142.js"><link rel="prefetch" href="/mengqizhang/assets/js/82.50b720b1.js"><link rel="prefetch" href="/mengqizhang/assets/js/83.85834849.js"><link rel="prefetch" href="/mengqizhang/assets/js/84.e2f1cab8.js"><link rel="prefetch" href="/mengqizhang/assets/js/85.c154565c.js"><link rel="prefetch" href="/mengqizhang/assets/js/86.c5dbbd95.js"><link rel="prefetch" href="/mengqizhang/assets/js/87.2b62cc5e.js"><link rel="prefetch" href="/mengqizhang/assets/js/88.5deb957d.js"><link rel="prefetch" href="/mengqizhang/assets/js/89.fbed7b0f.js"><link rel="prefetch" href="/mengqizhang/assets/js/9.70c1c418.js"><link rel="prefetch" href="/mengqizhang/assets/js/90.8efb35d5.js"><link rel="prefetch" href="/mengqizhang/assets/js/91.a3da2ba6.js"><link rel="prefetch" href="/mengqizhang/assets/js/92.1f9bf6c0.js"><link rel="prefetch" href="/mengqizhang/assets/js/94.1a0c5762.js"><link rel="prefetch" href="/mengqizhang/assets/js/95.6df0f77b.js"><link rel="prefetch" href="/mengqizhang/assets/js/96.90bef310.js"><link rel="prefetch" href="/mengqizhang/assets/js/97.fa2b5f10.js"><link rel="prefetch" href="/mengqizhang/assets/js/98.d84c6b84.js"><link rel="prefetch" href="/mengqizhang/assets/js/99.785b4a31.js">
    <link rel="stylesheet" href="/mengqizhang/assets/css/0.styles.a1d09170.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mengqizhang/" class="home-link router-link-active"><!----> <span class="site-name">è’™å¤§æ‹¿</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mengqizhang/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="https://gitee.com/DemoMeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…³äºæˆ‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mengqizhang/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="https://gitee.com/DemoMeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…³äºæˆ‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é¢è¯• ğŸ“–ğŸ”¥ğŸ”¥</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/ç¯å¢ƒé…ç½®/" class="sidebar-heading clickable"><span>ç¯å¢ƒé…ç½® ğŸ”§</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/æ¶ˆæ¯é˜Ÿåˆ—/" class="sidebar-heading clickable open"><span>æ¶ˆæ¯é˜Ÿåˆ— ğŸ”¥ğŸ”¥ğŸ”¥</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>rabbitMQ</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/" aria-current="page" class="active sidebar-link">rocketMQ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#æ ¸å¿ƒæ¦‚å¿µ" class="sidebar-link">æ ¸å¿ƒæ¦‚å¿µ</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#åº”ç”¨åœºæ™¯" class="sidebar-link">åº”ç”¨åœºæ™¯</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#æ¶æ„æ¨¡å‹" class="sidebar-link">æ¶æ„æ¨¡å‹</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#æ™®é€šæ¶ˆæ¯å‘é€çš„ä¸‰ç§æ–¹å¼" class="sidebar-link">æ™®é€šæ¶ˆæ¯å‘é€çš„ä¸‰ç§æ–¹å¼</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#å®šæ—¶æ¶ˆæ¯å’Œå»¶è¿Ÿæ¶ˆæ¯" class="sidebar-link">å®šæ—¶æ¶ˆæ¯å’Œå»¶è¿Ÿæ¶ˆæ¯</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#é¡ºåºæ¶ˆæ¯" class="sidebar-link">é¡ºåºæ¶ˆæ¯</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#é›†ç¾¤æ¶ˆè´¹-å’Œ-å¹¿æ’­æ¶ˆè´¹" class="sidebar-link">é›†ç¾¤æ¶ˆè´¹ å’Œ å¹¿æ’­æ¶ˆè´¹</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#æ¶ˆæ¯è¿‡æ»¤" class="sidebar-link">æ¶ˆæ¯è¿‡æ»¤</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#serverå’Œbroker" class="sidebar-link">serverå’Œbroker</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#å¯åŠ¨-namesrv" class="sidebar-link">å¯åŠ¨ namesrv</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#å¯åŠ¨-broker" class="sidebar-link">å¯åŠ¨ broker</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#åœæ­¢-namesrv-å’Œ-broker" class="sidebar-link">åœæ­¢ namesrv å’Œ broker</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#æµ‹è¯•å¯åŠ¨æ¶ˆæ¯ç”Ÿäº§è€…" class="sidebar-link">æµ‹è¯•å¯åŠ¨æ¶ˆæ¯ç”Ÿäº§è€…</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#æ§åˆ¶é¢æ¿" class="sidebar-link">æ§åˆ¶é¢æ¿</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rocketMQ/#docker-å¯åŠ¨" class="sidebar-link">docker å¯åŠ¨</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/æ•°æ®å±‚/" class="sidebar-heading clickable"><span>æ•°æ®å±‚ ğŸ”¥ğŸ”¥ğŸ”¥</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/å®¹å™¨åŒ–/" class="sidebar-heading clickable"><span>å®¹å™¨åŒ– ğŸ³</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java â˜•ï¸</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åˆ†å¸ƒå¼äº‹åŠ¡</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åˆ†å¸ƒå¼ç³»ç»Ÿ â˜ï¸</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webSocket</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ELK ğŸ”</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nginx ğŸ‡·ğŸ‡º</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jenkins ğŸ‘´</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æœåŠ¡å™¨ ğŸ’°</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æµ‹è¯• ğŸ˜“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç›‘æ§å‘Šè­¦</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rocketmq"><a href="#rocketmq" class="header-anchor">#</a> rocketmq</h1> <p>RocketMQæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ¶ˆæ¯å’Œæµæ•°æ®å¹³å°ï¼Œå…·æœ‰ä½å»¶è¿Ÿã€é«˜æ€§èƒ½ã€é«˜å¯é æ€§ã€ä¸‡äº¿çº§å®¹é‡å’Œçµæ´»çš„æ‰©å±•æ€§ã€‚RocketMQæ˜¯2012å¹´é˜¿é‡Œå·´å·´çš„ç¬¬ä¸‰ä»£åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œ
2016å¹´11æœˆ21æ—¥ï¼Œé˜¿é‡Œå·´å·´å‘é˜¿Apacheè½¯ä»¶åŸºé‡‘ä¼šæèµ äº†RocketMQï¼Œå®ç°äº†é¢å‘ä¸–ç•Œå¼€æºã€‚ç¬¬äºŒå¹´2æœˆ20æ—¥ï¼ŒApacheè½¯ä»¶åŸºé‡‘ä¼šå®£å¸ƒApache RocketMQæˆä¸ºé¡¶çº§é¡¹ç›®ã€‚</p> <h2 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="header-anchor">#</a> æ ¸å¿ƒæ¦‚å¿µ</h2> <ul><li><p>Topic ï¼š æ¶ˆæ¯ä¸»é¢˜ï¼Œä¸€çº§æ¶ˆæ¯ç±»å‹ï¼Œç”Ÿäº§è€…å‘å…¶å‘é€æ¶ˆæ¯</p></li> <li><p>ç”Ÿäº§è€… ï¼š è´Ÿè´£ç”Ÿäº§æ¶ˆæ¯å‘é€æ¶ˆæ¯è‡³ Topic</p></li> <li><p>æ¶ˆè´¹è€… ï¼š æ¶ˆæ¯è®¢é˜…è€…ï¼Œè´Ÿè´£ä»Topicæ¥æ”¶æ¶ˆæ¯ï¼Œå¹¶ä¸”æ¶ˆè´¹æ¶ˆæ¯</p></li> <li><p>æ¶ˆæ¯  ï¼š  æ•°æ®å’Œå±æ€§çš„ç»„åˆ</p></li> <li><p>æ¶ˆæ¯å±æ€§ ï¼š ç”Ÿäº§è€…å¯ä»¥ä¸ºæ¶ˆæ¯å®šä¹‰çš„å±æ€§ï¼ŒåŒ…å« Message Key å’Œ Tag</p> <ul><li>Message Key ï¼š æ¶ˆæ¯ä¸šåŠ¡çš„æ ‡è¯†ï¼Œå”¯ä¸€æ ‡è¯†æŸä¸ªä¸šåŠ¡é€»è¾‘ï¼Œå¯ä»¥æ ¹æ®è®¾ç½®çš„ Message Keyè¿›è¡ŒæŸ¥è¯¢</li> <li>Tag ï¼š  æ¶ˆæ¯æ ‡ç­¾ï¼ŒäºŒçº§æ¶ˆæ¯ç±»å‹ï¼Œç”¨æ¥è¿›ä¸€æ­¥åŒºåˆ†æŸä¸ª Topicä¸‹çš„æ¶ˆæ¯åˆ†ç±»ï¼Œæ¶ˆè´¹è€…å¯ä»¥é€šè¿‡ Tagå¯¹æ¶ˆæ¯è¿›è¡Œè¿‡æ»¤</li> <li>Message ID ï¼š æ¶ˆæ¯çš„å”¯ä¸€æ ‡è¯†ï¼Œç”±RocketMQæœåŠ¡è‡ªåŠ¨ç”Ÿæˆ</li></ul></li> <li><p>Group ï¼š ä¸€ç±»ç”Ÿäº§è€… æˆ– æ¶ˆè´¹è€…ï¼Œè¿™ç±»ç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…é€šäº§æ˜¯äº§ç”Ÿæˆ–è€…æ¶ˆè´¹åŒä¸€ç±»æ¶ˆæ¯ï¼Œå¹¶ä¸”æ¶ˆæ¯å‘å¸ƒæˆ–è®¢é˜…é€»è¾‘ä¸€è‡´
Group ID ï¼š groupçš„id</p></li> <li><p>Name Server ï¼š æ³¨å†Œä¸­å¿ƒçš„è§’è‰²ï¼Œå¯ä»¥é›†ç¾¤éƒ¨ç½²ï¼Œè´Ÿè´£ç®¡ç† Brokerçš„ipç«¯å£ç­‰å…ƒæ•°æ®</p></li> <li><p>Broker ï¼š è´Ÿè´£å¤„ç†æ¶ˆæ¯ã€å­˜å‚¨æ¶ˆæ¯ã€è½¬å‘æ¶ˆæ¯ã€‚åˆ†ä¸º MasterBrokerã€SlaveBrokerï¼Œä¸€ä¸ªMasterBrokerå¯ä»¥å¯¹åº”å¤šä¸ªSlaveBroker
ä½†æ˜¯ï¼Œä¸€ä¸ªSlaveBrokeråªèƒ½å¯¹åº”ä¸€ä¸ªMasterBrokerã€‚
Brokerå¯åŠ¨åè¦å®Œæˆä¸€æ¬¡å°†è‡ªå·±æ³¨å†Œè‡³Name Serverçš„æ“ä½œï¼Œé•¿è¿æ¥ï¼Œæ¯30så‘é€ä¸€æ¡å¿ƒè·³ï¼ˆæ±‡æŠ¥topicè·¯ç”±ä¿¡æ¯ï¼‰</p></li> <li><p>åˆ†åŒº ï¼š å³Topic Partitionï¼Œç‰©ç†ä¸Šçš„æ¦‚å¿µã€‚æ¯ä¸ªTopicåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†åŒºã€‚</p></li></ul> <h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="header-anchor">#</a> åº”ç”¨åœºæ™¯</h2> <ul><li>åº”ç”¨è§£è€¦ ï¼š
ç”¨æˆ·æ³¨å†ŒåŠ¨ä½œï¼Œè°ƒç”¨ç”¨æˆ·ç³»ç»Ÿï¼Œæ³¨å†ŒæˆåŠŸåï¼Œå‘é€çŸ­ä¿¡ï¼ˆé€šçŸ¥ç³»ç»Ÿï¼‰ã€å¢åŠ ç§¯åˆ†ï¼ˆç§¯åˆ†ç³»ç»Ÿï¼‰ã€é‚€è¯·åˆ†é”€ï¼ˆåˆ†é”€ç³»ç»Ÿï¼‰ç­‰ï¼Œå‡å¯ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥åšå¼‚æ­¥æ“ä½œã€‚
è‹¥å…¶ä¸­ä¸€ä¸ªç³»ç»Ÿå‡ºç°å¼‚å¸¸åˆ™æ— æ³•å®Œæˆæ³¨å†Œæµç¨‹ã€‚</li> <li>æµé‡å‰Šå³°
ç§’æ€åœºæ™¯ä¸‹åªå…è®¸é˜Ÿåˆ—çš„éƒ¨åˆ†ç”¨æˆ·è¿›è¡Œç§’æ€ï¼Œé¿å…è¿‡å¤šè¯·æ±‚æ‰“åˆ°åº”ç”¨ã€‚</li> <li>é¡ºåºæ”¶å‘
<ul><li>å…¨åŒºé¡ºåºï¼šå¯¹äºåŒä¸€ä¸ªtopicï¼Œæ‰€æœ‰çš„æ¶ˆæ¯éƒ½éœ€è¦æŒ‰ç…§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é¡ºåºï¼Œè¿›è¡Œé¡ºåºå‘å¸ƒã€é¡ºåºæ¶ˆè´¹</li> <li>åˆ†åŒºé¡ºåºï¼šå¯¹äºåŒä¸€ä¸ªtopicï¼Œæ‰€æœ‰çš„æ¶ˆæ¯æ ¹æ® Sharding keyè¿›è¡ŒåŒºå—åˆ†åŒºï¼ŒåŒä¸€ä¸ªåˆ†åŒºçš„æ¶ˆæ¯æŒ‰ç…§FIFOé¡ºåºè¿›è¡Œæ¶ˆæ¯å‘é€ã€æ¶ˆæ¯æ¶ˆè´¹ã€‚å¯ä»¥ä¿è¯ä¸€ä¸ªæ¶ˆæ¯è¢«ä¸€ä¸ªè¿›è¡Œæ¶ˆè´¹</li></ul></li> <li>åˆ†å¸ƒå¼äº‹åŠ¡ä¸€è‡´æ€§</li> <li>åˆ†å¸ƒå¼ç¼“å­˜åŒæ­¥ï¼š ç”µå•†ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªå•†å“çš„æ¶æ„éƒ½ä¼šäº‹å®å˜åŒ–ï¼Œä½¿ç”¨ç¼“å­˜æŠ€æœ¯ä¹Ÿæ— æ³•æ»¡è¶³å¯¹å•†å“ä»·æ ¼è®¿é—®çš„éœ€æ±‚ã€‚
ä½¿ç”¨ RocketMQçš„å¹¿æ’­æœºåˆ¶ï¼Œä¸€æ¡æ¶ˆæ¯å¯ä»¥è¢«æ‰€æœ‰èŠ‚ç‚¹æ¶ˆæ¯ä¸€æ¬¡ï¼Œç›¸å½“äºæŠŠæœ€æ–°çš„ä»·æ ¼ä¿¡æ¯åŒæ­¥åˆ°äº†æ¯å°çš„æœºå™¨ä¸Šï¼Œå–ä»£äº†ç¼“å­˜çš„ä½œç”¨ã€‚</li></ul> <h2 id="æ¶æ„æ¨¡å‹"><a href="#æ¶æ„æ¨¡å‹" class="header-anchor">#</a> æ¶æ„æ¨¡å‹</h2> <p><a data-fancybox="" title="111" href="rocketmqæ¶æ„æ¨¡å‹.png"><img src="rocketmq%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%9E%8B.png" alt="æ¶æ„æ¨¡å‹"></a></p> <ul><li>Name Server ï¼š æ³¨å†Œä¸­å¿ƒçš„è§’è‰²ï¼Œå¯ä»¥é›†ç¾¤éƒ¨ç½²ï¼Œè´Ÿè´£ç®¡ç† Brokerçš„ipç«¯å£ç­‰å…ƒæ•°æ®</li> <li>Broker ï¼š è´Ÿè´£å¤„ç†æ¶ˆæ¯ã€å­˜å‚¨æ¶ˆæ¯ã€è½¬å‘æ¶ˆæ¯ã€‚åˆ†ä¸º MasterBrokerã€SlaveBrokerï¼Œä¸€ä¸ªMasterBrokerå¯ä»¥å¯¹åº”å¤šä¸ªSlaveBroker
ä½†æ˜¯ï¼Œä¸€ä¸ªSlaveBrokeråªèƒ½å¯¹åº”ä¸€ä¸ªMasterBrokerã€‚
Brokerå¯åŠ¨åè¦å®Œæˆä¸€æ¬¡å°†è‡ªå·±æ³¨å†Œè‡³Name Serverçš„æ“ä½œï¼Œé•¿è¿æ¥ï¼Œæ¯30så‘é€ä¸€æ¡å¿ƒè·³ï¼ˆæ±‡æŠ¥topicè·¯ç”±ä¿¡æ¯ï¼‰</li> <li>æ¶ˆæ¯ç”Ÿäº§è€…ï¼šä¸Name Serverä¸­çš„å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆéšæœºï¼‰å»ºç«‹è¿æ¥ ï¼ˆé•¿è¿æ¥ï¼‰ï¼Œå®šæœŸä» Name serverä¸­è¯»å– Topicè·¯ç”±ä¿¡æ¯ï¼Œå¹¶å‘æä¾›TopicæœåŠ¡çš„Master Brokerå»ºç«‹é•¿è¿æ¥ï¼Œå®šæ—¶å‘ Master Brokerå‘é€å¿ƒè·³åŒ…</li> <li>æ¶ˆæ¯æ¶ˆè´¹è€…ï¼šä¸Name Serverä¸­çš„å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆéšæœºï¼‰å»ºç«‹è¿æ¥ ï¼ˆé•¿è¿æ¥ï¼‰ï¼Œå®šæœŸä» Name serverä¸­è¯»å– Topicè·¯ç”±ä¿¡æ¯ï¼Œå¹¶å‘æä¾›TopicæœåŠ¡çš„Master Brokerã€ Slave Brokerå»ºç«‹é•¿è¿æ¥ï¼Œå®šæ—¶å‘ Master Brokerã€Slave Brokerå‘é€å¿ƒè·³åŒ…
æ¶ˆæ¯æ¶ˆè´¹è€…æ—¢å¯ä»¥ä»Master Brokerè®¢é˜…æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥ä»Slave Brokerè®¢é˜…æ¶ˆæ¯ï¼Œè®¢é˜…è§„åˆ™ç”±Brokeré…ç½®å†³å®šã€‚</li></ul> <h2 id="æ™®é€šæ¶ˆæ¯å‘é€çš„ä¸‰ç§æ–¹å¼"><a href="#æ™®é€šæ¶ˆæ¯å‘é€çš„ä¸‰ç§æ–¹å¼" class="header-anchor">#</a> æ™®é€šæ¶ˆæ¯å‘é€çš„ä¸‰ç§æ–¹å¼</h2> <p><a data-fancybox="" title="111" href="æ™®é€šæ¶ˆæ¯-å¼‚æ­¥å‘é€.png"><img src="%E4%B8%89%E7%A7%8D%E5%8F%91%E9%80%81%E6%96%B9%E5%BC%8F%E6%AF%94%E8%BE%83.png" alt="img.png"></a></p> <ul><li>åŒæ­¥å‘é€ ï¼ˆSyncï¼‰ ï¼š æŒ‡çš„æ¶ˆæ¯å‘é€æ–¹å‘å‡ºä¸€æ¡æ¶ˆæ¯åï¼Œä¼šæ”¶åˆ°RocketMQæœåŠ¡ç«¯åŒæ­¥å“åº”ä¹‹åæ‰å‘ä¸‹ä¸€æ¡æ¶ˆæ¯çš„é€šè®¯æ–¹å¼ã€‚</li></ul> <ul><li>åº”ç”¨åœºæ™¯ï¼š é‡è¦çš„é‚®ä»¶é€šçŸ¥ã€æŠ¥åçŸ­ä¿¡é€šçŸ¥ã€è¥é”€çŸ­ä¿¡ç³»ç»Ÿç­‰
<a data-fancybox="" title="111" href="æ™®é€šæ¶ˆæ¯-åŒæ­¥å‘é€.png"><img src="%E6%99%AE%E9%80%9A%E6%B6%88%E6%81%AF-%E5%90%8C%E6%AD%A5%E5%8F%91%E9%80%81.png" alt="img.png"></a></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>SendResult sendResult = rocketMQTemplate.syncSend(&quot;broker-a&quot;, message);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>å¼‚æ­¥å‘é€ ï¼ˆAsyncï¼‰ ï¼š æŒ‡çš„å‘é€æ–¹å‘é€æ¶ˆæ¯åï¼Œä¸ç­‰RocketMQæœåŠ¡ç«¯å“åº”ï¼Œå°±èƒ½å‘ä¸‹ä¸€æ¡æ¶ˆæ¯çš„é€šè®¯æ–¹å¼ã€‚
<ul><li>åº”ç”¨åœºæ™¯ï¼š å¼‚æ­¥å‘é€ä¸€èˆ¬ç”¨äºé“¾è·¯è€—æ—¶è¾ƒé•¿ã€å¯¹äºå“åº”æ—¶é—´è¾ƒä¸ºæ•æ„Ÿçš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼š è§†é¢‘ä¸Šä¼ åé€šçŸ¥å¯åŠ¨è½¬ç æœåŠ¡ï¼Œè½¬ç å®Œæˆåæ¨é€è½¬ç é€šçŸ¥ç­‰ã€‚</li></ul></li></ul> <p><a data-fancybox="" title="111" href="æ™®é€šæ¶ˆæ¯-å¼‚æ­¥å‘é€.png"><img src="%E6%99%AE%E9%80%9A%E6%B6%88%E6%81%AF-%E5%BC%82%E6%AD%A5%E5%8F%91%E9%80%81.png" alt="img_1.png"></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rocketMQTemplate.asyncSend(&quot;broker-a&quot;, message, new SendCallback() {
    @Override
    public void onSuccess(SendResult sendResult) {
        log.info(&quot;å¼‚æ­¥å‘é€æ¶ˆæ¯ç»“æœï¼š{}&quot;,sendResult);
    }

    @Override
    public void onException(Throwable throwable) {
        log.info(&quot;å¼‚æ­¥å‘é€æ¶ˆæ¯å¼‚å¸¸ï¼š{}&quot;,throwable);
    }
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>å•å‘å‘é€ ï¼ˆOnewayï¼‰:  å‘é€æ–¹åªè´Ÿè´£å‘é€æ¶ˆæ¯ï¼Œä¸ç­‰æœåŠ¡ç«¯è¿”å›å“åº”ä¸”æ²¡æœ‰å›è°ƒå‡½æ•°å‡ºå‘ï¼Œå³åªå‘é€è¯·æ±‚ä¸ç­‰å¾…åº”ç­”ï¼Œæ­¤æ–¹å¼è€—æ—¶éå¸¸çŸ­ï¼Œä¸€èˆ¬åœ¨å¾®ç§’çº§åˆ«</li></ul> <ul><li>åº”ç”¨åœºæ™¯ï¼š é€‚ç”¨äºè€—æ—¶éå¸¸çŸ­ï¼Œä½†æ˜¯å¯¹å¯é å‹è¦æ±‚ä¸é«˜çš„åœºæ™¯ ï¼šæ¯”å¦‚ ï¼š æ—¥å¿—æ”¶é›†</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>rocketMQTemplate.sendOneWay(&quot;broker-a&quot;, message);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a data-fancybox="" title="111" href="æ™®é€šæ¶ˆæ¯-å•å‘å‘é€.png"><img src="%E6%99%AE%E9%80%9A%E6%B6%88%E6%81%AF-%E5%8D%95%E5%90%91%E5%8F%91%E9%80%81.png" alt="img_2.png"></a></p> <h2 id="å®šæ—¶æ¶ˆæ¯å’Œå»¶è¿Ÿæ¶ˆæ¯"><a href="#å®šæ—¶æ¶ˆæ¯å’Œå»¶è¿Ÿæ¶ˆæ¯" class="header-anchor">#</a> å®šæ—¶æ¶ˆæ¯å’Œå»¶è¿Ÿæ¶ˆæ¯</h2> <p>å®šæ—¶æ¶ˆæ¯ï¼šProducerå°†æ¶ˆæ¯å‘é€åˆ°RocketMQæœåŠ¡ç«¯ï¼Œä½†æ˜¯ä¸å¸Œæœ›ç«‹é©¬æŠ•é€’è¿™æ¡æ¶ˆæ¯ï¼Œè€Œæ˜¯æ¨è¿Ÿåˆ°å½“å‰æ—¶é—´åçš„åæŸä¸€ä¸ªæ—¶é—´å†æŠ•é€’ç»™Consumerè¿›è¡Œæ¶ˆè´¹ã€‚
å»¶è¿Ÿæ¶ˆæ¯ï¼šProducerå°†æ¶ˆæ¯å‘é€åˆ°RocketMQæœåŠ¡ç«¯ï¼Œä½†æ˜¯ä¸å¸Œæœ›ç«‹é©¬æŠ•é€’è¿™æ¡æ¶ˆæ¯ï¼Œè€Œæ˜¯å»¶è¿Ÿä¸€å®šæ—¶é—´åå†æŠ•é€’ç»™Consumerè¿›è¡Œæ¶ˆè´¹ã€‚</p> <p>ä½¿ç”¨åœºæ™¯ï¼š è´­ç‰©è½¦çš„å•†å“ 30åˆ†é’Ÿå¤±æ•ˆã€è®¢å•é€åˆ°å7å¤©å†…è‡ªåŠ¨ç¡®è®¤æ”¶è´§</p> <h2 id="é¡ºåºæ¶ˆæ¯"><a href="#é¡ºåºæ¶ˆæ¯" class="header-anchor">#</a> é¡ºåºæ¶ˆæ¯</h2> <p>é¡ºåºæ¶ˆæ¯å¸¸ç”¨äºé‡‘èè¯åˆ¸ã€ç”µå•†ä¸šåŠ¡å¯¹äºæ¶ˆæ¯æŒ‡ä»¤é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚çš„åœºæ™¯ã€‚
é¡ºåºæ¶ˆæ¯æŒ‡çš„æ˜¯æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯å¯¹äºä¸€ä¸ªæŒ‡å®šçš„Topicï¼Œæ¶ˆæ¯ä¸¥æ ¼æŒ‰ç…§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„è§„åˆ™è¿›è¡Œæ¶ˆæ¯å‘å¸ƒå’Œæ¶ˆæ¯æ¶ˆè´¹ã€‚å³å…ˆå‘å¸ƒçš„å…ˆæ¶ˆè´¹ï¼Œåå‘å¸ƒçš„åæ¶ˆè´¹
é¡ºåºæ¶ˆæ¯åˆ†ä¸º åˆ†åŒºé¡ºåºæ¶ˆæ¯ å’Œ å…¨å±€é¡ºåºæ¶ˆæ¯</p> <ul><li><p>å…¨å±€é¡ºåºæ¶ˆæ¯ï¼šå¯¹äºåŒä¸€ä¸ªtopicï¼Œæ‰€æœ‰çš„æ¶ˆæ¯éƒ½éœ€è¦æŒ‰ç…§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é¡ºåºï¼Œè¿›è¡Œé¡ºåºå‘å¸ƒã€é¡ºåºæ¶ˆè´¹</p></li> <li><p>åˆ†åŒºé¡ºåºæ¶ˆè´¹ï¼šå¯¹äºåŒä¸€ä¸ªtopicï¼Œæ‰€æœ‰çš„æ¶ˆæ¯æ ¹æ® Sharding keyè¿›è¡ŒåŒºå—åˆ†åŒºï¼ŒåŒä¸€ä¸ªåˆ†åŒºçš„æ¶ˆæ¯æŒ‰ç…§FIFOé¡ºåºè¿›è¡Œæ¶ˆæ¯å‘é€ã€æ¶ˆæ¯æ¶ˆè´¹ã€‚å¯ä»¥ä¿è¯ä¸€ä¸ªæ¶ˆæ¯è¢«ä¸€ä¸ªè¿›è¡Œæ¶ˆè´¹</p></li></ul> <h2 id="é›†ç¾¤æ¶ˆè´¹-å’Œ-å¹¿æ’­æ¶ˆè´¹"><a href="#é›†ç¾¤æ¶ˆè´¹-å’Œ-å¹¿æ’­æ¶ˆè´¹" class="header-anchor">#</a> é›†ç¾¤æ¶ˆè´¹ å’Œ å¹¿æ’­æ¶ˆè´¹</h2> <p>æ¶ˆè´¹è€…ä½¿ç”¨ç›¸åŒçš„Group IDå±äºåŒä¸€ä¸ªé›†ç¾¤ï¼ŒåŒä¸€ä¸ªé›†ç¾¤ä¸‹çš„æ¶ˆè´¹è€…æ¶ˆè´¹é€»è¾‘å¿…é¡»ä¸€è‡´ï¼ˆåŒ…å«Tagçš„ä½¿ç”¨ï¼‰ã€‚</p> <ul><li><p>é›†ç¾¤æ¶ˆè´¹ ï¼š ä»»æ„ä¸€æ¡æ¶ˆæ¯åªè¦è¢«æ¶ˆè´¹è€…é›†ç¾¤ï¼ˆç›¸åŒçš„Group IDï¼‰ä¸­ä»»æ„ä¸€ä¸ªæ¶ˆè´¹å¤„ç†å‡ ä¸ª</p> <ul><li>é€‚ç”¨åœºæ™¯ï¼š é€‚åˆæ¶ˆè´¹ç«¯é›†ç¾¤éƒ¨ç½²çš„æƒ…å†µä¸‹ï¼Œæ¯æ¡æ¶ˆæ¯åªéœ€è¦è¢«å¤„ç†ä¸€æ¬¡çš„åœºæ™¯</li></ul></li> <li><p>å¹¿æ’­æ¶ˆè´¹ ï¼š ä¼šå°†æ¶ˆæ¯æ¨é€ç»™é›†ç¾¤å†…çš„çš„æ‰€æœ‰æ¶ˆè´¹è€…ï¼Œä¿è¯è‡³å°‘æ¯ä¸ªæ¶ˆè´¹è€…éƒ½èƒ½æ¶ˆè´¹ä¸€æ¬¡</p> <ul><li>é€‚ç”¨åœºæ™¯ï¼šé€‚åˆæ¶ˆè´¹ç«¯é›†ç¾¤éƒ¨ç½²çš„æƒ…å†µä¸‹ï¼Œæ¯æ¡æ¶ˆè´¹éƒ½è¦è¢«é›†ç¾¤ä¸‹çš„æ¯ä¸ªæ¶ˆè´¹è€…å¤„ç†çš„åœºæ™¯</li></ul></li></ul> <p><a data-fancybox="" title="111" href="é›†ç¾¤æ¶ˆè´¹å’Œå¹¿æ’­æ¶ˆè´¹.png"><img src="%E9%9B%86%E7%BE%A4%E6%B6%88%E8%B4%B9%E5%92%8C%E5%B9%BF%E6%92%AD%E6%B6%88%E8%B4%B9.png" alt="img.png"></a></p> <h2 id="æ¶ˆæ¯è¿‡æ»¤"><a href="#æ¶ˆæ¯è¿‡æ»¤" class="header-anchor">#</a> æ¶ˆæ¯è¿‡æ»¤</h2> <p>-è¡¨è¾¾å¼è¿‡æ»¤ï¼š</p> <ul><li>Tagè¿‡æ»¤:
æ¶ˆè´¹è€… ï¼šé…ç½®æ¶ˆæ¯è¿‡æ»¤è§„åˆ™ï¼ŒselectorType = SelectorType.TAG , selectorExpression = &quot;tag1||tag2&quot;</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Component
@RocketMQMessageListener(consumerGroup = &quot;mengqizhang-group&quot;,
        topic = &quot;mengqizhang&quot;,
        selectorExpression = &quot;tag1||tag2&quot;,
        selectorType = SelectorType.TAG)
@Slf4j
public class ConsumerFilter implements RocketMQListener&lt;MessageExt&gt; {
    @Override
    public void onMessage(MessageExt message) {
        String tag = message.getTags();
        String msg = new String(message.getBody());
        log.info(&quot;tag: {},msg :{} &quot;,tag,msg);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ç”Ÿäº§è€… ï¼šæ·»åŠ tagï¼Œä½¿ç”¨topic:tagçš„æ–¹å¼</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rocketMQTemplate.syncSend(&quot;topic:tag1&quot;,MessageBuilder.withPayload(&quot;æ¶ˆæ¯è¿‡æ»¤tag1&quot;).build());
rocketMQTemplate.syncSend(&quot;topic:tag2&quot;,MessageBuilder.withPayload(&quot;æ¶ˆæ¯è¿‡æ»¤tag2&quot;).build());
rocketMQTemplate.syncSend(&quot;topic:tag3&quot;,MessageBuilder.withPayload(&quot;æ¶ˆæ¯è¿‡æ»¤tag3&quot;).build());
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>SQLè¿‡æ»¤</li></ul> <ul><li>è¡¨è¾¾å¼</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>æ•°å­—æ¯”è¾ƒï¼Œå¦‚&gt;ï¼Œ&gt;=ï¼Œ&lt;ï¼Œ&lt;=ï¼ŒBETWEENï¼Œ=ï¼›
å­—ç¬¦æ¯”è¾ƒï¼Œå¦‚ï¼š=ï¼Œ&lt;&gt;ï¼ŒINï¼›
IS NULL or IS NOT NULL;
é€»è¾‘è¿ç®—ç¬¦ï¼šAND, OR, NOT;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>å¸¸é‡ç±»å‹:
æ•°å€¼ï¼Œå¦‚ï¼š123, 3.1415ï¼›
å­—ç¬¦, å¦‚ï¼šâ€˜abcâ€™, å¿…é¡»ä½¿ç”¨å•å¼•å·;
NULLï¼Œç‰¹æ®Šå¸¸é‡
Boolean, TRUE or FALSE;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>ç”Ÿäº§è€…</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>rocketMQTemplate.convertAndSend(&quot;mengqizhang-sql-topic&quot;,MessageBuilder.withPayload(&quot;sql92è¿‡æ»¤ï¼šmengqizhangåœ¨å¹¿å·&quot;).build(),new HashMap&lt;String,Object&gt;(){{put(&quot;name&quot;,&quot;mengqizhang&quot;);put(&quot;address&quot;,&quot;guangzhou&quot;);}});
rocketMQTemplate.convertAndSend(&quot;mengqizhang-sql-topic&quot;,MessageBuilder.withPayload(&quot;sql92è¿‡æ»¤ï¼šmengqizhangåœ¨æ­å·&quot;).build(),new HashMap&lt;String,Object&gt;(){{put(&quot;name&quot;,&quot;mengqizhang&quot;);put(&quot;address&quot;,&quot;hangzhou&quot;);}});
rocketMQTemplate.convertAndSend(&quot;mengqizhang-sql-topic&quot;,MessageBuilder.withPayload(&quot;sql92è¿‡æ»¤ï¼šmengqizhangåœ¨èµ£å·&quot;).build(),new HashMap&lt;String,Object&gt;(){{put(&quot;name&quot;,&quot;mengqizhang&quot;);put(&quot;address&quot;,&quot;ganzhou&quot;);}});
rocketMQTemplate.convertAndSend(&quot;mengqizhang-sql-topic&quot;,MessageBuilder.withPayload(&quot;sql92è¿‡æ»¤ï¼šmengqizhangåœ¨ç æµ·&quot;).build(),new HashMap&lt;String,Object&gt;(){{put(&quot;name&quot;,&quot;mengqizhang&quot;);put(&quot;address&quot;,&quot;zhuhai&quot;);}});

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>æ¶ˆè´¹è€…</li></ul> <p>selectorTypeï¼šæŒ‡æ˜äº†æ¶ˆæ¯è¿‡æ»¤ä½¿ç”¨SQL92æ–¹å¼
selectorExpressionï¼šæŒ‡æ˜äº†åªèƒ½æ¥æ”¶æ¶ˆæ¯å±æ€§ï¼ˆheaderï¼‰ä¸­a=1çš„æ¶ˆæ¯ï¼Œ é»˜è®¤å€¼*ï¼Œä»£è¡¨å…¨éƒ¨
messageModel:æŒ‡æ˜äº†æ¶ˆæ¯æ¶ˆè´¹çš„æ¨¡å¼ï¼Œ
é»˜è®¤å€¼ä¸ºMessageModel.CLUSTERINGï¼ˆæ¯æ¡æ¶ˆæ¯åªèƒ½æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹ï¼‰ï¼›
MessageModel.BROADCASTING(å¹¿æ’­æ¶ˆæ¯ï¼Œæ‰€æœ‰è®¢é˜…è€…éƒ½èƒ½æ”¶åˆ°æ¶ˆæ¯)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Component
@RocketMQMessageListener(consumerGroup = &quot;mengqizhang-sql-group&quot;,
        topic = &quot;mengqizhang-sql-topic&quot;,
        messageModel = MessageModel.BROADCASTING,
        selectorExpression = &quot;name= 'mengqizhang' AND address = 'hangzhou' &quot;,
        selectorType = SelectorType.SQL92)
@Slf4j
public class ConsumerFilterSQL implements RocketMQListener&lt;MessageExt&gt; {
    @Override
    public void onMessage(MessageExt message) {
        String tag = message.getTags();
        String msg = new String(message.getBody());
        log.info(&quot;sql filter : {},msg :{} &quot;,tag,msg);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>é—®é¢˜:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Caused by: java.lang.IllegalStateException: Failed to start RocketMQ push consumer
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.start(DefaultRocketMQListenerContainer.java:281) ~[rocketmq-spring-boot-2.1.1.jar:2.1.1]
	at org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration.registerContainer(ListenerContainerConfiguration.java:120) ~[rocketmq-spring-boot-2.1.1.jar:2.1.1]
	... 13 common frames omitted
Caused by: org.apache.rocketmq.client.exception.MQClientException: CODE: 1  DESC: The broker does not support consumer to filter message by SQL92
For more information, please visit the url, http://rocketmq.apache.org/docs/faq/
	at org.apache.rocketmq.client.impl.MQClientAPIImpl.checkClientInBroker(MQClientAPIImpl.java:2240) ~[rocketmq-client-4.7.1.jar:4.7.1]
	at org.apache.rocketmq.client.impl.factory.MQClientInstance.checkClientInBroker(MQClientInstance.java:449) ~[rocketmq-client-4.7.1.jar:4.7.1]
	at org.apache.rocketmq.client.impl.consumer.DefaultMQPushConsumerImpl.start(DefaultMQPushConsumerImpl.java:654) ~[rocketmq-client-4.7.1.jar:4.7.1]
	at org.apache.rocketmq.client.consumer.DefaultMQPushConsumer.start(DefaultMQPushConsumer.java:698) ~[rocketmq-client-4.7.1.jar:4.7.1]
	at org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer.start(DefaultRocketMQListenerContainer.java:279) ~[rocketmq-spring-boot-2.1.1.jar:2.1.1]
	... 14 common frames omitted    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è§£å†³ ï¼š é»˜è®¤æƒ…å†µä¸‹brokeæ²¡æœ‰å¼€å¯å¯¹SQLè¯­æ³•çš„æ”¯æŒï¼Œéœ€è¦ä¿®æ”¹é…ç½®ï¼Œé…ç½® broker.conf</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>enablePropertyFilter=true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="rocketmq-2"><a href="#rocketmq-2" class="header-anchor">#</a> RocketMQ</h1> <h2 id="serverå’Œbroker"><a href="#serverå’Œbroker" class="header-anchor">#</a> serverå’Œbroker</h2> <p>server ï¼š ä¿å­˜brokerçš„ä¿¡æ¯ï¼Œipï¼Œç«¯å£ï¼Œç­‰å…ƒæ•°æ®ä¿¡æ¯ï¼ˆç±»ä¼¼æ³¨å†Œä¸­å¿ƒï¼‰
broker ï¼š å®é™…å¤„ç†æ¶ˆæ¯</p> <h2 id="å¯åŠ¨-namesrv"><a href="#å¯åŠ¨-namesrv" class="header-anchor">#</a> å¯åŠ¨ namesrv</h2> <p>nohup sh bin/mqnamesrv -n 192.168.2.11:9876 &gt; server.out &amp;</p> <h2 id="å¯åŠ¨-broker"><a href="#å¯åŠ¨-broker" class="header-anchor">#</a> å¯åŠ¨ broker</h2> <p>nohup sh bin/mqbroker â€n 192.168.2.11:9876 autoCreateTopicEnable=true â€c conf/broker.conf &gt; broker.out &amp;</p> <ul><li>conf/broker.conf
ç¼–è¾‘brokeré…ç½®æ–‡ä»¶ conf/broker.conf</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>namesrvAddr=127.0.0.1:9876
brokerIP1=192.168.2.11
brokerClusterName = DefaultCluster
brokerName = broker-a
brokerId = 0
deleteWhen = 04
fileReservedTime = 48
brokerRole = ASYNC_MASTER
flushDiskType = ASYNC_FLUSH
autoCreateTopicEnable=true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="åœæ­¢-namesrv-å’Œ-broker"><a href="#åœæ­¢-namesrv-å’Œ-broker" class="header-anchor">#</a> åœæ­¢ namesrv å’Œ broker</h2> <p>sh bin/mqshutdown broker</p> <p>sh bin/mqshutdown namesrv</p> <h2 id="æµ‹è¯•å¯åŠ¨æ¶ˆæ¯ç”Ÿäº§è€…"><a href="#æµ‹è¯•å¯åŠ¨æ¶ˆæ¯ç”Ÿäº§è€…" class="header-anchor">#</a> æµ‹è¯•å¯åŠ¨æ¶ˆæ¯ç”Ÿäº§è€…</h2> <p>export NAMESRV_ADDR=&quot;localhost:9876&quot;
sh bin/tools.sh org.apache.rocketmq.example.quickstart.Producer</p> <h2 id="æ§åˆ¶é¢æ¿"><a href="#æ§åˆ¶é¢æ¿" class="header-anchor">#</a> æ§åˆ¶é¢æ¿</h2> <p>docker pull apacherocketmq/rocketmq-dashboard:latest</p> <p>docker run -d --name rocketmq-dashboard-MQZ -e &quot;JAVA_OPTS=-Drocketmq.namesrv.addr=192.168.2.11:9876&quot; -p 8080:8080 -t apacherocketmq/rocketmq-dashboard:latest</p> <h2 id="docker-å¯åŠ¨"><a href="#docker-å¯åŠ¨" class="header-anchor">#</a> docker å¯åŠ¨</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>version: '3.5'
services:
  rmqnamesrv:
    image: rocketmqinc/rocketmq
    container_name: rmqnamesrv
    restart: always
    ports:
      - 9876:9876
    environment:
      JAVA_OPT_EXT: &quot;-server -Xms1g -Xmx1g&quot;
    volumes:
      - ./logs:/root/logs
    command: sh mqnamesrv
    networks:
      rmq:
        aliases:
          - rmqnamesrv
          
  rmqbroker:
    image: rocketmqinc/rocketmq
    container_name: rmqbroker
    restart: always
    depends_on:
      - rmqnamesrv
    ports:
      - 10909:10909
      - 10911:10911
    volumes:
      - ./logs:/root/logs
      - ./store:/root/store
      - /root/mqz/rocketmq/broker.conf:/opt/rocketmq-4.4.0/conf/broker.conf
    command: sh mqbroker -c /opt/rocketmq-4.4.0/conf/broker.conf
    environment:
      NAMESRV_ADDR: &quot;rmqnamesrv:9876&quot;
      JAVA_OPT_EXT: &quot;-server -Xms1g -Xmx1g -Xmn1g&quot;
    networks:
      rmq:
        aliases:
          - rmqbroker
          
  rmqconsole:
    image: styletang/rocketmq-console-ng
    container_name: rocketmq-console
    restart: always
    ports:
      - 8080:8080
    depends_on:
      - rmqnamesrv
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /home/rocketmq/console/logs:/root/logs
    environment:
      JAVA_OPTS: &quot;-Drocketmq.namesrv.addr=rmqnamesrv:9876 -Dcom.rocketmq.sendMessageWithVIPChannel=false&quot;
    networks:
      rmq:
        aliases:
          - rmqconsole
          
networks:
  rmq:
    name: rmq
    driver: bridge
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/mengqizhang/assets/js/app.a8d21a83.js" defer></script><script src="/mengqizhang/assets/js/2.e69c46bd.js" defer></script><script src="/mengqizhang/assets/js/93.862f4101.js" defer></script>
  </body>
</html>
