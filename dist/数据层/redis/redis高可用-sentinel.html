<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>redisé«˜å¯ç”¨ | è’™å¤§æ‹¿</title>
    <meta name="generator" content="VuePress 1.9.5">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script charset="utf-8" src="https://my.openwrite.cn/js/readmore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="è’™å¤§æ‹¿çš„åšå®¢">
    
    <link rel="preload" href="/mengqizhang/assets/css/0.styles.a1d09170.css" as="style"><link rel="preload" href="/mengqizhang/assets/js/app.a8d21a83.js" as="script"><link rel="preload" href="/mengqizhang/assets/js/2.e69c46bd.js" as="script"><link rel="preload" href="/mengqizhang/assets/js/84.e2f1cab8.js" as="script"><link rel="preload" href="/mengqizhang/assets/js/6.48810bdc.js" as="script"><link rel="prefetch" href="/mengqizhang/assets/js/10.11174a82.js"><link rel="prefetch" href="/mengqizhang/assets/js/100.bd6553c3.js"><link rel="prefetch" href="/mengqizhang/assets/js/101.ac07962b.js"><link rel="prefetch" href="/mengqizhang/assets/js/102.79bec0af.js"><link rel="prefetch" href="/mengqizhang/assets/js/103.0c0a0808.js"><link rel="prefetch" href="/mengqizhang/assets/js/104.3ed6d392.js"><link rel="prefetch" href="/mengqizhang/assets/js/105.be22e8c8.js"><link rel="prefetch" href="/mengqizhang/assets/js/106.efa39ac4.js"><link rel="prefetch" href="/mengqizhang/assets/js/107.545ffb45.js"><link rel="prefetch" href="/mengqizhang/assets/js/108.cf23c097.js"><link rel="prefetch" href="/mengqizhang/assets/js/109.3339ffad.js"><link rel="prefetch" href="/mengqizhang/assets/js/11.08defbae.js"><link rel="prefetch" href="/mengqizhang/assets/js/110.bafd2f00.js"><link rel="prefetch" href="/mengqizhang/assets/js/12.25a3365c.js"><link rel="prefetch" href="/mengqizhang/assets/js/13.9b88bf7d.js"><link rel="prefetch" href="/mengqizhang/assets/js/14.c4d7ed3a.js"><link rel="prefetch" href="/mengqizhang/assets/js/15.b407b696.js"><link rel="prefetch" href="/mengqizhang/assets/js/16.1c08698a.js"><link rel="prefetch" href="/mengqizhang/assets/js/17.8a25e983.js"><link rel="prefetch" href="/mengqizhang/assets/js/18.e34bf6a6.js"><link rel="prefetch" href="/mengqizhang/assets/js/19.68d7669f.js"><link rel="prefetch" href="/mengqizhang/assets/js/20.de14558d.js"><link rel="prefetch" href="/mengqizhang/assets/js/21.56869e5e.js"><link rel="prefetch" href="/mengqizhang/assets/js/22.aea26c9b.js"><link rel="prefetch" href="/mengqizhang/assets/js/23.4a0b2ea3.js"><link rel="prefetch" href="/mengqizhang/assets/js/24.58c270f0.js"><link rel="prefetch" href="/mengqizhang/assets/js/25.413aed44.js"><link rel="prefetch" href="/mengqizhang/assets/js/26.5ebfde8b.js"><link rel="prefetch" href="/mengqizhang/assets/js/27.48dd442a.js"><link rel="prefetch" href="/mengqizhang/assets/js/28.d2afcf03.js"><link rel="prefetch" href="/mengqizhang/assets/js/29.b928e199.js"><link rel="prefetch" href="/mengqizhang/assets/js/3.7aafc190.js"><link rel="prefetch" href="/mengqizhang/assets/js/30.4c1cbe1a.js"><link rel="prefetch" href="/mengqizhang/assets/js/31.77073e2d.js"><link rel="prefetch" href="/mengqizhang/assets/js/32.5f66f7a2.js"><link rel="prefetch" href="/mengqizhang/assets/js/33.a8272e84.js"><link rel="prefetch" href="/mengqizhang/assets/js/34.3b8ea135.js"><link rel="prefetch" href="/mengqizhang/assets/js/35.100b34a0.js"><link rel="prefetch" href="/mengqizhang/assets/js/36.06cb633d.js"><link rel="prefetch" href="/mengqizhang/assets/js/37.f3d4b763.js"><link rel="prefetch" href="/mengqizhang/assets/js/38.733d311d.js"><link rel="prefetch" href="/mengqizhang/assets/js/39.8434909a.js"><link rel="prefetch" href="/mengqizhang/assets/js/4.000c3dbd.js"><link rel="prefetch" href="/mengqizhang/assets/js/40.dd341745.js"><link rel="prefetch" href="/mengqizhang/assets/js/41.1fcf309c.js"><link rel="prefetch" href="/mengqizhang/assets/js/42.1cc69bad.js"><link rel="prefetch" href="/mengqizhang/assets/js/43.fefa3ac7.js"><link rel="prefetch" href="/mengqizhang/assets/js/44.d284f8c1.js"><link rel="prefetch" href="/mengqizhang/assets/js/45.2564339d.js"><link rel="prefetch" href="/mengqizhang/assets/js/46.23627a8c.js"><link rel="prefetch" href="/mengqizhang/assets/js/47.cecbf290.js"><link rel="prefetch" href="/mengqizhang/assets/js/48.bad75ece.js"><link rel="prefetch" href="/mengqizhang/assets/js/49.2fa60a3e.js"><link rel="prefetch" href="/mengqizhang/assets/js/5.9832e234.js"><link rel="prefetch" href="/mengqizhang/assets/js/50.f3159852.js"><link rel="prefetch" href="/mengqizhang/assets/js/51.738bce4a.js"><link rel="prefetch" href="/mengqizhang/assets/js/52.efc0fa7e.js"><link rel="prefetch" href="/mengqizhang/assets/js/53.8d0c00f1.js"><link rel="prefetch" href="/mengqizhang/assets/js/54.a519e682.js"><link rel="prefetch" href="/mengqizhang/assets/js/55.9652e586.js"><link rel="prefetch" href="/mengqizhang/assets/js/56.c88f759b.js"><link rel="prefetch" href="/mengqizhang/assets/js/57.c6f3cd20.js"><link rel="prefetch" href="/mengqizhang/assets/js/58.0c040aca.js"><link rel="prefetch" href="/mengqizhang/assets/js/59.fc5ce388.js"><link rel="prefetch" href="/mengqizhang/assets/js/60.a50c0285.js"><link rel="prefetch" href="/mengqizhang/assets/js/61.ab6648f5.js"><link rel="prefetch" href="/mengqizhang/assets/js/62.f589c0b8.js"><link rel="prefetch" href="/mengqizhang/assets/js/63.df4a0587.js"><link rel="prefetch" href="/mengqizhang/assets/js/64.e5f1a0d6.js"><link rel="prefetch" href="/mengqizhang/assets/js/65.94e94ec2.js"><link rel="prefetch" href="/mengqizhang/assets/js/66.9a0f92dc.js"><link rel="prefetch" href="/mengqizhang/assets/js/67.15d5b718.js"><link rel="prefetch" href="/mengqizhang/assets/js/68.ca0d798d.js"><link rel="prefetch" href="/mengqizhang/assets/js/69.4de863fa.js"><link rel="prefetch" href="/mengqizhang/assets/js/7.2f8cbddd.js"><link rel="prefetch" href="/mengqizhang/assets/js/70.7c1bcd59.js"><link rel="prefetch" href="/mengqizhang/assets/js/71.70f3e9ec.js"><link rel="prefetch" href="/mengqizhang/assets/js/72.ca361407.js"><link rel="prefetch" href="/mengqizhang/assets/js/73.95c0b000.js"><link rel="prefetch" href="/mengqizhang/assets/js/74.673e240c.js"><link rel="prefetch" href="/mengqizhang/assets/js/75.f5cf8815.js"><link rel="prefetch" href="/mengqizhang/assets/js/76.30b8a8fb.js"><link rel="prefetch" href="/mengqizhang/assets/js/77.0bdfd82b.js"><link rel="prefetch" href="/mengqizhang/assets/js/78.a21a9dee.js"><link rel="prefetch" href="/mengqizhang/assets/js/79.5c55aff9.js"><link rel="prefetch" href="/mengqizhang/assets/js/8.507fce61.js"><link rel="prefetch" href="/mengqizhang/assets/js/80.aa70b0e8.js"><link rel="prefetch" href="/mengqizhang/assets/js/81.1cb55142.js"><link rel="prefetch" href="/mengqizhang/assets/js/82.50b720b1.js"><link rel="prefetch" href="/mengqizhang/assets/js/83.85834849.js"><link rel="prefetch" href="/mengqizhang/assets/js/85.c154565c.js"><link rel="prefetch" href="/mengqizhang/assets/js/86.c5dbbd95.js"><link rel="prefetch" href="/mengqizhang/assets/js/87.2b62cc5e.js"><link rel="prefetch" href="/mengqizhang/assets/js/88.5deb957d.js"><link rel="prefetch" href="/mengqizhang/assets/js/89.fbed7b0f.js"><link rel="prefetch" href="/mengqizhang/assets/js/9.70c1c418.js"><link rel="prefetch" href="/mengqizhang/assets/js/90.8efb35d5.js"><link rel="prefetch" href="/mengqizhang/assets/js/91.a3da2ba6.js"><link rel="prefetch" href="/mengqizhang/assets/js/92.1f9bf6c0.js"><link rel="prefetch" href="/mengqizhang/assets/js/93.862f4101.js"><link rel="prefetch" href="/mengqizhang/assets/js/94.1a0c5762.js"><link rel="prefetch" href="/mengqizhang/assets/js/95.6df0f77b.js"><link rel="prefetch" href="/mengqizhang/assets/js/96.90bef310.js"><link rel="prefetch" href="/mengqizhang/assets/js/97.fa2b5f10.js"><link rel="prefetch" href="/mengqizhang/assets/js/98.d84c6b84.js"><link rel="prefetch" href="/mengqizhang/assets/js/99.785b4a31.js">
    <link rel="stylesheet" href="/mengqizhang/assets/css/0.styles.a1d09170.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mengqizhang/" class="home-link router-link-active"><!----> <span class="site-name">è’™å¤§æ‹¿</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mengqizhang/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="https://gitee.com/DemoMeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…³äºæˆ‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mengqizhang/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="https://gitee.com/DemoMeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…³äºæˆ‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é¢è¯• ğŸ“–ğŸ”¥ğŸ”¥</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/ç¯å¢ƒé…ç½®/" class="sidebar-heading clickable"><span>ç¯å¢ƒé…ç½® ğŸ”§</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/æ¶ˆæ¯é˜Ÿåˆ—/" class="sidebar-heading clickable"><span>æ¶ˆæ¯é˜Ÿåˆ— ğŸ”¥ğŸ”¥ğŸ”¥</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/æ•°æ®å±‚/" class="sidebar-heading clickable open"><span>æ•°æ®å±‚ ğŸ”¥ğŸ”¥ğŸ”¥</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>mybatis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Redis</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>redisåŸºç¡€</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>redisé…ç½®</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>redisé«˜å¯ç”¨</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mengqizhang/æ•°æ®å±‚/redis/redisé«˜å¯ç”¨-sentinel.html" class="active sidebar-link">redisé«˜å¯ç”¨-å“¨å…µæ¨¡å¼</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mengqizhang/æ•°æ®å±‚/redis/redisé«˜å¯ç”¨-sentinel.html#ä¸»ä»åŸç†" class="sidebar-link">ä¸»ä»åŸç†</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/æ•°æ®å±‚/redis/redisé«˜å¯ç”¨-sentinel.html#redisä¸»ä»åŒæ­¥åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µã€‚" class="sidebar-link">Redisä¸»ä»åŒæ­¥åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µã€‚</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/æ•°æ®å±‚/redis/redisé«˜å¯ç”¨-sentinel.html#ä¸»ä»æ•°æ®ä¸ä¸€è‡´" class="sidebar-link">ä¸»ä»æ•°æ®ä¸ä¸€è‡´</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/æ•°æ®å±‚/redis/redisé«˜å¯ç”¨-sentinel.html#ä¸€ä¸»å¤šä»-å…¨é‡å¤åˆ¶æ—¶ä¸»åº“å‹åŠ›é—®é¢˜" class="sidebar-link">ä¸€ä¸»å¤šä»ï¼Œå…¨é‡å¤åˆ¶æ—¶ä¸»åº“å‹åŠ›é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/æ•°æ®å±‚/redis/redisé«˜å¯ç”¨-sentinel.html#redisä¸»ä»åŒæ­¥çš„æ–¹å¼" class="sidebar-link">redisä¸»ä»åŒæ­¥çš„æ–¹å¼ï¼š</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/æ•°æ®å±‚/redis/redisé«˜å¯ç”¨-sentinel.html#rediså“¨å…µæ¨¡å¼" class="sidebar-link">rediså“¨å…µæ¨¡å¼ï¼š</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/æ•°æ®å±‚/redis/redisé«˜å¯ç”¨-sentinel.html#å“¨å…µæ¨¡å¼çš„ç¼ºç‚¹" class="sidebar-link">å“¨å…µæ¨¡å¼çš„ç¼ºç‚¹</a></li><li class="sidebar-sub-header"><a href="/mengqizhang/æ•°æ®å±‚/redis/redisé«˜å¯ç”¨-sentinel.html#springboot-redisé›†ç¾¤" class="sidebar-link">springboot+redisé›†ç¾¤</a></li></ul></li><li><a href="/mengqizhang/æ•°æ®å±‚/redis/redis-é›†ç¾¤.html" class="sidebar-link">redisé«˜å¯ç”¨-é›†ç¾¤</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>redisåº”ç”¨åœºæ™¯</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mengqizhang/å®¹å™¨åŒ–/" class="sidebar-heading clickable"><span>å®¹å™¨åŒ– ğŸ³</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java â˜•ï¸</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åˆ†å¸ƒå¼äº‹åŠ¡</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åˆ†å¸ƒå¼ç³»ç»Ÿ â˜ï¸</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webSocket</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ELK ğŸ”</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nginx ğŸ‡·ğŸ‡º</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jenkins ğŸ‘´</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æœåŠ¡å™¨ ğŸ’°</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æµ‹è¯• ğŸ˜“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç›‘æ§å‘Šè­¦</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="redisé«˜å¯ç”¨"><a href="#redisé«˜å¯ç”¨" class="header-anchor">#</a> redisé«˜å¯ç”¨</h1> <div class="language- line-numbers-mode"><pre class="language-text"><code>    1. redisåŸç”Ÿ clusteræ¨¡å¼
    2. redisä¸»ä»+å“¨å…µæ¨¡å¼

    ä¸»è¦çš„æ–¹å¼æœ‰ï¼š
        1.ä¸»ä»å¤åˆ¶
        2.Redisé›†ç¾¤
        3.æ•°æ®æŒä¹…åŒ–
        4.è‡ªåŠ¨æ•…éšœæ¢å¤
    
    Redisçš„é«˜å¯ç”¨ä¿éšœçš„åŸºç¡€ï¼šæ•°æ®æŒä¹…åŒ–ã€‚å› ä¸ºRedisçš„ä¸»ä»å¤åˆ¶å’Œè‡ªåŠ¨æ•…éšœæ¢å¤ï¼Œéƒ½éœ€è¦ä¾èµ–RedisæŒä¹…åŒ–ç›¸å…³çš„ä¸œè¥¿ã€‚åŒæ—¶ï¼ŒRedisçš„æ•°æ®æŒä¹…åŒ–ä¹Ÿå¯ä»¥ç”¨æ¥åšæ•°æ®å¤‡ä»½ï¼Œç”¨æ¥ä¿éšœæ•°æ®çš„å®‰å…¨æ€§ã€‚
    Redisæ˜¯ä¸€ä¸ªå†…å­˜æ•°æ®åº“ï¼Œå®ƒçš„æ•°æ®éƒ½ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœå®ä¾‹å®•æœºï¼Œé‚£ä¹ˆæ•°æ®åˆ™å…¨éƒ¨ä¸¢å¤±ã€‚å¦‚ä½•ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ä¹Ÿæ˜¯æé«˜æœåŠ¡é«˜å¯ç”¨çš„é‡è¦æœºåˆ¶ä¹‹ä¸€ã€‚
    Redisæä¾›äº†å®Œå–„çš„æŒä¹…åŒ–æœºåˆ¶ï¼Œå¯ä»¥æŠŠå†…å­˜ä¸­çš„æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œå¤‡ä»½æ•°æ®å’Œå¿«é€Ÿæ¢å¤æ•°æ®ã€‚
        
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h1 id="redisä¸»ä»-å“¨å…µæ¨¡å¼"><a href="#redisä¸»ä»-å“¨å…µæ¨¡å¼" class="header-anchor">#</a> redisä¸»ä»+å“¨å…µæ¨¡å¼</h1> <h3 id="_1-redisä¸»çš„redis-confé…ç½®æ–‡ä»¶"><a href="#_1-redisä¸»çš„redis-confé…ç½®æ–‡ä»¶" class="header-anchor">#</a> 1. redisä¸»çš„redis.confé…ç½®æ–‡ä»¶ï¼š</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code># ä¸»èŠ‚ç‚¹å¯†ç ï¼Œä¸»æœºç‚¹é…ç½®masterauthï¼Œè¿™æ ·å½“ä¸»èŠ‚ç‚¹æ•…éšœåèƒ½æˆåŠŸæˆä¸ºæ–°ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ï¼Œè¿™é‡Œå»ºè®®ä¸»èŠ‚ç‚¹å’Œæ‰€æœ‰çš„ä»èŠ‚ç‚¹ä½¿ç”¨ç›¸åŒçš„å¯†ç 
masterauth mengqizhang
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-redisä»çš„redis-confé…ç½®æ–‡ä»¶"><a href="#_2-redisä»çš„redis-confé…ç½®æ–‡ä»¶" class="header-anchor">#</a> 2. redisä»çš„redis.confé…ç½®æ–‡ä»¶ï¼š</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>
replicaof 192.168.2.9 6379
# ä¸»èŠ‚ç‚¹å¯†ç 
masterauth mengqizhang

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-sentinel-é…ç½®æ–‡ä»¶-åªéœ€è¦ç›‘æµ‹redisä¸»å³å¯-ä¸»é‡Œé¢æœ‰slaveçš„ä¿¡æ¯-ä¼šæŠŠsentinelçš„ä»èŠ‚ç‚¹åˆ†å‘ç»™redisçš„salveèŠ‚ç‚¹"><a href="#_3-sentinel-é…ç½®æ–‡ä»¶-åªéœ€è¦ç›‘æµ‹redisä¸»å³å¯-ä¸»é‡Œé¢æœ‰slaveçš„ä¿¡æ¯-ä¼šæŠŠsentinelçš„ä»èŠ‚ç‚¹åˆ†å‘ç»™redisçš„salveèŠ‚ç‚¹" class="header-anchor">#</a> 3. sentinel é…ç½®æ–‡ä»¶ï¼š åªéœ€è¦ç›‘æµ‹redisä¸»å³å¯ï¼ˆ ä¸»é‡Œé¢æœ‰slaveçš„ä¿¡æ¯ï¼Œä¼šæŠŠsentinelçš„ä»èŠ‚ç‚¹åˆ†å‘ç»™redisçš„salveèŠ‚ç‚¹ï¼‰</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code># å®‰å…¨ç­–ç•¥ï¼Œé€‰æ‹©å¦‚ä¸‹ä»»æ„ä¸€ä¸ªå³å¯
# bind 127.0.0.1 192.168.1.1
# protected-mode no

port 26378

#é»˜è®¤æƒ…å†µä¸‹ï¼ŒRedis Sentinel ä¸ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œã€‚å¦‚æœéœ€è¦ï¼Œè¯·ä½¿ç”¨â€œæ˜¯â€ã€‚æ³¨æ„Redisåœ¨å®ˆæŠ¤è¿›ç¨‹æ—¶ä¼šåœ¨varrunredis-sentinel.pidä¸­å†™å…¥ä¸€ä¸ªpidæ–‡ä»¶ã€‚
daemonize no
#æŒ‡å®šå®ˆæŠ¤è¿›ç¨‹çš„æ–‡ä»¶ä½ç½®
pidfile /var/run/redis-sentinel.pid
#æŒ‡å®šæ—¥å¿—æ–‡ä»¶åã€‚æ­¤å¤–ï¼Œç©ºå­—ç¬¦ä¸²å¯ç”¨äºå¼ºåˆ¶ Sentinel ç™»å½•æ ‡å‡†è¾“å‡ºã€‚è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨ä½¿ç”¨æ ‡å‡†è¾“å‡ºè¿›è¡Œæ—¥å¿—è®°å½•ä½†å®ˆæŠ¤è¿›ç¨‹ï¼Œæ—¥å¿—å°†è¢«å‘é€åˆ° devnull
logfile &quot;&quot;
# sentinel announce-ip 1.2.3.4

# dir &lt;working-directory&gt;
# sentinelå·¥ä½œç›®å½•
dir /tmp

# sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;
# å‘Šè¯‰ Sentinel ç›‘è§†è¿™ä¸ª masterï¼Œå¹¶ä¸”åªæœ‰åœ¨è‡³å°‘ &lt;quorum&gt; å“¨å…µåŒæ„æ—¶æ‰è€ƒè™‘å®ƒå¤„äº O_DOWNï¼ˆå®¢è§‚å…³é—­ï¼‰çŠ¶æ€ã€‚
# åªéœ€è¦é…ç½®ä¸»èŠ‚ç‚¹ï¼Œå½“slaveå‡çº§ä¸ºmasteråï¼Œè¯¥é…ç½®æ–‡ä»¶ä¼šè¢«é‡å†™
# æ”¯æŒåŸŸåé…ç½®
# ç›‘æ§ä¸»è¦èŠ‚ç‚¹ï¼Œ1ä»£è¡¨æœ‰1å°sentinelç›‘æ§rediä¸ºæœ‰é—®é¢˜ï¼Œé‚£å°±æ‰§è¡Œæ•…éšœè½¬ç§»
sentinel monitor mymaster 192.168.2.9 6379 1

# sentinel auth-pass &lt;master-name&gt; &lt;password&gt;
# masterèŠ‚ç‚¹çš„å¯†ç ï¼Œæ³¨æ„masterå’Œslaveå¯†ç éœ€è¦è®¾ç½®ä¸€è‡´ï¼ï¼
sentinel auth-pass mymaster mengqizhang

# aclæ§åˆ¶ï¼Œ6.0ä¹‹åæ–°å¢
# sentinel auth-user &lt;master-name&gt; &lt;username&gt;
#     user sentinel-user &gt;somepassword +client +subscribe +publish \
#                        +ping +info +multi +slaveof +config +client +exec on

# sentinel pingä»èŠ‚ç‚¹æ— å“åº”çš„æ—¶é—´ï¼Œæ— å“åº”åˆ™è®¤ä¸ºæ•…éšœï¼ŒS_DOWNï¼Œé»˜è®¤ä¸º30sç§’
# sentinel down-after-milliseconds &lt;master-name&gt; &lt;milliseconds&gt;
sentinel down-after-milliseconds mymaster 30000

# é…ç½®sentinelçš„å¯†ç ï¼Œå»ºè®®æ‰€æœ‰çš„sentinelå¯†ç é…ç½®ä¸ºä¸€è‡´
# requirepass &lt;password&gt;

# åœ¨æ•…éšœè½¬ç§»æœŸé—´ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°é…ç½®å¤šå°‘å‰¯æœ¬ä»¥åŒæ—¶æŒ‡å‘æ–°å‰¯æœ¬ã€‚å¦‚æœæ‚¨ä½¿ç”¨å‰¯æœ¬æ¥æä¾›æŸ¥è¯¢æœåŠ¡ï¼Œè¯·ä½¿ç”¨è¾ƒå°çš„æ•°å­—ï¼Œä»¥é¿å…åœ¨ä¸ä¸»æœåŠ¡å™¨æ‰§è¡ŒåŒæ­¥æ—¶å‡ ä¹åŒæ—¶æ— æ³•è®¿é—®æ‰€æœ‰å‰¯æœ¬ã€‚
# sentinel parallel-syncs &lt;master-name&gt; &lt;numreplicas&gt;
sentinel parallel-syncs mymaster 1

# è®¾ç½®æ•…éšœè½¬ç§»è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤3åˆ†é’Ÿ
# sentinel failover-timeout &lt;master-name&gt; &lt;milliseconds&gt;
# Specifies the failover timeout in milliseconds. It is used in many ways:
# - åœ¨ç»™å®šçš„ Sentinel å·²ç»é’ˆå¯¹åŒä¸€ä¸ªä¸»æœåŠ¡å™¨å°è¯•äº†å…ˆå‰çš„æ•…éšœè½¬ç§»ä¹‹åï¼Œé‡æ–°å¯åŠ¨æ•…éšœè½¬ç§»æ‰€éœ€çš„æ—¶é—´æ˜¯æ•…éšœè½¬ç§»è¶…æ—¶çš„ä¸¤å€ã€‚
# - æ ¹æ® Sentinel å½“å‰é…ç½®å°†å‰¯æœ¬å¤åˆ¶åˆ°é”™è¯¯çš„ master å¹¶å¼ºåˆ¶ä½¿ç”¨æ­£ç¡®çš„ master è¿›è¡Œå¤åˆ¶æ‰€éœ€çš„æ—¶é—´æ­£æ˜¯æ•…éšœè½¬ç§»è¶…æ—¶ï¼ˆä» Sentinel æ£€æµ‹åˆ°é”™è¯¯é…ç½®çš„é‚£ä¸€åˆ»å¼€å§‹è®¡ç®—ï¼‰ã€‚
# - å–æ¶ˆå·²åœ¨è¿›è¡Œä¸­ä½†æœªäº§ç”Ÿä»»ä½•é…ç½®æ›´æ”¹çš„æ•…éšœè½¬ç§»æ‰€éœ€çš„æ—¶é—´ï¼ˆSLAVEOF NO ONE å°šæœªè¢«æå‡çš„å‰¯æœ¬ç¡®è®¤ï¼‰ã€‚
# - æ­£åœ¨è¿›è¡Œçš„æ•…éšœè½¬ç§»ç­‰å¾…æ‰€æœ‰å‰¯æœ¬é‡æ–°é…ç½®ä¸ºæ–°ä¸»å‰¯æœ¬çš„æœ€é•¿æ—¶é—´ã€‚ç„¶è€Œï¼Œå³ä½¿åœ¨è¿™æ®µæ—¶é—´ä¹‹åï¼ŒSentinels ä»ç„¶ä¼šé‡æ–°é…ç½®å‰¯æœ¬ï¼Œä½†ä¸ä¼šæŒ‰ç…§æŒ‡å®šçš„ç²¾ç¡®å¹¶è¡ŒåŒæ­¥è¿›ç¨‹è¿›è¡Œé…ç½®ã€‚
sentinel failover-timeout mymaster 180000


# sentinelæ‰§è¡Œæ•…éšœè½¬ç§»åï¼Œå¯ä»¥æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬ï¼Œç”¨äºé€šçŸ¥å¼€å‘äººå‘˜æˆ–è€…è®°å½•æ•…éšœè½¬ç§»è®°å½•ç­‰ï¼ï¼è„šæœ¬æœ€é•¿æ‰§è¡Œæ—¶é—´ä¸º60ç§’
# å¦‚æœè„šæœ¬ä»¥â€œ1â€é€€å‡ºï¼Œåˆ™ç¨åé‡è¯•æ‰§è¡Œï¼ˆæœ€å¤šå½“å‰è®¾ç½®ä¸º 10 çš„æœ€å¤§æ¬¡æ•°ï¼‰ã€‚
# å¦‚æœè„šæœ¬ä»¥â€œ2â€ï¼ˆæˆ–æ›´é«˜çš„å€¼ï¼‰é€€å‡ºï¼Œåˆ™ä¸ä¼šé‡è¯•è„šæœ¬æ‰§è¡Œã€‚
# æ‰§è¡ŒæŒ‡å®šçš„é€šçŸ¥è„šæœ¬
# sentinel notification-script &lt;master-name&gt; &lt;script-path&gt;
# sentinel notification-script mymaster /var/redis/notify.sh

# å®¢æˆ·ç«¯é‡æ–°é…ç½®è„šæœ¬
# sentinel client-reconfig-script &lt;master-name&gt; &lt;script-path&gt;
#
# å½“ä¸»æœåŠ¡å™¨å› æ•…éšœè½¬ç§»è€Œæ›´æ”¹æ—¶ï¼Œå¯ä»¥è°ƒç”¨è„šæœ¬ä»¥æ‰§è¡Œç‰¹å®šäºåº”ç”¨ç¨‹åºçš„ä»»åŠ¡ï¼Œä»¥é€šçŸ¥å®¢æˆ·ç«¯é…ç½®å·²æ›´æ”¹ä¸”ä¸»æœåŠ¡å™¨ä½äºä¸åŒçš„åœ°å€ã€‚
# ä»¥ä¸‹å‚æ•°ä¼ é€’ç»™è„šæœ¬
# &lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;
# &lt;state&gt; is currently always &quot;failover&quot;
# &lt;role&gt; is either &quot;leader&quot; or &quot;observer&quot;
# sentinel client-reconfig-script mymaster /var/redis/reconfig.sh

# é»˜è®¤æƒ…å†µä¸‹ï¼ŒSENTINEL SET å°†æ— æ³•åœ¨è¿è¡Œæ—¶æ›´æ”¹é€šçŸ¥è„šæœ¬å’Œå®¢æˆ·ç«¯é‡æ–°é…ç½®è„šæœ¬ã€‚è¿™é¿å…äº†å®¢æˆ·ç«¯å¯ä»¥å°†è„šæœ¬è®¾ç½®ä¸ºä»»ä½•å†…å®¹å¹¶è§¦å‘æ•…éšœè½¬ç§»ä»¥ä½¿ç¨‹åºæ‰§è¡Œçš„å¾®ä¸è¶³é“çš„å®‰å…¨é—®é¢˜ã€‚
sentinel deny-scripts-reconfig yes

# æœ‰æ—¶ Redis æœåŠ¡å™¨æœ‰æŸäº›å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤æ˜¯ Sentinel æ­£å¸¸å·¥ä½œæ‰€éœ€çš„ï¼Œé‡å‘½åä¸ºä¸å¯çŒœæµ‹çš„å­—ç¬¦ä¸²ã€‚åœ¨æä¾› Redis å³æœåŠ¡ä¸”ä¸å¸Œæœ›å®¢æˆ·åœ¨ç®¡ç†æ§åˆ¶å°ä¹‹å¤–é‡æ–°é…ç½®å®ä¾‹çš„æä¾›å•†çš„ä¸Šä¸‹æ–‡ä¸­ï¼ŒCONFIG å’Œ SLAVEOF é€šå¸¸å°±æ˜¯è¿™ç§æƒ…å†µã€‚
# åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å‘Šè¯‰ Sentinel ä½¿ç”¨ä¸åŒçš„å‘½ä»¤åç§°è€Œä¸æ˜¯æ™®é€šçš„å‘½ä»¤åç§°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸»â€œmymasterâ€å’Œå…³è”çš„å‰¯æœ¬å°†â€œCONFIGâ€éƒ½é‡å‘½åä¸ºâ€œGUESSMEâ€ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨ï¼š
# SENTINEL rename-command mymaster CONFIG GUESSME
# è®¾ç½®å¥½è¿™æ ·çš„é…ç½®åï¼Œæ¯æ¬¡ Sentinel ä½¿ç”¨ CONFIG æ—¶ï¼Œå®ƒéƒ½ä¼šä½¿ç”¨ GUESSMEã€‚è¯·æ³¨æ„ï¼Œå®é™…ä¸Šå¹¶ä¸éœ€è¦å°Šé‡å‘½ä»¤å¤§å°å†™ï¼Œå› æ­¤åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ç¼–å†™â€œconfig guessmeâ€æ˜¯ç›¸åŒçš„ã€‚
# æ’¤é”€ä¸Šé¢çš„è®¾ç½®
# SENTINEL rename-command mymaster CONFIG CONFIG

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br></div></div><h3 id="redisä¸»ä»æ­å»º"><a href="#redisä¸»ä»æ­å»º" class="header-anchor">#</a> redisä¸»ä»æ­å»º</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>version: '3'
services:
  redis-master:
    image: redis:latest
    container_name: redis-master-MQZ
    restart: on-failure
    volumes:
      - /root/logs/docker-log/redis/master:/data
      - /root/mqz/redis/redis-master.conf:/etc/redis/redis.conf
    environment:
      - TZ=Asia/Shanghai
    command: redis-server /etc/redis/redis.conf
    ports:
      - &quot;6379:6379&quot;
  redis-slave-1:
    image: redis:latest
    container_name: redis-slave-1-MQZ
    restart: on-failure
    volumes:
      - /root/logs/docker-log/redis/slave-1:/data
      - /root/mqz/redis/redis-slave-1.conf:/etc/redis/redis.conf
    environment:
      - TZ=Asia/Shanghai
    command: redis-server /etc/redis/redis.conf
    ports:
      - &quot;6378:6378&quot;
  redis-slave-2:
    image: redis:latest
    container_name: redis-slave-2-MQZ
    restart: on-failure
    volumes:
      - /root/logs/docker-log/redis/slave-2:/data
      - /root/mqz/redis/redis-slave-2.conf:/etc/redis/redis.conf
    environment:
      - TZ=Asia/Shanghai
    command: redis-server /etc/redis/redis.conf
    ports:
      - &quot;6377:6377&quot;
  redis-sentinel-1:
    image: redis:latest
    container_name: redis-sentinel-1-MQZ
    restart: on-failure
    ports:
      - &quot;26379:26379&quot;
    volumes:
      - /root/mqz/redis/sentinel-1.conf:/etc/redis/sentinel.conf
    environment:
      - TZ=Asia/Shanghai
    command: redis-sentinel /etc/redis/sentinel.conf
  redis-sentinel-2:
    image: redis:latest
    container_name: redis-sentinel-2-MQZ
    restart: on-failure
    ports:
      - &quot;26378:26378&quot;
    volumes:
      - /root/mqz/redis/sentinel-2.conf:/etc/redis/sentinel.conf
    environment:
      - TZ=Asia/Shanghai
    command: redis-sentinel /etc/redis/sentinel.conf
  redis-sentinel-3:
    image: redis:latest
    container_name: redis-sentinel-3-MQZ
    restart: on-failure
    ports:
      - &quot;26377:26377&quot;
    volumes:
      - /root/mqz/redis/sentinel-2.conf:/etc/redis/sentinel.conf
    environment:
      - TZ=Asia/Shanghai
    command: redis-sentinel /etc/redis/sentinel.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h3 id="ç›¸å…³æ“ä½œ"><a href="#ç›¸å…³æ“ä½œ" class="header-anchor">#</a> ç›¸å…³æ“ä½œ</h3> <p>a. sentinel æ“ä½œï¼š</p> <p><a data-fancybox="" title="111" href="sentinel-1æŸ¥çœ‹infoä¿¡æ¯.png"><img src="sentinel-1%E6%9F%A5%E7%9C%8Binfo%E4%BF%A1%E6%81%AF.png" alt="img.png"></a> <a data-fancybox="" title="111" href="sentinel-masterä¿¡æ¯.png"><img src="sentinel-master%E4%BF%A1%E6%81%AF.png" alt="img.png"></a></p> <p>b. master æ“ä½œ
<a data-fancybox="" title="111" href="redis-ä¸»ä»é…ç½®-æŸ¥çœ‹ä¸»ä»é…ç½®ä¿¡æ¯1.png"><img src="redis-%E4%B8%BB%E4%BB%8E%E9%85%8D%E7%BD%AE-%E6%9F%A5%E7%9C%8B%E4%B8%BB%E4%BB%8E%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF1.png" alt="img.png"></a> <a data-fancybox="" title="111" href="redis-sentinelä¸»èŠ‚ç‚¹æ•…éšœ-1.png"><img src="redis-sentinel%E4%B8%BB%E8%8A%82%E7%82%B9%E6%95%85%E9%9A%9C-1.png" alt="img.png"></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code> docker exec -it redis-sentinel-1-MQZ /bin/bash
 redis-cli -h 172.16.1.11 -p 26379 ï¼š # æŸ¥çœ‹å“¨å…µæ­å»ºä¿¡æ¯
 info
 sentinel master mymaster: # æŸ¥çœ‹mymasterç»„çš„ä¸»èŠ‚ç‚¹ä¿¡æ¯
 sentinel slaves mymasterï¼š# æŸ¥çœ‹mymasterç»„çš„ä»èŠ‚ç‚¹çš„ä¿¡æ¯


- REPLICAOF NO ONEï¼š # åˆ™å°†å½“å‰æœåŠ¡å™¨è½¬æ¢ä¸ºä¸»èŠ‚ç‚¹ï¼Œå–æ¶ˆåŸæ¥çš„ä¸»ä»å¤åˆ¶å…³ç³»ï¼Œé€€å‡ºå‡½æ•°ã€‚



- redis-cli -h 127.0.0.1 -p 6379 -a mengqizhang ï¼š ç™»é™†rediså®¢æˆ·ç«¯
- info ï¼š æŸ¥çœ‹redisçš„é…ç½®ä¿¡æ¯
  info replication: æŸ¥çœ‹redisä¸»ä»é…ç½®ä¿¡æ¯



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="ä¸»ä»åŸç†"><a href="#ä¸»ä»åŸç†" class="header-anchor">#</a> ä¸»ä»åŸç†</h2> <p><a data-fancybox="" title="111" href="redisä¸»ä»åŸç†1.png"><img src="redis%E4%B8%BB%E4%BB%8E%E5%8E%9F%E7%90%861.png" alt="img.png"></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>æµç¨‹ï¼š
1. ä»èŠ‚ç‚¹å‘é€syncï¼ˆ2.8ä¹‹åä¸º psyncï¼‰è¯·æ±‚ï¼ˆå…¨é‡å¤åˆ¶æˆ–å¢é‡å¤åˆ¶ï¼‰ç»™ä¸»èŠ‚ç‚¹
2. ä¸»èŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œæ‰§è¡Œbgsaveå‘½ä»¤ï¼Œå°†å½“å‰æ•°æ®ç”Ÿæˆå†…å­˜å¿«ç…§ï¼ˆå…¶ä¸­redis.masterå¯ä»¥é…ç½®è‡ªåŠ¨ä¿å­˜å¿«ç…§çš„ç­–ç•¥ï¼šSNAPSHOTTINGæ¨¡å—ï¼šsave 900 1ï¼‰
å¹¶ä¸”ï¼Œä¸»èŠ‚ç‚¹ä¼šåˆ›å»ºä¸€ä¸ªå¤åˆ¶ç¼“å†²åŒºï¼Œè®°å½•ä»æ”¶åˆ°ä»èŠ‚ç‚¹å¤åˆ¶è¯·æ±‚ä¹‹åçš„æ‰€æœ‰æ‰§è¡Œå‘½ä»¤è®°å½•ã€‚
3. ä»èŠ‚ç‚¹æ”¶åˆ°ä¸»èŠ‚ç‚¹çš„RDBå¿«ç…§æ–‡ä»¶å’Œbufferæ–‡ä»¶ä¹‹åï¼Œä¼šæ¸…ç©ºæ‰€æœ‰çš„æ—§æ•°æ®ï¼Œå°†æ•°æ®åŒæ­¥åˆ°æ•°æ®åº“ä¸­ï¼ˆç£ç›˜ï¼‰ï¼Œå¹¶ä¸”ä¼šå°†æ•°æ®åº“çš„æ–‡ä»¶åŒæ­¥åˆ°å†…å­˜é‡Œ
åŸç†ï¼š
a. ä¸»èŠ‚ç‚¹åœ¨å¤åˆ¶ç¼“å†²åŒºç»™æ¯ä¸ªä»èŠ‚ç‚¹åˆ›å»ºäº†ä¸€ä¸ªåŒæ­¥å¤‡ä»½æ—¥å¿— in memory backlogï¼Œè¶…è¿‡1Må°±ä¼šæ¸…ç†
c. ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹åŒæ—¶ç»´æŠ¤äº†ä¸€ä¸ªå¤åˆ¶åç§»é‡ï¼ˆoffsetï¼‰å’Œmasterçº¿ç¨‹idï¼ˆmaster run idï¼‰ï¼Œæ¯æ¬¡slaveè¯·æ±‚ä¼šæºå¸¦offsetå’Œmaster run id


   æ³¨æ„ï¼š 
       a. å¦‚æœä¸»èŠ‚ç‚¹æ”¶åˆ°å¤šä¸ªä»èŠ‚ç‚¹çš„syncï¼ˆpsyncï¼‰è¯·æ±‚ï¼Œä¸»èŠ‚ç‚¹åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼ˆbgsave-&gt;åˆ›å»ºå¤åˆ¶ç¼“å†²åŒº-&gt;å‘é€RDBæ–‡ä»¶ï¼‰ï¼Œç„¶åæŠŠè¿™å†™åŒæ­¥æ•°æ®åˆ†åˆ«å‘é€ç»™æ‰€æœ‰çš„ä»èŠ‚ç‚¹
       b. å¦‚æœä»èŠ‚ç‚¹RDBå¤åˆ¶æ–‡ä»¶è¶…è¿‡60ç§’ï¼Œä»èŠ‚ç‚¹åˆ™è®¤ä¸ºå¤åˆ¶å¤±è´¥ï¼Œå¯ä»¥é…ç½®è¿™ä¸ªæ—¶é—´é•¿åº¦å¤§ä¸€ç‚¹ ï¼ˆ repl-timeout ï¼‰ 

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="redisä¸»ä»åŒæ­¥åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µã€‚"><a href="#redisä¸»ä»åŒæ­¥åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µã€‚" class="header-anchor">#</a> Redisä¸»ä»åŒæ­¥åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µã€‚</h2> <p><a data-fancybox="" title="111" href="redisä¸»ä»åŒæ­¥åŸç†2.png"><img src="redis%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E5%8E%9F%E7%90%862.png" alt="img.png"></a></p> <ul><li>ç¬¬ä¸€é˜¶æ®µï¼šä¸»ä»åº“é—´å»ºç«‹è¿æ¥ã€åå•†åŒæ­¥ã€‚</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>ä»åº“å‘ä¸»åº“å‘é€psync å‘½ä»¤ï¼Œå‘Šè¯‰å®ƒè¦è¿›è¡Œæ•°æ®åŒæ­¥ã€‚
ä¸»åº“æ”¶åˆ° psync å‘½ä»¤å,å“åº”FULLRESYNCå‘½ä»¤ï¼ˆå®ƒè¡¨ç¤ºç¬¬ä¸€æ¬¡å¤åˆ¶é‡‡ç”¨çš„æ˜¯å…¨é‡å¤åˆ¶ï¼‰ï¼Œå¹¶å¸¦ä¸Šä¸»åº“runIDå’Œä¸»åº“ç›®å‰çš„å¤åˆ¶è¿›åº¦offsetã€‚

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>ç¬¬äºŒé˜¶æ®µï¼šä¸»åº“æŠŠæ•°æ®åŒæ­¥åˆ°ä»åº“ï¼Œä»åº“æ”¶åˆ°æ•°æ®åï¼Œå®Œæˆæœ¬åœ°åŠ è½½ã€‚</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>ä¸»åº“æ‰§è¡Œbgsaveå‘½ä»¤ï¼Œç”ŸæˆRDBæ–‡ä»¶ï¼Œå­˜å‚¨åˆ°ç£ç›˜ï¼Œæ¥ç€å°†æ–‡ä»¶å‘ç»™ä»åº“ã€‚ä»åº“æ¥æ”¶åˆ°RDB æ–‡ä»¶åï¼Œä¼šå…ˆæ¸…ç©ºå½“å‰æ•°æ®åº“ï¼Œç„¶ååŠ è½½ RDB æ–‡ä»¶ã€‚
ä¸»åº“æŠŠæ•°æ®åŒæ­¥åˆ°ä»åº“çš„è¿‡ç¨‹ä¸­ï¼Œæ–°æ¥çš„å†™æ“ä½œï¼Œä¼šè®°å½•åˆ°replication bufferã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>ç¬¬ä¸‰é˜¶æ®µï¼Œä¸»åº“æŠŠæ–°å†™çš„å‘½ä»¤ï¼Œå‘é€åˆ°ä»åº“ã€‚</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>ä¸»åº“å®ŒæˆRDBå‘é€åï¼Œä¼šæŠŠreplication bufferä¸­çš„ä¿®æ”¹æ“ä½œå‘ç»™ä»åº“ï¼Œä»åº“å†é‡æ–°æ‰§è¡Œè¿™äº›æ“ä½œã€‚è¿™æ ·ä¸»ä»åº“å°±å®ç°åŒæ­¥å•¦ã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="ä¸»ä»æ•°æ®ä¸ä¸€è‡´"><a href="#ä¸»ä»æ•°æ®ä¸ä¸€è‡´" class="header-anchor">#</a> ä¸»ä»æ•°æ®ä¸ä¸€è‡´</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>1.åŸå› ï¼š
    ä¸»ä»åº“ç½‘è·¯å»¶è¿Ÿã€‚
    ä»åº“æ”¶åˆ°äº†ä¸»ä»å‘½ä»¤ï¼Œä½†æ˜¯å®ƒæ­£åœ¨æ‰§è¡Œé˜»å¡æ€§çš„å‘½ä»¤ï¼ˆå¦‚hgetallç­‰ï¼‰ã€‚
2.è§£å†³ï¼š
    å¯ä»¥æ¢æ›´å¥½çš„ç¡¬ä»¶é…ç½®ï¼Œä¿è¯ç½‘ç»œç•…é€šã€‚
    ç›‘æ§ä¸»ä»åº“é—´çš„å¤åˆ¶è¿›åº¦
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="ä¸€ä¸»å¤šä»-å…¨é‡å¤åˆ¶æ—¶ä¸»åº“å‹åŠ›é—®é¢˜"><a href="#ä¸€ä¸»å¤šä»-å…¨é‡å¤åˆ¶æ—¶ä¸»åº“å‹åŠ›é—®é¢˜" class="header-anchor">#</a> ä¸€ä¸»å¤šä»ï¼Œå…¨é‡å¤åˆ¶æ—¶ä¸»åº“å‹åŠ›é—®é¢˜</h2> <p><a data-fancybox="" title="111" href="ä¸€ä¸»å¤šä»å…¨é‡å¤åˆ¶å‹åŠ›çš„é—®é¢˜.png"><img src="%E4%B8%80%E4%B8%BB%E5%A4%9A%E4%BB%8E%E5%85%A8%E9%87%8F%E5%A4%8D%E5%88%B6%E5%8E%8B%E5%8A%9B%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="img.png"></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>å¦‚æœæ˜¯ä¸€ä¸»å¤šä»çš„æ¨¡å¼ï¼Œä»åº“å¾ˆå¤šçš„æ—¶å€™ï¼Œæ¯ä¸ªä»åº“éƒ½è¦å’Œä¸»åº“è¿›è¡Œå…¨é‡å¤åˆ¶æ—¶å€™ï¼Œä¸»åº“å‹åŠ›ä¼šè¿‡å¤§ï¼Œå› ä¸ºä¸»åº“éœ€è¦forkè¿›ç¨‹ç”ŸæˆRDBï¼Œ
è¿™ä¸ªforkè¿›ç¨‹æ˜¯ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œå½±å“ä¸»åº“æ­£å¸¸å¤„ç†çš„è¯·æ±‚ï¼ŒåŒæ—¶ä¼ è¾“å¤§çš„RDBæ–‡ä»¶ä¹Ÿæ˜¯ä¼šå ç”¨ä¸»åº“çš„ç½‘ç»œå¸¦å®½ã€‚

è§£å†³åŠæ³•ï¼š
    å¯ä»¥ä½¿ç”¨ ä¸»-ä»ï¼ˆä¸»ï¼‰-ä» çš„æ–¹å¼ï¼Œå°±æ˜¯éƒ¨ç½²ä¸»ä»é›†ç¾¤çš„æ—¶å€™ï¼Œé€‰æ‹©æœåŠ¡å™¨ç¡¬ä»¶å¥½çš„ä»åº“åšä¸‹çº§çš„ä¸»åº“ï¼Œå¯å…¶ä»–éƒ¨åˆ†ä»åº“å»ºç«‹ä¸»ä»å…³ç³»
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="redisä¸»ä»åŒæ­¥çš„æ–¹å¼"><a href="#redisä¸»ä»åŒæ­¥çš„æ–¹å¼" class="header-anchor">#</a> redisä¸»ä»åŒæ­¥çš„æ–¹å¼ï¼š</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>å…¨é‡å¤åˆ¶ï¼š æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šåŒæ­¥åˆ°ä»redisä¸­
å¢é‡å¤åˆ¶ï¼š ç½‘ç»œä¸­æ–­ç­‰æƒ…å†µåçš„å¤åˆ¶ï¼Œåªå°†ä¸­æ–­éƒ¨åˆ†å¤åˆ¶æ•°æ®åˆ°ä»redisä¸­
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="rediså“¨å…µæ¨¡å¼"><a href="#rediså“¨å…µæ¨¡å¼" class="header-anchor">#</a> rediså“¨å…µæ¨¡å¼ï¼š</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>
- æµè¯­è¨€åè®®ï¼šgossip protocolsï¼Œç”¨äºä¼ æ’­masteræ˜¯å¦æ•…éšœçš„ä¿¡æ¯
- æŠ•ç¥¨åè®®ï¼š  agreement protocolsï¼Œç”¨äºsentinelä¹‹é—´æŠ•ç¥¨å†³å®šmasteræ•…éšœè¿ç§»ï¼Œä»¥åŠå‡çº§å“ªä¸ªslaveä¸ºæ–°çš„master

- å¿ƒè·³æœºåˆ¶ï¼š Redisåˆ›å»ºmasterå’Œslaveæ—¶ï¼Œsentineléœ€è¦é…ç½®ä¸»èŠ‚ç‚¹çš„ä¿¡æ¯ï¼ˆsentinel monitor mymaster 192.168.2.9 6379 1ï¼‰
  åŠæŠ•ç¥¨å†³è®®æ•°ç›®ï¼ˆæ¯”å¦‚è¿™ä¸ª1ä»£è¡¨çš„æ˜¯å¦‚æœæœ‰1å°sentinelè®¤ä¸ºè¿™ä¸ªmasteræœ‰æ•…éšœå°±ä¼šæ‰§è¡Œæ•…éšœè¿ç§» ï¼‰
  sentinelä¼šå‘é€pingå‘½ä»¤åˆ°ä¸»èŠ‚ç‚¹ã€ä»èŠ‚ç‚¹ä½œä¸ºå¿ƒè·³æ£€æµ‹ã€‚

- åˆ¤æ–­ä¸»èŠ‚ç‚¹æ•…éšœï¼šï¼ˆä¸»è§‚ä¸‹çº¿ã€å®¢è§‚ä¸‹çº¿ï¼‰ 
  1. sentinelæ¯éš”1så‘æ‰€æœ‰çš„masterã€slaveèŠ‚ç‚¹å‘é€pingå‘½ä»¤è¿›è¡Œå¿ƒè·³æ£€æµ‹ï¼Œå¦‚æœå¹³å‘½ä»¤æ— è¿”å›æ—¶é—´è¶…è¿‡30sï¼Œåˆ™è®¤ä¸ºè¯¥masterèŠ‚ç‚¹ä¸ºæ•…éšœï¼Œå¹¶ä¸”æ ‡è®°flagsçŠ¶æ€ä¸ºSRI_S_DOWN
  2. ä¸Šä¸ªè®¤ä¸ºmasteræ•…éšœçš„sentinelèŠ‚ç‚¹ï¼Œsentinel å‘é€sentinel is-master-down-by-addræ¶ˆæ¯ï¼Œè¯¢é—®å…¶ä»–sentinelæ˜¯å¦è®¤åŒè¯¥masterå·²æ•…éšœ
     å‘é€å‘½ä»¤ï¼šsentinel is-master-down-by-addr &lt;ip&gt; &lt;port&gt; &lt;current_epoch&gt; &lt;runid&gt;
        ipï¼šä¸»è§‚ä¸‹çº¿çš„æœåŠ¡ip
        portï¼šä¸»è§‚ä¸‹çº¿çš„æœåŠ¡ç«¯å£
        current_epochï¼šsentinelçš„çºªå…ƒ
        runidï¼š*è¡¨ç¤ºæ£€æµ‹æœåŠ¡ä¸‹çº¿çŠ¶æ€ï¼Œå¦‚æœæ˜¯sentinelçš„è¿è¡Œidï¼Œè¡¨ç¤ºç”¨æ¥é€‰ä¸¾é¢†å¤´sentinel
        
    ä¸»è§‚ä¸‹çº¿ï¼šå°±æ˜¯å“¨å…µä½¿ç”¨pingå‘½ä»¤æ£€æµ‹redisèŠ‚ç‚¹çš„å¿ƒè·³ï¼Œè‹¥å“åº”è¶…æ—¶å°±ä¼šæ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼Œå¹¶ä¸”å‘é€ä¸Šé¢çš„æ¶ˆæ¯ç»™å…¶ä»–å“¨å…µï¼Œæ‰§è¡Œå®¢è§‚ä¸‹çº¿çš„è¿‡ç¨‹ã€‚
    å®¢è§‚ä¸‹çº¿ï¼šå¤šä¸ªå“¨å…µå®ä¾‹å‡è®¤ä¸ºè¯¥redisèŠ‚ç‚¹å·²ç»ä¸‹çº¿ï¼ˆå¤šä¸ªå“¨å…µå¯¹è¯¥redisèŠ‚ç‚¹æ ‡è®°ä¸ºäº†ä¸»è§‚ä¸‹çº¿ï¼‰
    è¯¯åˆ¤ï¼š ä¸»åº“å®é™…å¹¶æ²¡æœ‰ä¸‹çº¿ï¼Œä½†æ˜¯å“¨å…µè¯¯ä»¥ä¸ºå®ƒä¸‹çº¿äº†ã€‚è¯¯åˆ¤ä¸€èˆ¬ä¼šå‘ç”Ÿåœ¨é›†ç¾¤ç½‘ç»œå‹åŠ›è¾ƒå¤§ã€ç½‘ç»œæ‹¥å¡ï¼Œæˆ–è€…æ˜¯ä¸»åº“æœ¬èº«å‹åŠ›è¾ƒå¤§çš„æƒ…å†µä¸‹
    
  3. å…¶ä»–çš„sentinelèŠ‚ç‚¹æ”¶åˆ°å¦å¤–sentinelçš„é€šçŸ¥æ¶ˆæ¯ï¼Œä¼šæ ¹æ®å‘é€çš„æ¶ˆæ¯è¿›è¡Œåˆ¤æ–­masteræ˜¯å¦çœŸçš„å·²æ•…éšœï¼Œè‹¥è®¤ä¸ºmasterèŠ‚ç‚¹å·²ç»æ•…éšœçš„æ•°é‡å¤§äºé…ç½®çš„æ•°é‡ï¼Œåˆ™
     æ‰§è¡Œæ•…éšœè½¬ç§»æ­¥éª¤ï¼Œå‡çº§æŸslaveä¸ºæ–°çš„masterèŠ‚ç‚¹ 
     è¿™å°±æ˜¯sentinelçš„å®¢è§‚ä¸‹çº¿ï¼Œåªæœ‰å®¢è§‚ä¸‹çº¿æ‰èƒ½çœŸæ­£è®¤ä¸ºè¯¥redisä¸»èŠ‚ç‚¹å·²ç»æ•…éšœäº†ã€‚å…¶åˆ¤æ–­çš„åŸåˆ™å°±æ˜¯å°‘æ•°æœä»å¤šæ•°ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆåˆ†å¸ƒå¼ç³»ç»Ÿé€šå¸¸ä¼šéƒ¨ç½²å¥‡æ•°ä¸ªå®ä¾‹çš„åŸå› ï¼Œæ–¹ä¾¿æŠ•ç¥¨å†³ç­–ã€‚


- é€‰ä¸¾ç®—æ³•ï¼š
  1.


- æ•…éšœè½¬ç§»ï¼š
  å‡çº§æŸä¸ªslaveä¸ºæ–°masterçš„æ¡ä»¶ï¼š
  1. redis.confä¸­çš„replica-priorityé…ç½®é¡¹ä»£è¡¨ä¸»èŠ‚ç‚¹æ•…éšœåï¼Œå‡çº§ä»èŠ‚ç‚¹ä¼šæ ¹æ®è¿™ä¸ªå‚æ•°å€¼è¿›è¡Œæ˜¯å¦ä¼˜å…ˆå‡çº§ï¼Œå‚æ•°è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜
  2. è‹¥replica-priorityé…ç½®å€¼ç›¸åŒï¼Œé‚£å°±é€‰æ‹©offsetæœ€å¤§çš„ï¼Œè¶Šå¤§è¡¨ç¤ºåŒæ­¥çš„æ•°æ®è¶Šå¤š
  3. è‹¥offsetä¹Ÿç›¸åŒï¼Œé€‰æ‹©run idè¾ƒå°çš„

  sentinelçš„å·¥ä½œï¼š
  1. sentinelä¼šå°†æ–°é€‰å‡ºæ¥slaveæ‰§è¡Œ: slaveof no one(redisæ‰‹åŠ¨å‡çº§ä»èŠ‚ç‚¹ä¸ºä¸»èŠ‚ç‚¹å‘½ä»¤)
  2. sentinelå‘é€å‘½ä»¤slaveof æ–°masterIP ç«¯å£ç»™å…¶ä»–çš„ä»èŠ‚ç‚¹ï¼Œé€šçŸ¥æ–°ä¸»ä¸Šä½ï¼Œåå‘è¿™ä¸ªæ–°ä¸»å¤åˆ¶æ•°æ®
  3. sentinelåœ¨é€‰ä¸¾å®Œæ–°ä¸»masterèŠ‚ç‚¹ä¹‹åï¼Œä¼šå°†ä¹‹å‰æ•…éšœmasterèŠ‚ç‚¹å˜æˆæ–°ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†å…¶ä¸‹çº¿
  è¿™æ ·è¿™ä¸ªæ•…éšœèŠ‚ç‚¹ä¸‹æ¬¡æ¢å¤åå°±ä¸ä¼šå‡ºç°åŒä¸»çš„é—®é¢˜ï¼ˆè„‘è£‚ï¼‰

- å“¨å…µæœºåˆ¶çš„ä¸‰ä¸ªé˜¶æ®µï¼š
1. ç›‘æ§ï¼š ä¹Ÿå°±æ˜¯ä¸Šé¢çš„ &quot;åˆ¤æ–­ä¸»èŠ‚ç‚¹æ•…éšœ&quot; çš„å¤§è‡´è¿‡ç¨‹
å“¨å…µå‘masterå‘é€pingå¿ƒè·³æ£€æµ‹å‘½ä»¤ï¼Œè‹¥æŒ‡å®šæ—¶é—´å†…æ— è¿”å›ï¼Œåˆ™æ ‡è®°ä¸ºä¸»èŠ‚ç‚¹æ•…éšœï¼ˆSRI_S_DOWNï¼‰ï¼Œå¹¶ä¸”è¯¥å“¨å…µä¼šå‘é€å¹¿æ’­æ¶ˆæ¯ç»™å…¶ä»–å“¨å…µï¼Œ
ç”¨äºè¯¢é—®å…¶ä»–å“¨å…µæ˜¯å¦è®¤åŒå½“å‰ä¸»èŠ‚ç‚¹å·²å‘ç”Ÿæ•…éšœã€‚è‹¥å…¶ä»–å“¨å…µä¹Ÿè®¤ä¸ºå½“å‰ä¸»èŠ‚ç‚¹æ•…éšœï¼Œå¹¶ä¸”è®¤ä¸ºä¸»æ•…éšœçš„å“¨å…µæ•°é‡è¶…è¿‡é…ç½®çš„æ•°é‡ï¼Œåˆ™ç¡®å®šå·²æ•…éšœï¼Œæ‰§è¡Œåç»­é€‰ä¸»ã€æ•…éšœè½¬ç§»ç­‰æ“ä½œã€‚

2. é€‰ä¸»ï¼š
       åœ¨ç¡®è®¤ä¸»èŠ‚ç‚¹çœŸæ­£æ•…éšœä¹‹åï¼Œå¼€å§‹æ‰§è¡Œé€‰æ–°ä¸»èŠ‚ç‚¹çš„è¿‡ç¨‹ã€‚å…¶ä¸­é€‰ä¸»çš„ä¸»è¦æ˜¯å¯¹ä»èŠ‚ç‚¹è¿›è¡Œæ‰“åˆ†ï¼Œæ‰“åˆ†è§„åˆ™ä¸ºï¼š ä»åº“ä¼˜å…ˆçº§ã€ä»åº“å¤åˆ¶è¿›åº¦ã€ä»åº“idå·ã€‚
       ä»åº“ä¼˜å…ˆçº§ï¼š   é…ç½®åœ¨ä»åº“ redis.conf ä¸­çš„ replica-priority ï¼ˆæ—§ç‰ˆæœ¬ï¼š slave-priority ï¼‰çš„å€¼åˆ¤å®šï¼Œå€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚
       ä»åº“å¤åˆ¶è¿›åº¦ï¼š æ ¹æ® slave_repl_offset æ¥ï¼Œå€¼è¶Šå¤§è¡¨ç¤ºå·²ç»åŒæ­¥çš„æ•°æ®è¶Šå¤šï¼Œåˆ†æ•°è¶Šé«˜ã€‚ 
       ä»åº“idå·ï¼š    å¯åŠ¨rediså®ä¾‹çš„æ—¶å€™ï¼Œä¼šç”Ÿæˆä¸€ä¸ªidå·ï¼Œåœ¨ ä»åº“ä¼˜å…ˆçº§ å’Œ ä»åº“å¤åˆ¶è¿›åº¦ç›¸åŒæƒ…å†µä¸‹ï¼Œä»åº“idå·è¶Šå°åˆ†æ•°è¶Šé«˜ã€‚ 
       å…¶ä»–ï¼š ä»åº“çš„ç½‘ç»œè¿æ¥çŠ¶å†µã€ä»åº“å’Œä¸»åº“çš„æ–­è¿æ¬¡æ•°

3. é€šçŸ¥ï¼š 
         é€‰ä¸»ç»“æŸä¹‹åï¼Œé€šçŸ¥æ‰€æœ‰çš„ä»èŠ‚ç‚¹æ‰§è¡Œ replicaof æ–°ä¸»èŠ‚ç‚¹ çš„å‘½ä»¤ï¼Œå°±æ˜¯å’Œæ–°ä¸»èŠ‚ç‚¹å»ºç«‹ä¸»ä»å…³ç³»ï¼Œæ•°æ®åŒæ­¥å¤åˆ¶å…³ç³»ã€‚å¦å¤–æŠŠä¹‹å‰å°±çš„ä¸»èŠ‚ç‚¹å˜æˆæ–°ä¸»çš„ä»èŠ‚ç‚¹ä»¥é˜²è„‘è£‚ï¼

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h2 id="å“¨å…µæ¨¡å¼çš„ç¼ºç‚¹"><a href="#å“¨å…µæ¨¡å¼çš„ç¼ºç‚¹" class="header-anchor">#</a> å“¨å…µæ¨¡å¼çš„ç¼ºç‚¹</h2> <ol><li>å“¨å…µæ¨¡å¼ä¸‹æ¯å°RedisæœåŠ¡å™¨éƒ½å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œæµªè´¹å†…å­˜æ§ä»¶ï¼Œæ•°æ®é‡å¤ªå¤§ï¼Œä¸»ä»åŒæ­¥æ—¶ä¸¥é‡å½±å“äº†masteræ€§èƒ½</li> <li>å“¨å…µæ¨¡å¼æ˜¯ä¸­å¿ƒåŒ–çš„é›†ç¾¤å®ç°æ–¹æ¡ˆï¼Œæ¯ä¸ªä»æœºå’Œä¸»æœºçš„è€¦åˆåº¦å¾ˆé«˜ï¼Œmasterå®•æœºåˆ°slaveé€‰ä¸¾masteræ¢å¤æœŸé—´æœåŠ¡ä¸å¯ç”¨</li> <li>å“¨å…µæ¨¡å¼åªæœ‰ä¸€ä¸ªRedisä¸»æœºæ¥æ¥æ”¶å¤„ç†å’Œå†™çš„è¯·æ±‚ï¼Œå†™çš„æ“ä½œè¿˜æ˜¯æ”¶åˆ°å•æœºç“¶é¢ˆçš„å½±å“ï¼Œæ²¡æœ‰å®ç°çœŸæ­£çš„åˆ†å¸ƒå¼æ¶æ„</li></ol> <p>Redis Cluster è§£å†³äº†ä»¥ä¸Šå“¨å…µæ¨¡å¼çš„é—®é¢˜</p> <h2 id="springboot-redisé›†ç¾¤"><a href="#springboot-redisé›†ç¾¤" class="header-anchor">#</a> springboot+redisé›†ç¾¤</h2> <h3 id="_1-redisé…ç½®è¯»å†™åˆ†ç¦»"><a href="#_1-redisé…ç½®è¯»å†™åˆ†ç¦»" class="header-anchor">#</a> 1. redisé…ç½®è¯»å†™åˆ†ç¦»ï¼š</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>å‚è€ƒé…ç½®ï¼š RedisSentinelConfig:         
LettuceClientConfiguration clientConfiguration = LettucePoolingClientConfiguration.builder()
        .readFrom(ReadFrom.REPLICA)//TODO LETTUCEè®¾ç½®è¯»å†™åˆ†ç¦»
        .poolConfig(config)
        .build();

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-springbooté…ç½®redisé›†ç¾¤"><a href="#_2-springbooté…ç½®redisé›†ç¾¤" class="header-anchor">#</a> 2. springbooté…ç½®redisé›†ç¾¤</h3> <ul><li>a. å¼•å…¥pom.xmlä¾èµ–</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>
&lt;!-- redis-start --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;!-- redis-end --&gt;

&lt;!-- é…ç½®sentineléœ€è¦ä½¿ç”¨åˆ° --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
    &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;
&lt;/dependency&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>b. application.ymlé…ç½®ï¼š</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code># é…ç½®redis-replication ä¸»ä»+å“¨å…µæ¨¡å¼
spring:
  redis:
    lettuce:
      pool:
        max-active: 1024 #æœ€å¤§è¿æ¥æ•°
        max-wait: 20000 #æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´(è´Ÿæ•°è¡¨ç¤ºæ²¡é™åˆ¶)
        max-idle: 200 #æœ€å¤§ç©ºé—²
        min-idle: 10 #æœ€å°ç©ºé—²
    sentinel:
      master: mymaster # ä¸»ä»ç»„çš„åç§°ï¼Œå–å€¼æ˜¯æ¥è‡ªäºsentinelçš„é…ç½®æ–‡ä»¶ ï¼ï¼
      nodes: x.x.x.x:26379,x.x.x.x:26378,x.x.x.x:26377 # sentinelèŠ‚ç‚¹ï¼Œip:portï¼Œé€—å·éš”å¼€
    timeout: 100000
    client-name: LETTUCE
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>c. LETTUCE è¿æ¥æ± é…ç½®</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.mqz.better.redis.replication.sentinel;

import io.lettuce.core.ReadFrom;
import org.apache.commons.pool2.impl.GenericObjectPoolConfig;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.autoconfigure.data.redis.RedisProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisNode;
import org.springframework.data.redis.connection.RedisSentinelConfiguration;
import org.springframework.data.redis.connection.lettuce.LettuceClientConfiguration;
import org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory;
import org.springframework.data.redis.connection.lettuce.LettucePoolingClientConfiguration;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
import org.springframework.data.redis.serializer.StringRedisSerializer;

import java.util.ArrayList;
import java.util.List;

/**
 * :  ç‰ˆæƒæ‰€æœ‰ Â© Copyright 2012&lt;br&gt;
 *
 * @Authorï¼š è’™å¤§æ‹¿
 * @Dateï¼š2021/10/22 10:39 ä¸Šåˆ
 * @Description
 * @Aboutï¼š https://github.com/DemoMeng
 */
@Configuration
public class RedisSentinelConfig {


    @Value(&quot;${spring.redis.sentinel.master}&quot;)
    private String master;
    @Value(&quot;${spring.redis.sentinel.nodes}&quot;)
    private String redisNodes;

    @Autowired
    RedisProperties redisProperties;


    @Bean
    public GenericObjectPoolConfig poolConfig() {
        GenericObjectPoolConfig config = new GenericObjectPoolConfig();
        config.setMinIdle(redisProperties.getLettuce().getPool().getMinIdle());
        config.setMaxIdle(redisProperties.getLettuce().getPool().getMaxIdle());
        config.setMaxTotal(redisProperties.getLettuce().getPool().getMaxActive());
        config.setMaxWaitMillis(redisProperties.getLettuce().getPool().getMaxWait().toMillis());
        return config;
    }

    @Bean
    public RedisSentinelConfiguration configuration() {
        RedisSentinelConfiguration redisConfig = new RedisSentinelConfiguration();
        redisConfig.setMaster(redisProperties.getSentinel().getMaster());
        redisConfig.setPassword(&quot;mengqizhang&quot;);
        if(redisProperties.getSentinel().getNodes()!=null) {
            List&lt;RedisNode&gt; sentinelNode=new ArrayList&lt;RedisNode&gt;();
            for(String sen : redisProperties.getSentinel().getNodes()) {
                String[] arr = sen.split(&quot;:&quot;);
                sentinelNode.add(new RedisNode(arr[0],Integer.parseInt(arr[1])));
            }
            redisConfig.setSentinels(sentinelNode);
        }
        return redisConfig;
    }
    @Bean(&quot;lettuceConnectionFactory&quot;)
    public LettuceConnectionFactory lettuceConnectionFactory(@Qualifier(&quot;poolConfig&quot;) GenericObjectPoolConfig config,
                                                             @Qualifier(&quot;configuration&quot;) RedisSentinelConfiguration redisConfig) {//æ³¨æ„ä¼ å…¥çš„å¯¹è±¡åå’Œç±»å‹RedisSentinelConfiguration
        LettuceClientConfiguration clientConfiguration = LettucePoolingClientConfiguration.builder()
                .readFrom(ReadFrom.REPLICA)//TODO LETTUCEè®¾ç½®è¯»å†™åˆ†ç¦»
                .poolConfig(config)
                .build();
        return new LettuceConnectionFactory(redisConfig, clientConfiguration);
    }

//    @Bean(&quot;stringObjectRedisTemplate&quot;)
//    public RedisTemplate&lt;String, Object&gt; stringObjectRedisTemplate(@Qualifier(&quot;lettuceConnectionFactory&quot;) LettuceConnectionFactory connectionFactory) {
//        RedisTemplate&lt;String, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();
//        redisTemplate.setConnectionFactory(connectionFactory);
//        StringRedisSerializer stringRedisSerializer = new StringRedisSerializer();
//        GenericJackson2JsonRedisSerializer genericJackson2JsonRedisSerializer = new GenericJackson2JsonRedisSerializer();
//        //è®¾ç½®åºåˆ—åŒ–å™¨
//        redisTemplate.setKeySerializer(stringRedisSerializer);
//        redisTemplate.setValueSerializer(genericJackson2JsonRedisSerializer);
//        redisTemplate.setHashKeySerializer(stringRedisSerializer);
//        redisTemplate.setHashValueSerializer(genericJackson2JsonRedisSerializer);
//        redisTemplate.afterPropertiesSet();
//        return redisTemplate;
//    }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br></div></div><div data-v-1f2b5245></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/mengqizhang/æ•°æ®å±‚/redis/redis6-conf.html" class="prev">
        redis6é…ç½®æ–‡ä»¶
      </a></span> <span class="next"><a href="/mengqizhang/æ•°æ®å±‚/redis/redis-é›†ç¾¤.html">
        redisé«˜å¯ç”¨-é›†ç¾¤
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/mengqizhang/assets/js/app.a8d21a83.js" defer></script><script src="/mengqizhang/assets/js/2.e69c46bd.js" defer></script><script src="/mengqizhang/assets/js/84.e2f1cab8.js" defer></script><script src="/mengqizhang/assets/js/6.48810bdc.js" defer></script>
  </body>
</html>
